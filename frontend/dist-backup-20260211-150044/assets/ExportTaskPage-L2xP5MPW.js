import{c as w,r,j as e}from"./index-DWrA19-Q.js";import{n as _,o as E}from"./billing-enhanced-Dk52PFus.js";import{R as c}from"./refresh-cw-BhCYe8kh.js";import{P as m}from"./plus-Bbj8i8yA.js";import{F as p}from"./file-text-DRE6fYJy.js";import{C as h}from"./circle-check-big-CgFKxf-k.js";import{C as g}from"./circle-x-CBGg8NKM.js";import{D as C}from"./download-Bm7c4jyO.js";import{C as I}from"./clock-DDHN8A9u.js";/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}]],D=w("file",S),V=()=>{const[a,u]=r.useState([]),[d,x]=r.useState(!1),[f,i]=r.useState(!1),[t,l]=r.useState({export_type:"INVOICES",file_format:"EXCEL",start_date:new Date(new Date().setMonth(new Date().getMonth()-1)).toISOString().split("T")[0],end_date:new Date().toISOString().split("T")[0],client_id:void 0});r.useEffect(()=>{n();const s=setInterval(n,1e4);return()=>clearInterval(s)},[]);const n=async()=>{x(!0);try{const s=await _();u(s)}catch(s){console.error("Failed to load tasks:",s)}finally{x(!1)}},j=async()=>{try{const s={start_date:t.start_date,end_date:t.end_date};t.client_id&&(s.client_id=t.client_id),await E({export_type:t.export_type,file_format:t.file_format,filters:s}),i(!1),n(),alert("ë‚´ë³´ë‚´ê¸° ì‘ì—…ì´ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤. ì™„ë£Œë˜ë©´ ë‹¤ìš´ë¡œë“œ ë²„íŠ¼ì´ í™œì„±í™”ë©ë‹ˆë‹¤.")}catch(s){console.error("Failed to create task:",s),alert("ë‚´ë³´ë‚´ê¸° ì‘ì—… ìƒì„±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.")}},b=s=>{s.file_url&&window.open(s.file_url,"_blank")},o=s=>new Date(s).toLocaleString("ko-KR"),N=s=>({INVOICES:"ì²­êµ¬ì„œ",SETTLEMENTS:"ì •ì‚°ì„œ",PAYMENTS:"ê²°ì œ ë‚´ì—­",FINANCIAL_REPORT:"ì¬ë¬´ ë³´ê³ ì„œ"})[s]||s,y=s=>s==="EXCEL"?e.jsx(p,{className:"w-4 h-4 text-green-600"}):e.jsx(D,{className:"w-4 h-4 text-red-600"}),v=s=>{switch(s){case"PENDING":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:[e.jsx(I,{className:"w-3 h-3"}),"ëŒ€ê¸° ì¤‘"]});case"PROCESSING":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[e.jsx(c,{className:"w-3 h-3 animate-spin"}),"ì²˜ë¦¬ ì¤‘"]});case"COMPLETED":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[e.jsx(h,{className:"w-3 h-3"}),"ì™„ë£Œ"]});case"FAILED":return e.jsxs("span",{className:"inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[e.jsx(g,{className:"w-3 h-3"}),"ì‹¤íŒ¨"]});default:return null}};return e.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"ë‚´ë³´ë‚´ê¸° ì‘ì—… ê´€ë¦¬"}),e.jsx("p",{className:"text-gray-600",children:"Excel/PDF íŒŒì¼ ë‚´ë³´ë‚´ê¸° ë° ë‹¤ìš´ë¡œë“œ"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:n,disabled:d,className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors disabled:bg-gray-400 flex items-center gap-2",children:[e.jsx(c,{className:`w-4 h-4 ${d?"animate-spin":""}`}),"ìƒˆë¡œê³ ì¹¨"]}),e.jsxs("button",{onClick:()=>i(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[e.jsx(m,{className:"w-4 h-4"}),"ìƒˆ ì‘ì—…"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-gray-100 rounded-lg",children:e.jsx(p,{className:"w-6 h-6 text-gray-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"ì´ ì‘ì—…"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.length})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:e.jsx(c,{className:"w-6 h-6 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"ì²˜ë¦¬ ì¤‘"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:a.filter(s=>s.status==="PROCESSING"||s.status==="PENDING").length})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:e.jsx(h,{className:"w-6 h-6 text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"ì™„ë£Œ"}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:a.filter(s=>s.status==="COMPLETED").length})]})]})}),e.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-red-100 rounded-lg",children:e.jsx(g,{className:"w-6 h-6 text-red-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"ì‹¤íŒ¨"}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:a.filter(s=>s.status==="FAILED").length})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"ìœ í˜•"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"íŒŒì¼ í˜•ì‹"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"ìƒì„± ì‹œê°"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"ì™„ë£Œ ì‹œê°"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"ìƒíƒœ"}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase",children:"ì‘ì—…"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:a.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full bg-purple-100 text-purple-800",children:N(s.export_type)})})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[y(s.file_format),e.jsx("span",{className:"font-medium",children:s.file_format})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:o(s.created_at)}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:s.completed_at?o(s.completed_at):"-"}),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[v(s.status),s.status==="FAILED"&&s.error_message&&e.jsx("p",{className:"text-xs text-red-600 mt-1",children:s.error_message})]}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:s.status==="COMPLETED"&&s.file_url&&e.jsxs("button",{onClick:()=>b(s),className:"inline-flex items-center gap-1 px-3 py-1 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[e.jsx(C,{className:"w-4 h-4"}),"ë‹¤ìš´ë¡œë“œ"]})})]},s.id))})]})}),a.length===0&&!d&&e.jsx("div",{className:"text-center py-12 text-gray-500",children:"ë‚´ë³´ë‚´ê¸° ì‘ì—…ì´ ì—†ìŠµë‹ˆë‹¤."})]}),f&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl p-6 max-w-md w-full",children:[e.jsxs("h2",{className:"text-xl font-bold mb-4 flex items-center gap-2",children:[e.jsx(m,{className:"w-5 h-5"}),"ìƒˆ ë‚´ë³´ë‚´ê¸° ì‘ì—…"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ë‚´ë³´ë‚´ê¸° ìœ í˜•"}),e.jsxs("select",{value:t.export_type,onChange:s=>l({...t,export_type:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"INVOICES",children:"ì²­êµ¬ì„œ"}),e.jsx("option",{value:"SETTLEMENTS",children:"ì •ì‚°ì„œ"}),e.jsx("option",{value:"PAYMENTS",children:"ê²°ì œ ë‚´ì—­"}),e.jsx("option",{value:"FINANCIAL_REPORT",children:"ì¬ë¬´ ë³´ê³ ì„œ"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"íŒŒì¼ í˜•ì‹"}),e.jsxs("select",{value:t.file_format,onChange:s=>l({...t,file_format:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"EXCEL",children:"Excel (.xlsx)"}),e.jsx("option",{value:"PDF",children:"PDF (.pdf)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ì‹œì‘ì¼"}),e.jsx("input",{type:"date",value:t.start_date,onChange:s=>l({...t,start_date:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ì¢…ë£Œì¼"}),e.jsx("input",{type:"date",value:t.end_date,onChange:s=>l({...t,end_date:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ê±°ë˜ì²˜ ID (ì„ íƒ)"}),e.jsx("input",{type:"number",value:t.client_id||"",onChange:s=>l({...t,client_id:s.target.value?parseInt(s.target.value):void 0}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"ì „ì²´ ê±°ë˜ì²˜"})]}),e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:e.jsx("p",{className:"text-sm text-blue-800",children:"ğŸ’¡ íŒŒì¼ ìƒì„±ì—ëŠ” ìˆ˜ ì´ˆì—ì„œ ìˆ˜ ë¶„ì´ ì†Œìš”ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì™„ë£Œë˜ë©´ ë‹¤ìš´ë¡œë“œ ë²„íŠ¼ì´ í™œì„±í™”ë©ë‹ˆë‹¤."})})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>i(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"ì·¨ì†Œ"}),e.jsx("button",{onClick:j,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"ìƒì„±"})]})]})})]})})};export{V as default};
