import{c as f,f as y,r as l,b as v,z as w,j as e}from"./index-DWrA19-Q.js";import{MapContainer as _,TileLayer as k,Marker as E,Popup as P}from"react-leaflet";import{QRCodeSVG as z}from"qrcode.react";import"leaflet/dist/leaflet.css";import{P as n}from"./package-CyltdJ0k.js";import{T as g}from"./truck-DYyomFIS.js";import{M as j}from"./map-pin-BXKaUHvy.js";import{C as S}from"./clock-DDHN8A9u.js";import{P as I}from"./phone-D0-IHEaG.js";/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],d=f("circle-check",C),$=()=>{const{trackingNumber:c}=y(),[s,p]=l.useState(null),[u,b]=l.useState(!0),[o,m]=l.useState(null);l.useEffect(()=>{if(c){x();const t=setInterval(x,15e3);return()=>clearInterval(t)}},[c]);const x=async()=>{var t,a;try{const i=await v.getTrackingInfo(c);p(i),m(null)}catch(i){m(((a=(t=i.response)==null?void 0:t.data)==null?void 0:a.detail)||"배송 정보를 찾을 수 없습니다"),w.error("배송 정보를 불러오는데 실패했습니다")}finally{b(!1)}},h=t=>({ASSIGNED:{label:"배차 완료",color:"text-yellow-600",icon:d},IN_PROGRESS:{label:"배송 중",color:"text-green-600",icon:g},PICKUP_COMPLETE:{label:"상차 완료",color:"text-blue-600",icon:n},DELIVERY_COMPLETE:{label:"배송 완료",color:"text-purple-600",icon:d},COMPLETED:{label:"완료",color:"text-gray-600",icon:d}})[t]||{label:t,color:"text-gray-600",icon:n};if(u)return e.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"배송 정보를 불러오는 중..."})]})});if(o||!s)return e.jsx("div",{className:"min-h-screen bg-gray-100 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full text-center",children:[e.jsx(n,{size:64,className:"mx-auto text-gray-300 mb-4"}),e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"배송 정보를 찾을 수 없습니다"}),e.jsx("p",{className:"text-gray-600 mb-6",children:o}),e.jsx("p",{className:"text-sm text-gray-500",children:"추적번호를 다시 확인해주세요"})]})});const r=h(s.status),N=r.icon;return e.jsxs("div",{className:"min-h-screen bg-gray-100",children:[e.jsx("div",{className:"bg-blue-600 text-white py-8",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsx("div",{className:"flex items-center justify-center mb-4",children:e.jsx(g,{size:48})}),e.jsx("h1",{className:"text-3xl font-bold text-center",children:"배송 추적"}),e.jsx("p",{className:"text-center text-blue-100 mt-2",children:"실시간 배송 현황을 확인하세요"})]})}),e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-lg p-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{className:"mb-4 md:mb-0",children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"추적번호"}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.tracking_number}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["주문번호: ",s.order_number]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(N,{className:r.color,size:32}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"현재 상태"}),e.jsx("p",{className:`text-xl font-bold ${r.color}`,children:r.label})]})]})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[e.jsx("div",{className:"p-4 bg-gray-50 border-b",children:e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[e.jsx(j,{className:"mr-2",size:20}),"현재 위치"]})}),e.jsx("div",{className:"h-96",children:e.jsxs(_,{center:[s.current_location.latitude,s.current_location.longitude],zoom:13,style:{height:"100%",width:"100%"},children:[e.jsx(k,{attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a>',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),e.jsx(E,{position:[s.current_location.latitude,s.current_location.longitude],children:e.jsx(P,{children:e.jsxs("div",{className:"p-2",children:[e.jsx("p",{className:"font-semibold",children:s.order_number}),e.jsx("p",{className:"text-sm text-gray-600",children:s.current_location.address})]})})})]})}),e.jsx("div",{className:"p-4 bg-gray-50 border-t",children:e.jsxs("p",{className:"text-sm text-gray-600",children:[e.jsx(j,{className:"inline mr-1",size:16}),s.current_location.address]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[s.estimated_arrival&&e.jsx("div",{className:"bg-white rounded-lg shadow-lg p-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(S,{className:"text-blue-600 mr-3 mt-1",size:24}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"예상 도착 시간"}),e.jsx("p",{className:"text-lg font-semibold text-gray-900",children:new Date(s.estimated_arrival).toLocaleString("ko-KR",{month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})]})}),s.driver_contact&&e.jsx("div",{className:"bg-white rounded-lg shadow-lg p-6",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx(I,{className:"text-green-600 mr-3 mt-1",size:24}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"기사 연락처"}),e.jsx("a",{href:`tel:${s.driver_contact}`,className:"text-lg font-semibold text-green-600 hover:text-green-700",children:s.driver_contact})]})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"배송 이력"}),e.jsx("div",{className:"space-y-4",children:s.history.map((t,a)=>e.jsxs("div",{className:"flex",children:[e.jsxs("div",{className:"flex flex-col items-center mr-4",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${a===0?"bg-blue-600":"bg-gray-300"}`}),a<s.history.length-1&&e.jsx("div",{className:"w-0.5 h-full bg-gray-300 mt-1"})]}),e.jsxs("div",{className:"flex-1 pb-4",children:[e.jsx("p",{className:"font-medium text-gray-900",children:h(t.status).label}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:new Date(t.timestamp).toLocaleString("ko-KR")}),t.notes&&e.jsx("p",{className:"text-sm text-gray-500 mt-1",children:t.notes})]})]},a))})]}),e.jsx("div",{className:"bg-white rounded-lg shadow-lg p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"QR 코드로 공유하기"}),e.jsx("div",{className:"inline-block p-4 bg-white border-2 border-gray-200 rounded-lg",children:e.jsx(z,{value:window.location.href,size:200})}),e.jsx("p",{className:"text-sm text-gray-600 mt-4",children:"QR 코드를 스캔하여 배송 정보를 확인할 수 있습니다"})]})})]})})]})};export{$ as default};
