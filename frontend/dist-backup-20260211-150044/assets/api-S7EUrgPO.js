import{g as a}from"./index-DWrA19-Q.js";const r="/api/v1",t=a.create({baseURL:r,headers:{"Content-Type":"application/json"}});t.interceptors.request.use(e=>{const s=localStorage.getItem("access_token")||localStorage.getItem("token");return s&&(e.headers.Authorization=`Bearer ${s}`),e},e=>Promise.reject(e));t.interceptors.response.use(e=>e,e=>{var s;return((s=e.response)==null?void 0:s.status)===401&&(localStorage.removeItem("access_token"),localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login"),Promise.reject(e)});const l={list:()=>t.get("/clients/"),upload:(e,s=!0)=>{const o=new FormData;return o.append("file",e),t.post(`/clients/upload?auto_geocode=${s}`,o,{headers:{"Content-Type":"multipart/form-data"}})},geocode:e=>t.post("/clients/geocode",{client_ids:e}),downloadTemplate:()=>t.get("/clients/template/download",{responseType:"blob"}),create:e=>t.post("/clients/",e),update:(e,s)=>t.put(`/clients/${e}`,s),delete:e=>t.delete(`/clients/${e}`)},n={list:e=>t.get("/vehicles/",{params:e}),upload:e=>{const s=new FormData;return s.append("file",e),t.post("/vehicles/upload",s,{headers:{"Content-Type":"multipart/form-data"}})},downloadTemplate:()=>t.get("/vehicles/template/download",{responseType:"blob"}),syncUvis:()=>t.post("/vehicles/sync/uvis"),create:e=>t.post("/vehicles/",e),update:(e,s)=>t.put(`/vehicles/${e}`,s),delete:e=>t.delete(`/vehicles/${e}`)},p={list:e=>t.get("/orders/",{params:{status:e}}),pendingCount:()=>t.get("/orders/pending/count"),parseNLP:e=>t.post("/orders/parse-nlp",{text:e}),upload:e=>{const s=new FormData;return s.append("file",e),t.post("/orders/upload",s,{headers:{"Content-Type":"multipart/form-data"}})},downloadTemplate:()=>t.get("/orders/template/download",{responseType:"blob"}),create:e=>t.post("/orders/",e),update:(e,s)=>t.put(`/orders/${e}`,s),delete:e=>t.delete(`/orders/${e}`)},c={getVehicleLocation:e=>t.get(`/uvis/vehicles/${e}/location`),getVehicleTemperature:e=>t.get(`/uvis/vehicles/${e}/temperature`),getVehicleStatus:e=>t.get(`/uvis/vehicles/${e}/status`),monitorVehicle:e=>t.get(`/uvis/vehicles/${e}/monitor`),getBulkLocations:e=>{const s=e?{vehicle_ids:e}:{};return t.get("/uvis/vehicles/bulk/locations",{params:s})},getBulkTemperatures:e=>{const s=e?{vehicle_ids:e}:{};return t.get("/uvis/vehicles/bulk/temperatures",{params:s})},getDashboard:async()=>(await t.get("/uvis/dashboard")).data,getRealtimeVehicles:e=>t.get("/uvis-gps/realtime/vehicles",{params:e?{vehicle_ids:e}:{}}),syncGPS:e=>t.post("/uvis-gps/sync/gps",e||{force_new_key:!1}),syncTemperature:e=>t.post("/uvis-gps/sync/temperature",e||{force_new_key:!1}),syncAll:e=>t.post("/uvis-gps/sync/all",e||{force_new_key:!1})},d={simulate:e=>t.post(`/ml-dispatch/simulate?target_date=${e}`),getSimulateMetrics:(e,s)=>t.get(`/ml-dispatch/simulate/metrics?start_date=${e}&end_date=${s}`),optimize:(e,s="recommend")=>t.post(`/ml-dispatch/optimize?mode=${s}`,{order_ids:e}),getPerformance:(e,s)=>{const o=new URLSearchParams;return e&&o.append("start_date",e),s&&o.append("end_date",s),t.get(`/ml-dispatch/performance?${o.toString()}`)},getABTestAssignment:()=>t.get("/ab-test/user-group"),updateRollout:e=>t.put("/ab-test/rollout",{percentage:e}),getABTestStats:()=>t.get("/ab-test/stats"),getABTestMetrics:()=>t.get("/ab-test/metrics/compare"),getRolloutHistory:(e=20)=>t.get(`/ab-test/rollout/history?limit=${e}`),forceAssignUser:(e,s)=>t.post(`/ab-test/force-assign?user_id=${e}&group=${s}`)};export{l as c,d as m,p as o,c as u,n as v};
