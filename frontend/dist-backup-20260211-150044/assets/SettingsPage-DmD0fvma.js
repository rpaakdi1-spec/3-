import{c as z,a as U,r as i,j as e,B as v,b as N}from"./index-DWrA19-Q.js";import{C as x}from"./Card-BZBkuSEa.js";import{I as c}from"./Input-Bh6Z0vgL.js";import{a as A}from"./Sidebar-DEFpisEa.js";import{U as P}from"./user-C9_NANMn.js";import{B}from"./bell-Muzov4ul.js";import{S as E}from"./shield-pfDcfGCT.js";import{S as I}from"./settings-M2ZQNpfd.js";import"./package-CyltdJ0k.js";import"./calendar-D1aWU6wz.js";import"./message-square-CQX4xtvJ.js";import"./zap-BDAzIdEF.js";import"./dollar-sign-zNa6eeND.js";import"./activity-B0jPijYH.js";import"./truck-DYyomFIS.js";import"./thermometer-C21NQbKK.js";import"./chart-column-BBu1zpkI.js";import"./calculator-Cr8S2iSR.js";import"./clock-DDHN8A9u.js";import"./download-Bm7c4jyO.js";import"./wrench-IdkLiNsk.js";import"./brain-BT-kJAZk.js";import"./x-cTU3yyaH.js";import"./chevron-down-DjioDqHQ.js";/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],w=z("save",q),de=()=>{const{user:d}=U(),[u,k]=i.useState("profile"),[h,n]=i.useState(!1),[g,r]=i.useState(""),[o,b]=i.useState({username:"",email:"",full_name:""}),[t,j]=i.useState({current_password:"",new_password:"",confirm_password:""}),[a,p]=i.useState({email_notifications:!0,push_notifications:!0,order_updates:!0,dispatch_updates:!0,maintenance_alerts:!0}),[l,y]=i.useState({language:"ko",timezone:"Asia/Seoul",date_format:"YYYY-MM-DD",temperature_unit:"celsius"});i.useEffect(()=>{d&&b({username:d.username||"",email:d.email||"",full_name:d.full_name||""}),Y()},[d]);const Y=async()=>{try{console.log("Using default settings (API endpoint not implemented yet)")}catch(s){console.error("Failed to load settings:",s)}},S=async s=>{var f,m;s.preventDefault(),n(!0),r("");try{await N.put("/users/profile",o),r("프로필이 업데이트되었습니다."),setTimeout(()=>r(""),3e3)}catch(_){r(((m=(f=_.response)==null?void 0:f.data)==null?void 0:m.detail)||"프로필 업데이트에 실패했습니다.")}finally{n(!1)}},C=async s=>{var f,m;if(s.preventDefault(),t.new_password!==t.confirm_password){r("새 비밀번호가 일치하지 않습니다.");return}if(t.new_password.length<6){r("비밀번호는 최소 6자 이상이어야 합니다.");return}n(!0),r("");try{await N.put("/users/password",{current_password:t.current_password,new_password:t.new_password}),r("비밀번호가 변경되었습니다."),j({current_password:"",new_password:"",confirm_password:""}),setTimeout(()=>r(""),3e3)}catch(_){r(((m=(f=_.response)==null?void 0:f.data)==null?void 0:m.detail)||"비밀번호 변경에 실패했습니다.")}finally{n(!1)}},M=async()=>{n(!0),r("");try{await N.put("/users/settings/notifications",a),r("알림 설정이 저장되었습니다."),setTimeout(()=>r(""),3e3)}catch{r("알림 설정 저장에 실패했습니다.")}finally{n(!1)}},D=async()=>{n(!0),r("");try{await N.put("/users/settings/system",l),r("시스템 설정이 저장되었습니다."),setTimeout(()=>r(""),3e3)}catch{r("시스템 설정 저장에 실패했습니다.")}finally{n(!1)}},T=[{id:"profile",label:"프로필",icon:P},{id:"notifications",label:"알림 설정",icon:B},{id:"security",label:"보안",icon:E},{id:"system",label:"시스템",icon:I}];return e.jsxs("div",{className:"flex h-screen bg-gray-100",children:[e.jsx(A,{}),e.jsx("div",{className:"flex-1 overflow-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800",children:"설정"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"시스템 및 개인 설정을 관리합니다"})]}),g&&e.jsx("div",{className:`mb-4 p-4 rounded-lg ${g.includes("실패")||g.includes("일치하지")?"bg-red-50 text-red-700 border border-red-200":"bg-green-50 text-green-700 border border-green-200"}`,children:g}),e.jsxs("div",{className:"grid grid-cols-12 gap-6",children:[e.jsx("div",{className:"col-span-12 md:col-span-3",children:e.jsx(x,{className:"p-2",children:e.jsx("nav",{className:"space-y-1",children:T.map(s=>e.jsxs("button",{onClick:()=>k(s.id),className:`w-full flex items-center px-4 py-3 rounded-lg transition-colors ${u===s.id?"bg-blue-50 text-blue-700 font-medium":"text-gray-700 hover:bg-gray-50"}`,children:[e.jsx(s.icon,{size:20,className:"mr-3"}),s.label]},s.id))})})}),e.jsxs("div",{className:"col-span-12 md:col-span-9",children:[u==="profile"&&e.jsxs(x,{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"프로필 정보"}),e.jsxs("form",{onSubmit:S,className:"space-y-4",children:[e.jsx(c,{label:"사용자명",value:o.username,onChange:s=>b({...o,username:s.target.value}),disabled:!0}),e.jsx(c,{label:"이메일",type:"email",value:o.email,onChange:s=>b({...o,email:s.target.value})}),e.jsx(c,{label:"이름",value:o.full_name,onChange:s=>b({...o,full_name:s.target.value})}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(v,{type:"submit",loading:h,children:[e.jsx(w,{size:20,className:"mr-2"}),"저장"]})})]})]}),u==="notifications"&&e.jsxs(x,{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"알림 설정"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between py-3 border-b",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-800",children:"이메일 알림"}),e.jsx("p",{className:"text-sm text-gray-600",children:"이메일로 알림을 받습니다"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:a.email_notifications,onChange:s=>p({...a,email_notifications:s.target.checked}),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between py-3 border-b",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-800",children:"푸시 알림"}),e.jsx("p",{className:"text-sm text-gray-600",children:"브라우저 푸시 알림을 받습니다"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:a.push_notifications,onChange:s=>p({...a,push_notifications:s.target.checked}),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between py-3 border-b",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-800",children:"주문 업데이트"}),e.jsx("p",{className:"text-sm text-gray-600",children:"주문 상태 변경 시 알림"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:a.order_updates,onChange:s=>p({...a,order_updates:s.target.checked}),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between py-3 border-b",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-800",children:"배차 업데이트"}),e.jsx("p",{className:"text-sm text-gray-600",children:"배차 상태 변경 시 알림"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:a.dispatch_updates,onChange:s=>p({...a,dispatch_updates:s.target.checked}),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between py-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-800",children:"정비 알림"}),e.jsx("p",{className:"text-sm text-gray-600",children:"차량 정비 예정일 알림"})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:a.maintenance_alerts,onChange:s=>p({...a,maintenance_alerts:s.target.checked}),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),e.jsx("div",{className:"flex justify-end pt-4 border-t",children:e.jsxs(v,{onClick:M,loading:h,children:[e.jsx(w,{size:20,className:"mr-2"}),"저장"]})})]})]}),u==="security"&&e.jsxs(x,{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"비밀번호 변경"}),e.jsxs("form",{onSubmit:C,className:"space-y-4",children:[e.jsx(c,{label:"현재 비밀번호",type:"password",value:t.current_password,onChange:s=>j({...t,current_password:s.target.value}),required:!0}),e.jsx(c,{label:"새 비밀번호",type:"password",value:t.new_password,onChange:s=>j({...t,new_password:s.target.value}),required:!0}),e.jsx(c,{label:"새 비밀번호 확인",type:"password",value:t.confirm_password,onChange:s=>j({...t,confirm_password:s.target.value}),required:!0}),e.jsx("div",{className:"flex justify-end",children:e.jsxs(v,{type:"submit",loading:h,children:[e.jsx(w,{size:20,className:"mr-2"}),"변경"]})})]})]}),u==="system"&&e.jsxs(x,{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 mb-4",children:"시스템 설정"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"언어"}),e.jsxs("select",{value:l.language,onChange:s=>y({...l,language:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"ko",children:"한국어"}),e.jsx("option",{value:"en",children:"English"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"시간대"}),e.jsxs("select",{value:l.timezone,onChange:s=>y({...l,timezone:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"Asia/Seoul",children:"서울 (GMT+9)"}),e.jsx("option",{value:"UTC",children:"UTC (GMT+0)"}),e.jsx("option",{value:"America/New_York",children:"뉴욕 (GMT-5)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"날짜 형식"}),e.jsxs("select",{value:l.date_format,onChange:s=>y({...l,date_format:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"YYYY-MM-DD",children:"YYYY-MM-DD"}),e.jsx("option",{value:"DD/MM/YYYY",children:"DD/MM/YYYY"}),e.jsx("option",{value:"MM/DD/YYYY",children:"MM/DD/YYYY"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"온도 단위"}),e.jsxs("select",{value:l.temperature_unit,onChange:s=>y({...l,temperature_unit:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"celsius",children:"섭씨 (°C)"}),e.jsx("option",{value:"fahrenheit",children:"화씨 (°F)"})]})]}),e.jsx("div",{className:"flex justify-end pt-4 border-t",children:e.jsxs(v,{onClick:D,loading:h,children:[e.jsx(w,{size:20,className:"mr-2"}),"저장"]})})]})]})]})]})]})})]})};export{de as default};
