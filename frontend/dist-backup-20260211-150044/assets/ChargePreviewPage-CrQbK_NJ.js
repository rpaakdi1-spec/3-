import{r as m,j as e}from"./index-DWrA19-Q.js";import{p as _}from"./billing-enhanced-Dk52PFus.js";import{C as g}from"./calculator-Cr8S2iSR.js";import{M as h}from"./map-pin-BXKaUHvy.js";import{P as b}from"./package-CyltdJ0k.js";import{W as f}from"./weight-DpTbL4ZB.js";import{C as k}from"./calendar-D1aWU6wz.js";import{C as u}from"./clock-DDHN8A9u.js";import{C as p}from"./circle-alert-BFR813J2.js";import{T as N}from"./thermometer-C21NQbKK.js";import{D as C}from"./dollar-sign-zNa6eeND.js";import{T as y}from"./trending-up-B_M0jfMY.js";import{C as D}from"./circle-check-big-CgFKxf-k.js";const L=()=>{const[a,w]=m.useState({client_id:0,distance_km:0,total_pallets:0,total_weight_kg:0,is_weekend:!1,is_urgent:!1,requires_temperature_control:!1,dispatch_date:new Date().toISOString().split("T")[0]}),[s,d]=m.useState(null),[x,j]=m.useState(!1),[o,c]=m.useState(null),l=(t,i)=>{w(n=>({...n,[t]:i})),d(null)},v=async()=>{var t,i;if(a.client_id<=0){c("거래처를 선택해주세요.");return}if(a.distance_km<=0){c("거리를 입력해주세요.");return}j(!0),c(null);try{const n=await _(a);d(n)}catch(n){c(((i=(t=n.response)==null?void 0:t.data)==null?void 0:i.detail)||"요금 계산에 실패했습니다."),d(null)}finally{j(!1)}},r=t=>new Intl.NumberFormat("ko-KR",{style:"currency",currency:"KRW",maximumFractionDigits:0}).format(t);return e.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:e.jsxs("div",{className:"max-w-5xl mx-auto",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"실시간 요금 계산기"}),e.jsx("p",{className:"text-gray-600",children:"배차 정보를 입력하면 예상 요금을 즉시 확인할 수 있습니다"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(g,{className:"w-5 h-5 text-blue-500"}),"배차 정보 입력"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"거래처 ID *"}),e.jsx("input",{type:"number",value:a.client_id||"",onChange:t=>l("client_id",parseInt(t.target.value)||0),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"거래처 ID를 입력하세요"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1 flex items-center gap-2",children:[e.jsx(h,{className:"w-4 h-4"}),"운행 거리 (km) *"]}),e.jsx("input",{type:"number",step:"0.1",value:a.distance_km||"",onChange:t=>l("distance_km",parseFloat(t.target.value)||0),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"예: 45.5"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1 flex items-center gap-2",children:[e.jsx(b,{className:"w-4 h-4"}),"팔레트 수"]}),e.jsx("input",{type:"number",value:a.total_pallets||"",onChange:t=>l("total_pallets",parseInt(t.target.value)||0),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"예: 10"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1 flex items-center gap-2",children:[e.jsx(f,{className:"w-4 h-4"}),"총 중량 (kg)"]}),e.jsx("input",{type:"number",step:"0.1",value:a.total_weight_kg||"",onChange:t=>l("total_weight_kg",parseFloat(t.target.value)||0),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"예: 1500"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1 flex items-center gap-2",children:[e.jsx(k,{className:"w-4 h-4"}),"배차 날짜"]}),e.jsx("input",{type:"date",value:a.dispatch_date,onChange:t=>l("dispatch_date",t.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),e.jsxs("div",{className:"space-y-3 pt-2",children:[e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:a.is_weekend,onChange:t=>l("is_weekend",t.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsxs("span",{className:"text-sm text-gray-700 flex items-center gap-2",children:[e.jsx(u,{className:"w-4 h-4 text-orange-500"}),"주말 배차 (할증 적용)"]})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:a.is_urgent,onChange:t=>l("is_urgent",t.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsxs("span",{className:"text-sm text-gray-700 flex items-center gap-2",children:[e.jsx(p,{className:"w-4 h-4 text-red-500"}),"긴급 배송 (할증 적용)"]})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:a.requires_temperature_control,onChange:t=>l("requires_temperature_control",t.target.checked),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),e.jsxs("span",{className:"text-sm text-gray-700 flex items-center gap-2",children:[e.jsx(N,{className:"w-4 h-4 text-blue-500"}),"온도 관리 필요 (냉장/냉동)"]})]})]}),e.jsxs("button",{onClick:v,disabled:x,className:"w-full mt-6 px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:bg-gray-400 flex items-center justify-center gap-2 font-medium",children:[e.jsx(g,{className:`w-5 h-5 ${x?"animate-pulse":""}`}),x?"계산 중...":"요금 계산하기"]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(C,{className:"w-5 h-5 text-green-500"}),"예상 요금"]}),o&&e.jsxs("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg flex items-start gap-3",children:[e.jsx(p,{className:"w-5 h-5 text-red-500 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-red-800",children:"오류"}),e.jsx("p",{className:"text-sm text-red-700 mt-1",children:o})]})]}),!s&&!o&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(g,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"배차 정보를 입력하고"}),e.jsx("p",{className:"text-gray-500",children:"'요금 계산하기'를 클릭하세요"})]}),s&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-blue-600 rounded-lg p-6 text-white text-center",children:[e.jsx("p",{className:"text-sm font-medium mb-2",children:"총 예상 요금"}),e.jsx("p",{className:"text-4xl font-bold",children:r(s.total_amount)})]}),e.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"기본 요금"}),e.jsxs("div",{className:"space-y-2",children:[s.details.distance_charge>0&&e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsxs("span",{className:"text-gray-600 flex items-center gap-2",children:[e.jsx(h,{className:"w-4 h-4"}),"거리 요금 (",a.distance_km,"km)"]}),e.jsx("span",{className:"font-medium text-gray-900",children:r(s.details.distance_charge)})]}),s.details.pallet_charge>0&&e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsxs("span",{className:"text-gray-600 flex items-center gap-2",children:[e.jsx(b,{className:"w-4 h-4"}),"팔레트 요금 (",a.total_pallets,"개)"]}),e.jsx("span",{className:"font-medium text-gray-900",children:r(s.details.pallet_charge)})]}),s.details.weight_charge>0&&e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsxs("span",{className:"text-gray-600 flex items-center gap-2",children:[e.jsx(f,{className:"w-4 h-4"}),"중량 요금 (",a.total_weight_kg,"kg)"]}),e.jsx("span",{className:"font-medium text-gray-900",children:r(s.details.weight_charge)})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm pt-2 border-t border-gray-100",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"기본 요금 합계"}),e.jsx("span",{className:"font-semibold text-gray-900",children:r(s.base_amount)})]})]})]}),s.surcharge_amount>0&&e.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"할증 요금"}),e.jsxs("div",{className:"space-y-2",children:[s.details.weekend_surcharge>0&&e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsxs("span",{className:"text-gray-600 flex items-center gap-2",children:[e.jsx(u,{className:"w-4 h-4 text-orange-500"}),"주말 할증"]}),e.jsxs("span",{className:"font-medium text-orange-600",children:["+",r(s.details.weekend_surcharge)]})]}),s.details.urgent_surcharge>0&&e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsxs("span",{className:"text-gray-600 flex items-center gap-2",children:[e.jsx(p,{className:"w-4 h-4 text-red-500"}),"긴급 할증"]}),e.jsxs("span",{className:"font-medium text-red-600",children:["+",r(s.details.urgent_surcharge)]})]}),s.details.temperature_surcharge>0&&e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsxs("span",{className:"text-gray-600 flex items-center gap-2",children:[e.jsx(N,{className:"w-4 h-4 text-blue-500"}),"온도 관리 할증"]}),e.jsxs("span",{className:"font-medium text-blue-600",children:["+",r(s.details.temperature_surcharge)]})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm pt-2 border-t border-gray-100",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"할증 합계"}),e.jsxs("span",{className:"font-semibold text-orange-600",children:["+",r(s.surcharge_amount)]})]})]})]}),s.discount_amount>0&&e.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"할인"}),e.jsxs("div",{className:"space-y-2",children:[s.details.volume_discount>0&&e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsxs("span",{className:"text-gray-600 flex items-center gap-2",children:[e.jsx(y,{className:"w-4 h-4 text-green-500"}),"물량 할인"]}),e.jsxs("span",{className:"font-medium text-green-600",children:["-",r(s.details.volume_discount)]})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm pt-2 border-t border-gray-100",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"할인 합계"}),e.jsxs("span",{className:"font-semibold text-green-600",children:["-",r(s.discount_amount)]})]})]})]}),e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 flex items-start gap-3",children:[e.jsx(D,{className:"w-5 h-5 text-green-500 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-green-800",children:"계산 완료"}),e.jsx("p",{className:"text-sm text-green-700 mt-1",children:"위 금액은 예상 요금이며, 실제 청구 시 정책에 따라 변동될 수 있습니다."})]})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-6",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(h,{className:"w-5 h-5 text-blue-500"}),e.jsx("h3",{className:"font-medium text-blue-900",children:"거리 기반 요금"})]}),e.jsx("p",{className:"text-sm text-blue-700",children:"운행 거리에 따라 km당 요금이 적용됩니다. 거래처별로 다른 요율이 설정될 수 있습니다."})]}),e.jsxs("div",{className:"bg-orange-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(u,{className:"w-5 h-5 text-orange-500"}),e.jsx("h3",{className:"font-medium text-orange-900",children:"할증 요금"})]}),e.jsx("p",{className:"text-sm text-orange-700",children:"주말, 긴급 배송, 온도 관리 등 특수 조건에 따라 추가 할증이 적용됩니다."})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx(y,{className:"w-5 h-5 text-green-500"}),e.jsx("h3",{className:"font-medium text-green-900",children:"물량 할인"})]}),e.jsx("p",{className:"text-sm text-green-700",children:"월간 배차 건수가 일정 기준을 초과하면 자동으로 물량 할인이 적용됩니다."})]})]})]})})};export{L as default};
