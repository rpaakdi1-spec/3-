import{j as l,r as v,e as te,g as je,o as ta,p as na,R as k}from"./index-DWrA19-Q.js";import{i as gt,a as Yo,b as oa,d as Go}from"./string-BbYD24iH.js";import{u as ra,d as sa,T as ia,c as he,g as ae,a as le,b as xe,_ as oe,e as _o,f as D,B as $n,s as ee,h as Y,i as ce,j as fe,k as aa,l as io,o as Kn,m as Gr,P as Pt,F as la,n as ca,M as ua,p as da,q as W,r as fa,t as pa,L as Tn,v as ha,w as ga,x as qo,y as ma,z as ya,A as xa,C as Ko,D as va,G as ba,E as wa,H as Ca,I as _a,J as K,K as pe,N as Dt,O as tn,Q as nn,S as on,R as Re,U as Lt,V as So,W as Ln,X as ie,Y as Mt,Z as Rt,$ as qr,a0 as Sa,a1 as Zn,a2 as Ea,a3 as Zo,a4 as $a}from"./Science-Bhm585YI.js";import"./setPrototypeOf-NYsvoNVB.js";var Jo=180/Math.PI,ao={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Kr(e,t,n,o,r,s){var i,a,c;return(i=Math.sqrt(e*e+t*t))&&(e/=i,t/=i),(c=e*n+t*o)&&(n-=e*c,o-=t*c),(a=Math.sqrt(n*n+o*o))&&(n/=a,o/=a,c/=a),e*o<t*n&&(e=-e,t=-t,c=-c,i=-i),{translateX:r,translateY:s,rotate:Math.atan2(t,e)*Jo,skewX:Math.atan(c)*Jo,scaleX:i,scaleY:a}}var pn;function Ta(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?ao:Kr(t.a,t.b,t.c,t.d,t.e,t.f)}function Na(e){return e==null||(pn||(pn=document.createElementNS("http://www.w3.org/2000/svg","g")),pn.setAttribute("transform",e),!(e=pn.transform.baseVal.consolidate()))?ao:(e=e.matrix,Kr(e.a,e.b,e.c,e.d,e.e,e.f))}function Zr(e,t,n,o){function r(u){return u.length?u.pop()+" ":""}function s(u,d,f,p,h,x){if(u!==f||d!==p){var g=h.push("translate(",null,t,null,n);x.push({i:g-4,x:gt(u,f)},{i:g-2,x:gt(d,p)})}else(f||p)&&h.push("translate("+f+t+p+n)}function i(u,d,f,p){u!==d?(u-d>180?d+=360:d-u>180&&(u+=360),p.push({i:f.push(r(f)+"rotate(",null,o)-2,x:gt(u,d)})):d&&f.push(r(f)+"rotate("+d+o)}function a(u,d,f,p){u!==d?p.push({i:f.push(r(f)+"skewX(",null,o)-2,x:gt(u,d)}):d&&f.push(r(f)+"skewX("+d+o)}function c(u,d,f,p,h,x){if(u!==f||d!==p){var g=h.push(r(h)+"scale(",null,",",null,")");x.push({i:g-4,x:gt(u,f)},{i:g-2,x:gt(d,p)})}else(f!==1||p!==1)&&h.push(r(h)+"scale("+f+","+p+")")}return function(u,d){var f=[],p=[];return u=e(u),d=e(d),s(u.translateX,u.translateY,d.translateX,d.translateY,f,p),i(u.rotate,d.rotate,f,p),a(u.skewX,d.skewX,f,p),c(u.scaleX,u.scaleY,d.scaleX,d.scaleY,f,p),u=d=null,function(h){for(var x=-1,g=p.length,b;++x<g;)f[(b=p[x]).i]=b.x(h);return f.join("")}}}var ja=Zr(Ta,"px, ","px)","deg)"),ka=Zr(Na,", ",")",")"),Ma=1e-12;function Qo(e){return((e=Math.exp(e))+1/e)/2}function Ra(e){return((e=Math.exp(e))-1/e)/2}function Ia(e){return((e=Math.exp(2*e))-1)/(e+1)}const Aa=function e(t,n,o){function r(s,i){var a=s[0],c=s[1],u=s[2],d=i[0],f=i[1],p=i[2],h=d-a,x=f-c,g=h*h+x*x,b,m;if(g<Ma)m=Math.log(p/u)/t,b=function(j){return[a+j*h,c+j*x,u*Math.exp(t*j*m)]};else{var w=Math.sqrt(g),E=(p*p-u*u+o*g)/(2*u*n*w),C=(p*p-u*u-o*g)/(2*p*n*w),N=Math.log(Math.sqrt(E*E+1)-E),I=Math.log(Math.sqrt(C*C+1)-C);m=(I-N)/t,b=function(j){var M=j*m,T=Qo(N),A=u/(n*w)*(T*Ia(t*M+N)-Ra(N));return[a+A*h,c+A*x,u*T/Qo(t*M+N)]}}return b.duration=m*1e3*t/Math.SQRT2,b}return r.rho=function(s){var i=Math.max(.001,+s),a=i*i,c=a*a;return e(i,a,c)},r}(Math.SQRT2,2,4);function bt({props:e,name:t}){return ra({props:e,name:t,defaultTheme:sa,themeId:ia})}const za=he(l.jsx("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");function Pa(e){return le("MuiChip",e)}const ne=ae("MuiChip",["root","sizeSmall","sizeMedium","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","filledPrimary","filledSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","deleteIconFilledColorPrimary","deleteIconFilledColorSecondary","focusVisible"]),Da=["avatar","className","clickable","color","component","deleteIcon","disabled","icon","label","onClick","onDelete","onKeyDown","onKeyUp","size","variant","tabIndex","skipFocusWhenDisabled"],La=e=>{const{classes:t,disabled:n,size:o,color:r,iconColor:s,onDelete:i,clickable:a,variant:c}=e,u={root:["root",c,n&&"disabled",`size${Y(o)}`,`color${Y(r)}`,a&&"clickable",a&&`clickableColor${Y(r)}`,i&&"deletable",i&&`deletableColor${Y(r)}`,`${c}${Y(r)}`],label:["label",`label${Y(o)}`],avatar:["avatar",`avatar${Y(o)}`,`avatarColor${Y(r)}`],icon:["icon",`icon${Y(o)}`,`iconColor${Y(s)}`],deleteIcon:["deleteIcon",`deleteIcon${Y(o)}`,`deleteIconColor${Y(r)}`,`deleteIcon${Y(c)}Color${Y(r)}`]};return ce(u,Pa,t)},Oa=ee("div",{name:"MuiChip",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e,{color:o,iconColor:r,clickable:s,onDelete:i,size:a,variant:c}=n;return[{[`& .${ne.avatar}`]:t.avatar},{[`& .${ne.avatar}`]:t[`avatar${Y(a)}`]},{[`& .${ne.avatar}`]:t[`avatarColor${Y(o)}`]},{[`& .${ne.icon}`]:t.icon},{[`& .${ne.icon}`]:t[`icon${Y(a)}`]},{[`& .${ne.icon}`]:t[`iconColor${Y(r)}`]},{[`& .${ne.deleteIcon}`]:t.deleteIcon},{[`& .${ne.deleteIcon}`]:t[`deleteIcon${Y(a)}`]},{[`& .${ne.deleteIcon}`]:t[`deleteIconColor${Y(o)}`]},{[`& .${ne.deleteIcon}`]:t[`deleteIcon${Y(c)}Color${Y(o)}`]},t.root,t[`size${Y(a)}`],t[`color${Y(o)}`],s&&t.clickable,s&&o!=="default"&&t[`clickableColor${Y(o)})`],i&&t.deletable,i&&o!=="default"&&t[`deletableColor${Y(o)}`],t[c],t[`${c}${Y(o)}`]]}})(({theme:e,ownerState:t})=>{const n=e.palette.mode==="light"?e.palette.grey[700]:e.palette.grey[300];return D({maxWidth:"100%",fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:(e.vars||e).palette.text.primary,backgroundColor:(e.vars||e).palette.action.selected,borderRadius:32/2,whiteSpace:"nowrap",transition:e.transitions.create(["background-color","box-shadow"]),cursor:"unset",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box",[`&.${ne.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity,pointerEvents:"none"},[`& .${ne.avatar}`]:{marginLeft:5,marginRight:-6,width:24,height:24,color:e.vars?e.vars.palette.Chip.defaultAvatarColor:n,fontSize:e.typography.pxToRem(12)},[`& .${ne.avatarColorPrimary}`]:{color:(e.vars||e).palette.primary.contrastText,backgroundColor:(e.vars||e).palette.primary.dark},[`& .${ne.avatarColorSecondary}`]:{color:(e.vars||e).palette.secondary.contrastText,backgroundColor:(e.vars||e).palette.secondary.dark},[`& .${ne.avatarSmall}`]:{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:e.typography.pxToRem(10)},[`& .${ne.icon}`]:D({marginLeft:5,marginRight:-6},t.size==="small"&&{fontSize:18,marginLeft:4,marginRight:-4},t.iconColor===t.color&&D({color:e.vars?e.vars.palette.Chip.defaultIconColor:n},t.color!=="default"&&{color:"inherit"})),[`& .${ne.deleteIcon}`]:D({WebkitTapHighlightColor:"transparent",color:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / 0.26)`:fe(e.palette.text.primary,.26),fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / 0.4)`:fe(e.palette.text.primary,.4)}},t.size==="small"&&{fontSize:16,marginRight:4,marginLeft:-4},t.color!=="default"&&{color:e.vars?`rgba(${e.vars.palette[t.color].contrastTextChannel} / 0.7)`:fe(e.palette[t.color].contrastText,.7),"&:hover, &:active":{color:(e.vars||e).palette[t.color].contrastText}})},t.size==="small"&&{height:24},t.color!=="default"&&{backgroundColor:(e.vars||e).palette[t.color].main,color:(e.vars||e).palette[t.color].contrastText},t.onDelete&&{[`&.${ne.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:fe(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},t.onDelete&&t.color!=="default"&&{[`&.${ne.focusVisible}`]:{backgroundColor:(e.vars||e).palette[t.color].dark}})},({theme:e,ownerState:t})=>D({},t.clickable&&{userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:fe(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity)},[`&.${ne.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:fe(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)},"&:active":{boxShadow:(e.vars||e).shadows[1]}},t.clickable&&t.color!=="default"&&{[`&:hover, &.${ne.focusVisible}`]:{backgroundColor:(e.vars||e).palette[t.color].dark}}),({theme:e,ownerState:t})=>D({},t.variant==="outlined"&&{backgroundColor:"transparent",border:e.vars?`1px solid ${e.vars.palette.Chip.defaultBorder}`:`1px solid ${e.palette.mode==="light"?e.palette.grey[400]:e.palette.grey[700]}`,[`&.${ne.clickable}:hover`]:{backgroundColor:(e.vars||e).palette.action.hover},[`&.${ne.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`& .${ne.avatar}`]:{marginLeft:4},[`& .${ne.avatarSmall}`]:{marginLeft:2},[`& .${ne.icon}`]:{marginLeft:4},[`& .${ne.iconSmall}`]:{marginLeft:2},[`& .${ne.deleteIcon}`]:{marginRight:5},[`& .${ne.deleteIconSmall}`]:{marginRight:3}},t.variant==="outlined"&&t.color!=="default"&&{color:(e.vars||e).palette[t.color].main,border:`1px solid ${e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / 0.7)`:fe(e.palette[t.color].main,.7)}`,[`&.${ne.clickable}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:fe(e.palette[t.color].main,e.palette.action.hoverOpacity)},[`&.${ne.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.focusOpacity})`:fe(e.palette[t.color].main,e.palette.action.focusOpacity)},[`& .${ne.deleteIcon}`]:{color:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / 0.7)`:fe(e.palette[t.color].main,.7),"&:hover, &:active":{color:(e.vars||e).palette[t.color].main}}})),Ha=ee("span",{name:"MuiChip",slot:"Label",overridesResolver:(e,t)=>{const{ownerState:n}=e,{size:o}=n;return[t.label,t[`label${Y(o)}`]]}})(({ownerState:e})=>D({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap"},e.variant==="outlined"&&{paddingLeft:11,paddingRight:11},e.size==="small"&&{paddingLeft:8,paddingRight:8},e.size==="small"&&e.variant==="outlined"&&{paddingLeft:7,paddingRight:7}));function er(e){return e.key==="Backspace"||e.key==="Delete"}const _e=v.forwardRef(function(t,n){const o=xe({props:t,name:"MuiChip"}),{avatar:r,className:s,clickable:i,color:a="default",component:c,deleteIcon:u,disabled:d=!1,icon:f,label:p,onClick:h,onDelete:x,onKeyDown:g,onKeyUp:b,size:m="medium",variant:w="filled",tabIndex:E,skipFocusWhenDisabled:C=!1}=o,N=oe(o,Da),I=v.useRef(null),j=_o(I,n),M=_=>{_.stopPropagation(),x&&x(_)},T=_=>{_.currentTarget===_.target&&er(_)&&_.preventDefault(),g&&g(_)},A=_=>{_.currentTarget===_.target&&(x&&er(_)?x(_):_.key==="Escape"&&I.current&&I.current.blur()),b&&b(_)},P=i!==!1&&h?!0:i,F=P||x?$n:c||"div",O=D({},o,{component:F,disabled:d,size:m,color:a,iconColor:v.isValidElement(f)&&f.props.color||a,onDelete:!!x,clickable:P,variant:w}),y=La(O),$=F===$n?D({component:c||"div",focusVisibleClassName:y.focusVisible},x&&{disableRipple:!0}):{};let S=null;x&&(S=u&&v.isValidElement(u)?v.cloneElement(u,{className:te(u.props.className,y.deleteIcon),onClick:M}):l.jsx(za,{className:te(y.deleteIcon),onClick:M}));let R=null;r&&v.isValidElement(r)&&(R=v.cloneElement(r,{className:te(y.avatar,r.props.className)}));let L=null;return f&&v.isValidElement(f)&&(L=v.cloneElement(f,{className:te(y.icon,f.props.className)})),l.jsxs(Oa,D({as:F,className:te(y.root,s),disabled:P&&d?!0:void 0,onClick:h,onKeyDown:T,onKeyUp:A,ref:j,tabIndex:C&&d?-1:E,ownerState:O},$,N,{children:[R||L,l.jsx(Ha,{className:te(y.label),ownerState:O,children:p}),S]}))});function Ba(e){return le("MuiCardActions",e)}ae("MuiCardActions",["root","spacing"]);const Va=["disableSpacing","className"],Fa=e=>{const{classes:t,disableSpacing:n}=e;return ce({root:["root",!n&&"spacing"]},Ba,t)},Wa=ee("div",{name:"MuiCardActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableSpacing&&t.spacing]}})(({ownerState:e})=>D({display:"flex",alignItems:"center",padding:8},!e.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})),Ua=v.forwardRef(function(t,n){const o=xe({props:t,name:"MuiCardActions"}),{disableSpacing:r=!1,className:s}=o,i=oe(o,Va),a=D({},o,{disableSpacing:r}),c=Fa(a);return l.jsx(Wa,D({className:te(c.root,s),ownerState:a,ref:n},i))});function tr(e){return e.substring(2).toLowerCase()}function Xa(e,t){return t.documentElement.clientWidth<e.clientX||t.documentElement.clientHeight<e.clientY}function Ya(e){const{children:t,disableReactTree:n=!1,mouseEvent:o="onClick",onClickAway:r,touchEvent:s="onTouchEnd"}=e,i=v.useRef(!1),a=v.useRef(null),c=v.useRef(!1),u=v.useRef(!1);v.useEffect(()=>(setTimeout(()=>{c.current=!0},0),()=>{c.current=!1}),[]);const d=_o(aa(t),a),f=io(x=>{const g=u.current;u.current=!1;const b=Kn(a.current);if(!c.current||!a.current||"clientX"in x&&Xa(x,b))return;if(i.current){i.current=!1;return}let m;x.composedPath?m=x.composedPath().indexOf(a.current)>-1:m=!b.documentElement.contains(x.target)||a.current.contains(x.target),!m&&(n||!g)&&r(x)}),p=x=>g=>{u.current=!0;const b=t.props[x];b&&b(g)},h={ref:d};return s!==!1&&(h[s]=p(s)),v.useEffect(()=>{if(s!==!1){const x=tr(s),g=Kn(a.current),b=()=>{i.current=!0};return g.addEventListener(x,f),g.addEventListener("touchmove",b),()=>{g.removeEventListener(x,f),g.removeEventListener("touchmove",b)}}},[f,s]),o!==!1&&(h[o]=p(o)),v.useEffect(()=>{if(o!==!1){const x=tr(o),g=Kn(a.current);return g.addEventListener(x,f),()=>{g.removeEventListener(x,f)}}},[f,o]),l.jsx(v.Fragment,{children:v.cloneElement(t,h)})}function Ga(e){return le("MuiDialog",e)}const Jn=ae("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]),Jr=v.createContext({}),qa=["aria-describedby","aria-labelledby","BackdropComponent","BackdropProps","children","className","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClick","onClose","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps"],Ka=ee(da,{name:"MuiDialog",slot:"Backdrop",overrides:(e,t)=>t.backdrop})({zIndex:-1}),Za=e=>{const{classes:t,scroll:n,maxWidth:o,fullWidth:r,fullScreen:s}=e,i={root:["root"],container:["container",`scroll${Y(n)}`],paper:["paper",`paperScroll${Y(n)}`,`paperWidth${Y(String(o))}`,r&&"paperFullWidth",s&&"paperFullScreen"]};return ce(i,Ga,t)},Ja=ee(ua,{name:"MuiDialog",slot:"Root",overridesResolver:(e,t)=>t.root})({"@media print":{position:"absolute !important"}}),Qa=ee("div",{name:"MuiDialog",slot:"Container",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.container,t[`scroll${Y(n.scroll)}`]]}})(({ownerState:e})=>D({height:"100%","@media print":{height:"auto"},outline:0},e.scroll==="paper"&&{display:"flex",justifyContent:"center",alignItems:"center"},e.scroll==="body"&&{overflowY:"auto",overflowX:"hidden",textAlign:"center","&::after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}})),el=ee(Pt,{name:"MuiDialog",slot:"Paper",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.paper,t[`scrollPaper${Y(n.scroll)}`],t[`paperWidth${Y(String(n.maxWidth))}`],n.fullWidth&&t.paperFullWidth,n.fullScreen&&t.paperFullScreen]}})(({theme:e,ownerState:t})=>D({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},t.scroll==="paper"&&{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},t.scroll==="body"&&{display:"inline-block",verticalAlign:"middle",textAlign:"left"},!t.maxWidth&&{maxWidth:"calc(100% - 64px)"},t.maxWidth==="xs"&&{maxWidth:e.breakpoints.unit==="px"?Math.max(e.breakpoints.values.xs,444):`max(${e.breakpoints.values.xs}${e.breakpoints.unit}, 444px)`,[`&.${Jn.paperScrollBody}`]:{[e.breakpoints.down(Math.max(e.breakpoints.values.xs,444)+32*2)]:{maxWidth:"calc(100% - 64px)"}}},t.maxWidth&&t.maxWidth!=="xs"&&{maxWidth:`${e.breakpoints.values[t.maxWidth]}${e.breakpoints.unit}`,[`&.${Jn.paperScrollBody}`]:{[e.breakpoints.down(e.breakpoints.values[t.maxWidth]+32*2)]:{maxWidth:"calc(100% - 64px)"}}},t.fullWidth&&{width:"calc(100% - 64px)"},t.fullScreen&&{margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0,[`&.${Jn.paperScrollBody}`]:{margin:0,maxWidth:"100%"}})),ot=v.forwardRef(function(t,n){const o=xe({props:t,name:"MuiDialog"}),r=Gr(),s={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{"aria-describedby":i,"aria-labelledby":a,BackdropComponent:c,BackdropProps:u,children:d,className:f,disableEscapeKeyDown:p=!1,fullScreen:h=!1,fullWidth:x=!1,maxWidth:g="sm",onBackdropClick:b,onClick:m,onClose:w,open:E,PaperComponent:C=Pt,PaperProps:N={},scroll:I="paper",TransitionComponent:j=la,transitionDuration:M=s,TransitionProps:T}=o,A=oe(o,qa),P=D({},o,{disableEscapeKeyDown:p,fullScreen:h,fullWidth:x,maxWidth:g,scroll:I}),F=Za(P),O=v.useRef(),y=L=>{O.current=L.target===L.currentTarget},$=L=>{m&&m(L),O.current&&(O.current=null,b&&b(L),w&&w(L,"backdropClick"))},S=ca(a),R=v.useMemo(()=>({titleId:S}),[S]);return l.jsx(Ja,D({className:te(F.root,f),closeAfterTransition:!0,components:{Backdrop:Ka},componentsProps:{backdrop:D({transitionDuration:M,as:c},u)},disableEscapeKeyDown:p,onClose:w,open:E,ref:n,onClick:$,ownerState:P},A,{children:l.jsx(j,D({appear:!0,in:E,timeout:M,role:"presentation"},T,{children:l.jsx(Qa,{className:te(F.container),onMouseDown:y,ownerState:P,children:l.jsx(el,D({as:C,elevation:24,role:"dialog","aria-describedby":i,"aria-labelledby":S},N,{className:te(F.paper,N.className),ownerState:P,children:l.jsx(Jr.Provider,{value:R,children:d})}))})}))}))});function tl(e){return le("MuiDialogActions",e)}ae("MuiDialogActions",["root","spacing"]);const nl=["className","disableSpacing"],ol=e=>{const{classes:t,disableSpacing:n}=e;return ce({root:["root",!n&&"spacing"]},tl,t)},rl=ee("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,!n.disableSpacing&&t.spacing]}})(({ownerState:e})=>D({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},!e.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})),rt=v.forwardRef(function(t,n){const o=xe({props:t,name:"MuiDialogActions"}),{className:r,disableSpacing:s=!1}=o,i=oe(o,nl),a=D({},o,{disableSpacing:s}),c=ol(a);return l.jsx(rl,D({className:te(c.root,r),ownerState:a,ref:n},i))});function sl(e){return le("MuiDialogContent",e)}ae("MuiDialogContent",["root","dividers"]);function il(e){return le("MuiDialogTitle",e)}const al=ae("MuiDialogTitle",["root"]),ll=["className","dividers"],cl=e=>{const{classes:t,dividers:n}=e;return ce({root:["root",n&&"dividers"]},sl,t)},ul=ee("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.dividers&&t.dividers]}})(({theme:e,ownerState:t})=>D({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px"},t.dividers?{padding:"16px 24px",borderTop:`1px solid ${(e.vars||e).palette.divider}`,borderBottom:`1px solid ${(e.vars||e).palette.divider}`}:{[`.${al.root} + &`]:{paddingTop:0}})),st=v.forwardRef(function(t,n){const o=xe({props:t,name:"MuiDialogContent"}),{className:r,dividers:s=!1}=o,i=oe(o,ll),a=D({},o,{dividers:s}),c=cl(a);return l.jsx(ul,D({className:te(c.root,r),ownerState:a,ref:n},i))}),dl=["className","id"],fl=e=>{const{classes:t}=e;return ce({root:["root"]},il,t)},pl=ee(W,{name:"MuiDialogTitle",slot:"Root",overridesResolver:(e,t)=>t.root})({padding:"16px 24px",flex:"0 0 auto"}),it=v.forwardRef(function(t,n){const o=xe({props:t,name:"MuiDialogTitle"}),{className:r,id:s}=o,i=oe(o,dl),a=o,c=fl(a),{titleId:u=s}=v.useContext(Jr);return l.jsx(pl,D({component:"h2",className:te(c.root,r),ownerState:a,ref:n,variant:"h6",id:s??u},i))});function hl(e){return le("MuiInputAdornment",e)}const nr=ae("MuiInputAdornment",["root","filled","standard","outlined","positionStart","positionEnd","disablePointerEvents","hiddenLabel","sizeSmall"]);var or;const gl=["children","className","component","disablePointerEvents","disableTypography","position","variant"],ml=(e,t)=>{const{ownerState:n}=e;return[t.root,t[`position${Y(n.position)}`],n.disablePointerEvents===!0&&t.disablePointerEvents,t[n.variant]]},yl=e=>{const{classes:t,disablePointerEvents:n,hiddenLabel:o,position:r,size:s,variant:i}=e,a={root:["root",n&&"disablePointerEvents",r&&`position${Y(r)}`,i,o&&"hiddenLabel",s&&`size${Y(s)}`]};return ce(a,hl,t)},xl=ee("div",{name:"MuiInputAdornment",slot:"Root",overridesResolver:ml})(({theme:e,ownerState:t})=>D({display:"flex",height:"0.01em",maxHeight:"2em",alignItems:"center",whiteSpace:"nowrap",color:(e.vars||e).palette.action.active},t.variant==="filled"&&{[`&.${nr.positionStart}&:not(.${nr.hiddenLabel})`]:{marginTop:16}},t.position==="start"&&{marginRight:8},t.position==="end"&&{marginLeft:8},t.disablePointerEvents===!0&&{pointerEvents:"none"})),vl=v.forwardRef(function(t,n){const o=xe({props:t,name:"MuiInputAdornment"}),{children:r,className:s,component:i="div",disablePointerEvents:a=!1,disableTypography:c=!1,position:u,variant:d}=o,f=oe(o,gl),p=fa()||{};let h=d;d&&p.variant,p&&!h&&(h=p.variant);const x=D({},o,{hiddenLabel:p.hiddenLabel,size:p.size,disablePointerEvents:a,position:u,variant:h}),g=yl(x);return l.jsx(pa.Provider,{value:null,children:l.jsx(xl,D({as:i,ownerState:x,className:te(g.root,s),ref:n},f,{children:typeof r=="string"&&!c?l.jsx(W,{color:"text.secondary",children:r}):l.jsxs(v.Fragment,{children:[u==="start"?or||(or=l.jsx("span",{className:"notranslate",children:"​"})):null,r]})}))})});function bl(e){return le("MuiListItemIcon",e)}const rr=ae("MuiListItemIcon",["root","alignItemsFlexStart"]),wl=["className"],Cl=e=>{const{alignItems:t,classes:n}=e;return ce({root:["root",t==="flex-start"&&"alignItemsFlexStart"]},bl,n)},_l=ee("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.alignItems==="flex-start"&&t.alignItemsFlexStart]}})(({theme:e,ownerState:t})=>D({minWidth:56,color:(e.vars||e).palette.action.active,flexShrink:0,display:"inline-flex"},t.alignItems==="flex-start"&&{marginTop:8})),hn=v.forwardRef(function(t,n){const o=xe({props:t,name:"MuiListItemIcon"}),{className:r}=o,s=oe(o,wl),i=v.useContext(Tn),a=D({},o,{alignItems:i.alignItems}),c=Cl(a);return l.jsx(_l,D({className:te(c.root,r),ownerState:a,ref:n},s))});function Sl(e){return le("MuiListItemText",e)}const Nn=ae("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]),El=["children","className","disableTypography","inset","primary","primaryTypographyProps","secondary","secondaryTypographyProps"],$l=e=>{const{classes:t,inset:n,primary:o,secondary:r,dense:s}=e;return ce({root:["root",n&&"inset",s&&"dense",o&&r&&"multiline"],primary:["primary"],secondary:["secondary"]},Sl,t)},Tl=ee("div",{name:"MuiListItemText",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[{[`& .${Nn.primary}`]:t.primary},{[`& .${Nn.secondary}`]:t.secondary},t.root,n.inset&&t.inset,n.primary&&n.secondary&&t.multiline,n.dense&&t.dense]}})(({ownerState:e})=>D({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4},e.primary&&e.secondary&&{marginTop:6,marginBottom:6},e.inset&&{paddingLeft:56})),gn=v.forwardRef(function(t,n){const o=xe({props:t,name:"MuiListItemText"}),{children:r,className:s,disableTypography:i=!1,inset:a=!1,primary:c,primaryTypographyProps:u,secondary:d,secondaryTypographyProps:f}=o,p=oe(o,El),{dense:h}=v.useContext(Tn);let x=c??r,g=d;const b=D({},o,{disableTypography:i,inset:a,primary:!!x,secondary:!!g,dense:h}),m=$l(b);return x!=null&&x.type!==W&&!i&&(x=l.jsx(W,D({variant:h?"body2":"body1",className:m.primary,component:u!=null&&u.variant?void 0:"span",display:"block"},u,{children:x}))),g!=null&&g.type!==W&&!i&&(g=l.jsx(W,D({variant:"body2",className:m.secondary,color:"text.secondary",display:"block"},f,{children:g}))),l.jsxs(Tl,D({className:te(m.root,s),ownerState:b,ref:n},p,{children:[x,g]}))});function Nl(e){return le("MuiMenuItem",e)}const Xt=ae("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),jl=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex","className"],kl=(e,t)=>{const{ownerState:n}=e;return[t.root,n.dense&&t.dense,n.divider&&t.divider,!n.disableGutters&&t.gutters]},Ml=e=>{const{disabled:t,dense:n,divider:o,disableGutters:r,selected:s,classes:i}=e,c=ce({root:["root",n&&"dense",t&&"disabled",!r&&"gutters",o&&"divider",s&&"selected"]},Nl,i);return D({},i,c)},Rl=ee($n,{shouldForwardProp:e=>ga(e)||e==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:kl})(({theme:e,ownerState:t})=>D({},e.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!t.disableGutters&&{paddingLeft:16,paddingRight:16},t.divider&&{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Xt.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:fe(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${Xt.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:fe(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${Xt.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:fe(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:fe(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${Xt.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${Xt.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`& + .${qo.root}`]:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},[`& + .${qo.inset}`]:{marginLeft:52},[`& .${Nn.root}`]:{marginTop:0,marginBottom:0},[`& .${Nn.inset}`]:{paddingLeft:36},[`& .${rr.root}`]:{minWidth:36}},!t.dense&&{[e.breakpoints.up("sm")]:{minHeight:"auto"}},t.dense&&D({minHeight:32,paddingTop:4,paddingBottom:4},e.typography.body2,{[`& .${rr.root} svg`]:{fontSize:"1.25rem"}}))),se=v.forwardRef(function(t,n){const o=xe({props:t,name:"MuiMenuItem"}),{autoFocus:r=!1,component:s="li",dense:i=!1,divider:a=!1,disableGutters:c=!1,focusVisibleClassName:u,role:d="menuitem",tabIndex:f,className:p}=o,h=oe(o,jl),x=v.useContext(Tn),g=v.useMemo(()=>({dense:i||x.dense||!1,disableGutters:c}),[x.dense,i,c]),b=v.useRef(null);ha(()=>{r&&b.current&&b.current.focus()},[r]);const m=D({},o,{dense:g.dense,divider:a,disableGutters:c}),w=Ml(o),E=_o(b,n);let C;return o.disabled||(C=f!==void 0?f:-1),l.jsx(Tn.Provider,{value:g,children:l.jsx(Rl,D({ref:E,role:d,tabIndex:C,component:s,focusVisibleClassName:te(w.focusVisible,u),className:te(w.root,p)},h,{ownerState:m,classes:w}))})});function Il(e){return le("MuiPagination",e)}ae("MuiPagination",["root","ul","outlined","text"]);const Al=["boundaryCount","componentName","count","defaultPage","disabled","hideNextButton","hidePrevButton","onChange","page","showFirstButton","showLastButton","siblingCount"];function zl(e={}){const{boundaryCount:t=1,componentName:n="usePagination",count:o=1,defaultPage:r=1,disabled:s=!1,hideNextButton:i=!1,hidePrevButton:a=!1,onChange:c,page:u,showFirstButton:d=!1,showLastButton:f=!1,siblingCount:p=1}=e,h=oe(e,Al),[x,g]=ma({controlled:u,default:r,name:n,state:"page"}),b=(T,A)=>{u||g(A),c&&c(T,A)},m=(T,A)=>{const P=A-T+1;return Array.from({length:P},(F,O)=>T+O)},w=m(1,Math.min(t,o)),E=m(Math.max(o-t+1,t+1),o),C=Math.max(Math.min(x-p,o-t-p*2-1),t+2),N=Math.min(Math.max(x+p,t+p*2+2),E.length>0?E[0]-2:o-1),I=[...d?["first"]:[],...a?[]:["previous"],...w,...C>t+2?["start-ellipsis"]:t+1<o-t?[t+1]:[],...m(C,N),...N<o-t-1?["end-ellipsis"]:o-t>t?[o-t]:[],...E,...i?[]:["next"],...f?["last"]:[]],j=T=>{switch(T){case"first":return 1;case"previous":return x-1;case"next":return x+1;case"last":return o;default:return null}},M=I.map(T=>typeof T=="number"?{onClick:A=>{b(A,T)},type:"page",page:T,selected:T===x,disabled:s,"aria-current":T===x?"true":void 0}:{onClick:A=>{b(A,j(T))},type:T,page:j(T),selected:!1,disabled:s||T.indexOf("ellipsis")===-1&&(T==="next"||T==="last"?x>=o:x<=1)});return D({items:M},h)}function Pl(e){return le("MuiPaginationItem",e)}const Me=ae("MuiPaginationItem",["root","page","sizeSmall","sizeLarge","text","textPrimary","textSecondary","outlined","outlinedPrimary","outlinedSecondary","rounded","ellipsis","firstLast","previousNext","focusVisible","disabled","selected","icon","colorPrimary","colorSecondary"]),sr=he(l.jsx("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),"FirstPage"),ir=he(l.jsx("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),"LastPage"),ar=he(l.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"NavigateBefore"),lr=he(l.jsx("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext"),Dl=["className","color","component","components","disabled","page","selected","shape","size","slots","type","variant"],Qr=(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`size${Y(n.size)}`],n.variant==="text"&&t[`text${Y(n.color)}`],n.variant==="outlined"&&t[`outlined${Y(n.color)}`],n.shape==="rounded"&&t.rounded,n.type==="page"&&t.page,(n.type==="start-ellipsis"||n.type==="end-ellipsis")&&t.ellipsis,(n.type==="previous"||n.type==="next")&&t.previousNext,(n.type==="first"||n.type==="last")&&t.firstLast]},Ll=e=>{const{classes:t,color:n,disabled:o,selected:r,size:s,shape:i,type:a,variant:c}=e,u={root:["root",`size${Y(s)}`,c,i,n!=="standard"&&`color${Y(n)}`,n!=="standard"&&`${c}${Y(n)}`,o&&"disabled",r&&"selected",{page:"page",first:"firstLast",last:"firstLast","start-ellipsis":"ellipsis","end-ellipsis":"ellipsis",previous:"previousNext",next:"previousNext"}[a]],icon:["icon"]};return ce(u,Pl,t)},Ol=ee("div",{name:"MuiPaginationItem",slot:"Root",overridesResolver:Qr})(({theme:e,ownerState:t})=>D({},e.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,padding:"0 6px",margin:"0 3px",color:(e.vars||e).palette.text.primary,height:"auto",[`&.${Me.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},t.size==="small"&&{minWidth:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},t.size==="large"&&{minWidth:40,borderRadius:40/2,padding:"0 10px",fontSize:e.typography.pxToRem(15)})),Hl=ee($n,{name:"MuiPaginationItem",slot:"Root",overridesResolver:Qr})(({theme:e,ownerState:t})=>D({},e.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,height:32,padding:"0 6px",margin:"0 3px",color:(e.vars||e).palette.text.primary,[`&.${Me.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${Me.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},transition:e.transitions.create(["color","background-color"],{duration:e.transitions.duration.short}),"&:hover":{backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Me.selected}`]:{backgroundColor:(e.vars||e).palette.action.selected,"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:fe(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(e.vars||e).palette.action.selected}},[`&.${Me.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:fe(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)},[`&.${Me.disabled}`]:{opacity:1,color:(e.vars||e).palette.action.disabled,backgroundColor:(e.vars||e).palette.action.selected}}},t.size==="small"&&{minWidth:26,height:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},t.size==="large"&&{minWidth:40,height:40,borderRadius:40/2,padding:"0 10px",fontSize:e.typography.pxToRem(15)},t.shape==="rounded"&&{borderRadius:(e.vars||e).shape.borderRadius}),({theme:e,ownerState:t})=>D({},t.variant==="text"&&{[`&.${Me.selected}`]:D({},t.color!=="standard"&&{color:(e.vars||e).palette[t.color].contrastText,backgroundColor:(e.vars||e).palette[t.color].main,"&:hover":{backgroundColor:(e.vars||e).palette[t.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[t.color].main}},[`&.${Me.focusVisible}`]:{backgroundColor:(e.vars||e).palette[t.color].dark}},{[`&.${Me.disabled}`]:{color:(e.vars||e).palette.action.disabled}})},t.variant==="outlined"&&{border:e.vars?`1px solid rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${Me.selected}`]:D({},t.color!=="standard"&&{color:(e.vars||e).palette[t.color].main,border:`1px solid ${e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / 0.5)`:fe(e.palette[t.color].main,.5)}`,backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / ${e.vars.palette.action.activatedOpacity})`:fe(e.palette[t.color].main,e.palette.action.activatedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / calc(${e.vars.palette.action.activatedOpacity} + ${e.vars.palette.action.focusOpacity}))`:fe(e.palette[t.color].main,e.palette.action.activatedOpacity+e.palette.action.focusOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${Me.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[t.color].mainChannel} / calc(${e.vars.palette.action.activatedOpacity} + ${e.vars.palette.action.focusOpacity}))`:fe(e.palette[t.color].main,e.palette.action.activatedOpacity+e.palette.action.focusOpacity)}},{[`&.${Me.disabled}`]:{borderColor:(e.vars||e).palette.action.disabledBackground,color:(e.vars||e).palette.action.disabled}})})),Bl=ee("div",{name:"MuiPaginationItem",slot:"Icon",overridesResolver:(e,t)=>t.icon})(({theme:e,ownerState:t})=>D({fontSize:e.typography.pxToRem(20),margin:"0 -8px"},t.size==="small"&&{fontSize:e.typography.pxToRem(18)},t.size==="large"&&{fontSize:e.typography.pxToRem(22)})),Vl=v.forwardRef(function(t,n){const o=xe({props:t,name:"MuiPaginationItem"}),{className:r,color:s="standard",component:i,components:a={},disabled:c=!1,page:u,selected:d=!1,shape:f="circular",size:p="medium",slots:h={},type:x="page",variant:g="text"}=o,b=oe(o,Dl),m=D({},o,{color:s,disabled:c,selected:d,shape:f,size:p,type:x,variant:g}),w=ya(),E=Ll(m),N=(w?{previous:h.next||a.next||lr,next:h.previous||a.previous||ar,last:h.first||a.first||sr,first:h.last||a.last||ir}:{previous:h.previous||a.previous||ar,next:h.next||a.next||lr,first:h.first||a.first||sr,last:h.last||a.last||ir})[x];return x==="start-ellipsis"||x==="end-ellipsis"?l.jsx(Ol,{ref:n,ownerState:m,className:te(E.root,r),children:"…"}):l.jsxs(Hl,D({ref:n,ownerState:m,component:i,disabled:c,className:te(E.root,r)},b,{children:[x==="page"&&u,N?l.jsx(Bl,{as:N,ownerState:m,className:E.icon}):null]}))}),Fl=["boundaryCount","className","color","count","defaultPage","disabled","getItemAriaLabel","hideNextButton","hidePrevButton","onChange","page","renderItem","shape","showFirstButton","showLastButton","siblingCount","size","variant"],Wl=e=>{const{classes:t,variant:n}=e;return ce({root:["root",n],ul:["ul"]},Il,t)},Ul=ee("nav",{name:"MuiPagination",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant]]}})({}),Xl=ee("ul",{name:"MuiPagination",slot:"Ul",overridesResolver:(e,t)=>t.ul})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"});function Yl(e,t,n){return e==="page"?`${n?"":"Go to "}page ${t}`:`Go to ${e} page`}const Gl=v.forwardRef(function(t,n){const o=xe({props:t,name:"MuiPagination"}),{boundaryCount:r=1,className:s,color:i="standard",count:a=1,defaultPage:c=1,disabled:u=!1,getItemAriaLabel:d=Yl,hideNextButton:f=!1,hidePrevButton:p=!1,renderItem:h=M=>l.jsx(Vl,D({},M)),shape:x="circular",showFirstButton:g=!1,showLastButton:b=!1,siblingCount:m=1,size:w="medium",variant:E="text"}=o,C=oe(o,Fl),{items:N}=zl(D({},o,{componentName:"Pagination"})),I=D({},o,{boundaryCount:r,color:i,count:a,defaultPage:c,disabled:u,getItemAriaLabel:d,hideNextButton:f,hidePrevButton:p,renderItem:h,shape:x,showFirstButton:g,showLastButton:b,siblingCount:m,size:w,variant:E}),j=Wl(I);return l.jsx(Ul,D({"aria-label":"pagination navigation",className:te(j.root,s),ownerState:I,ref:n},C,{children:l.jsx(Xl,{className:j.ul,ownerState:I,children:N.map((M,T)=>l.jsx("li",{children:h(D({},M,{color:i,"aria-label":d(M.type,M.page,M.selected),shape:x,size:w,variant:E}))},T))})}))});function ql(e={}){const{autoHideDuration:t=null,disableWindowBlurListener:n=!1,onClose:o,open:r,resumeHideDuration:s}=e,i=xa();v.useEffect(()=>{if(!r)return;function m(w){w.defaultPrevented||(w.key==="Escape"||w.key==="Esc")&&(o==null||o(w,"escapeKeyDown"))}return document.addEventListener("keydown",m),()=>{document.removeEventListener("keydown",m)}},[r,o]);const a=io((m,w)=>{o==null||o(m,w)}),c=io(m=>{!o||m==null||i.start(m,()=>{a(null,"timeout")})});v.useEffect(()=>(r&&c(t),i.clear),[r,t,c,i]);const u=m=>{o==null||o(m,"clickaway")},d=i.clear,f=v.useCallback(()=>{t!=null&&c(s??t*.5)},[t,s,c]),p=m=>w=>{const E=m.onBlur;E==null||E(w),f()},h=m=>w=>{const E=m.onFocus;E==null||E(w),d()},x=m=>w=>{const E=m.onMouseEnter;E==null||E(w),d()},g=m=>w=>{const E=m.onMouseLeave;E==null||E(w),f()};return v.useEffect(()=>{if(!n&&r)return window.addEventListener("focus",f),window.addEventListener("blur",d),()=>{window.removeEventListener("focus",f),window.removeEventListener("blur",d)}},[n,r,f,d]),{getRootProps:(m={})=>{const w=D({},Ko(e),Ko(m));return D({role:"presentation"},m,w,{onBlur:p(w),onFocus:h(w),onMouseEnter:x(w),onMouseLeave:g(w)})},onClickAway:u}}function Kl(e){return le("MuiSnackbarContent",e)}ae("MuiSnackbarContent",["root","message","action"]);const Zl=["action","className","message","role"],Jl=e=>{const{classes:t}=e;return ce({root:["root"],action:["action"],message:["message"]},Kl,t)},Ql=ee(Pt,{name:"MuiSnackbarContent",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>{const t=e.palette.mode==="light"?.8:.98,n=va(e.palette.background.default,t);return D({},e.typography.body2,{color:e.vars?e.vars.palette.SnackbarContent.color:e.palette.getContrastText(n),backgroundColor:e.vars?e.vars.palette.SnackbarContent.bg:n,display:"flex",alignItems:"center",flexWrap:"wrap",padding:"6px 16px",borderRadius:(e.vars||e).shape.borderRadius,flexGrow:1,[e.breakpoints.up("sm")]:{flexGrow:"initial",minWidth:288}})}),ec=ee("div",{name:"MuiSnackbarContent",slot:"Message",overridesResolver:(e,t)=>t.message})({padding:"8px 0"}),tc=ee("div",{name:"MuiSnackbarContent",slot:"Action",overridesResolver:(e,t)=>t.action})({display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8}),nc=v.forwardRef(function(t,n){const o=xe({props:t,name:"MuiSnackbarContent"}),{action:r,className:s,message:i,role:a="alert"}=o,c=oe(o,Zl),u=o,d=Jl(u);return l.jsxs(Ql,D({role:a,square:!0,elevation:6,className:te(d.root,s),ownerState:u,ref:n},c,{children:[l.jsx(ec,{className:d.message,ownerState:u,children:i}),r?l.jsx(tc,{className:d.action,ownerState:u,children:r}):null]}))});function oc(e){return le("MuiSnackbar",e)}ae("MuiSnackbar",["root","anchorOriginTopCenter","anchorOriginBottomCenter","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft"]);const rc=["onEnter","onExited"],sc=["action","anchorOrigin","autoHideDuration","children","className","ClickAwayListenerProps","ContentProps","disableWindowBlurListener","message","onBlur","onClose","onFocus","onMouseEnter","onMouseLeave","open","resumeHideDuration","TransitionComponent","transitionDuration","TransitionProps"],ic=e=>{const{classes:t,anchorOrigin:n}=e,o={root:["root",`anchorOrigin${Y(n.vertical)}${Y(n.horizontal)}`]};return ce(o,oc,t)},cr=ee("div",{name:"MuiSnackbar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[`anchorOrigin${Y(n.anchorOrigin.vertical)}${Y(n.anchorOrigin.horizontal)}`]]}})(({theme:e,ownerState:t})=>{const n={left:"50%",right:"auto",transform:"translateX(-50%)"};return D({zIndex:(e.vars||e).zIndex.snackbar,position:"fixed",display:"flex",left:8,right:8,justifyContent:"center",alignItems:"center"},t.anchorOrigin.vertical==="top"?{top:8}:{bottom:8},t.anchorOrigin.horizontal==="left"&&{justifyContent:"flex-start"},t.anchorOrigin.horizontal==="right"&&{justifyContent:"flex-end"},{[e.breakpoints.up("sm")]:D({},t.anchorOrigin.vertical==="top"?{top:24}:{bottom:24},t.anchorOrigin.horizontal==="center"&&n,t.anchorOrigin.horizontal==="left"&&{left:24,right:"auto"},t.anchorOrigin.horizontal==="right"&&{right:24,left:"auto"})})}),ac=v.forwardRef(function(t,n){const o=xe({props:t,name:"MuiSnackbar"}),r=Gr(),s={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{action:i,anchorOrigin:{vertical:a,horizontal:c}={vertical:"bottom",horizontal:"left"},autoHideDuration:u=null,children:d,className:f,ClickAwayListenerProps:p,ContentProps:h,disableWindowBlurListener:x=!1,message:g,open:b,TransitionComponent:m=ba,transitionDuration:w=s,TransitionProps:{onEnter:E,onExited:C}={}}=o,N=oe(o.TransitionProps,rc),I=oe(o,sc),j=D({},o,{anchorOrigin:{vertical:a,horizontal:c},autoHideDuration:u,disableWindowBlurListener:x,TransitionComponent:m,transitionDuration:w}),M=ic(j),{getRootProps:T,onClickAway:A}=ql(D({},j)),[P,F]=v.useState(!0),O=wa({elementType:cr,getSlotProps:T,externalForwardedProps:I,ownerState:j,additionalProps:{ref:n},className:[M.root,f]}),y=S=>{F(!0),C&&C(S)},$=(S,R)=>{F(!1),E&&E(S,R)};return!b&&P?null:l.jsx(Ya,D({onClickAway:A},p,{children:l.jsx(cr,D({},O,{children:l.jsx(m,D({appear:!0,in:b,timeout:w,direction:a==="top"?"down":"up",onEnter:$,onExited:y},N,{children:d||l.jsx(nc,D({message:g,action:i},h))}))}))}))}),es=v.createContext();function lc(e){return le("MuiTable",e)}ae("MuiTable",["root","stickyHeader"]);const cc=["className","component","padding","size","stickyHeader"],uc=e=>{const{classes:t,stickyHeader:n}=e;return ce({root:["root",n&&"stickyHeader"]},lc,t)},dc=ee("table",{name:"MuiTable",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.stickyHeader&&t.stickyHeader]}})(({theme:e,ownerState:t})=>D({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":D({},e.typography.body2,{padding:e.spacing(2),color:(e.vars||e).palette.text.secondary,textAlign:"left",captionSide:"bottom"})},t.stickyHeader&&{borderCollapse:"separate"})),ur="table",fc=v.forwardRef(function(t,n){const o=xe({props:t,name:"MuiTable"}),{className:r,component:s=ur,padding:i="normal",size:a="medium",stickyHeader:c=!1}=o,u=oe(o,cc),d=D({},o,{component:s,padding:i,size:a,stickyHeader:c}),f=uc(d),p=v.useMemo(()=>({padding:i,size:a,stickyHeader:c}),[i,a,c]);return l.jsx(es.Provider,{value:p,children:l.jsx(dc,D({as:s,role:s===ur?null:"table",ref:n,className:te(f.root,r),ownerState:d},u))})}),On=v.createContext();function pc(e){return le("MuiTableBody",e)}ae("MuiTableBody",["root"]);const hc=["className","component"],gc=e=>{const{classes:t}=e;return ce({root:["root"]},pc,t)},mc=ee("tbody",{name:"MuiTableBody",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"table-row-group"}),yc={variant:"body"},dr="tbody",xc=v.forwardRef(function(t,n){const o=xe({props:t,name:"MuiTableBody"}),{className:r,component:s=dr}=o,i=oe(o,hc),a=D({},o,{component:s}),c=gc(a);return l.jsx(On.Provider,{value:yc,children:l.jsx(mc,D({className:te(c.root,r),as:s,ref:n,role:s===dr?null:"rowgroup",ownerState:a},i))})});function vc(e){return le("MuiTableCell",e)}const bc=ae("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),wc=["align","className","component","padding","scope","size","sortDirection","variant"],Cc=e=>{const{classes:t,variant:n,align:o,padding:r,size:s,stickyHeader:i}=e,a={root:["root",n,i&&"stickyHeader",o!=="inherit"&&`align${Y(o)}`,r!=="normal"&&`padding${Y(r)}`,`size${Y(s)}`]};return ce(a,vc,t)},_c=ee("td",{name:"MuiTableCell",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.variant],t[`size${Y(n.size)}`],n.padding!=="normal"&&t[`padding${Y(n.padding)}`],n.align!=="inherit"&&t[`align${Y(n.align)}`],n.stickyHeader&&t.stickyHeader]}})(({theme:e,ownerState:t})=>D({},e.typography.body2,{display:"table-cell",verticalAlign:"inherit",borderBottom:e.vars?`1px solid ${e.vars.palette.TableCell.border}`:`1px solid
    ${e.palette.mode==="light"?Ca(fe(e.palette.divider,1),.88):_a(fe(e.palette.divider,1),.68)}`,textAlign:"left",padding:16},t.variant==="head"&&{color:(e.vars||e).palette.text.primary,lineHeight:e.typography.pxToRem(24),fontWeight:e.typography.fontWeightMedium},t.variant==="body"&&{color:(e.vars||e).palette.text.primary},t.variant==="footer"&&{color:(e.vars||e).palette.text.secondary,lineHeight:e.typography.pxToRem(21),fontSize:e.typography.pxToRem(12)},t.size==="small"&&{padding:"6px 16px",[`&.${bc.paddingCheckbox}`]:{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}},t.padding==="checkbox"&&{width:48,padding:"0 0 0 4px"},t.padding==="none"&&{padding:0},t.align==="left"&&{textAlign:"left"},t.align==="center"&&{textAlign:"center"},t.align==="right"&&{textAlign:"right",flexDirection:"row-reverse"},t.align==="justify"&&{textAlign:"justify"},t.stickyHeader&&{position:"sticky",top:0,zIndex:2,backgroundColor:(e.vars||e).palette.background.default})),Ve=v.forwardRef(function(t,n){const o=xe({props:t,name:"MuiTableCell"}),{align:r="inherit",className:s,component:i,padding:a,scope:c,size:u,sortDirection:d,variant:f}=o,p=oe(o,wc),h=v.useContext(es),x=v.useContext(On),g=x&&x.variant==="head";let b;i?b=i:b=g?"th":"td";let m=c;b==="td"?m=void 0:!m&&g&&(m="col");const w=f||x&&x.variant,E=D({},o,{align:r,component:b,padding:a||(h&&h.padding?h.padding:"normal"),size:u||(h&&h.size?h.size:"medium"),sortDirection:d,stickyHeader:w==="head"&&h&&h.stickyHeader,variant:w}),C=Cc(E);let N=null;return d&&(N=d==="asc"?"ascending":"descending"),l.jsx(_c,D({as:b,ref:n,className:te(C.root,s),"aria-sort":N,scope:m,ownerState:E},p))});function Sc(e){return le("MuiTableContainer",e)}ae("MuiTableContainer",["root"]);const Ec=["className","component"],$c=e=>{const{classes:t}=e;return ce({root:["root"]},Sc,t)},Tc=ee("div",{name:"MuiTableContainer",slot:"Root",overridesResolver:(e,t)=>t.root})({width:"100%",overflowX:"auto"}),Nc=v.forwardRef(function(t,n){const o=xe({props:t,name:"MuiTableContainer"}),{className:r,component:s="div"}=o,i=oe(o,Ec),a=D({},o,{component:s}),c=$c(a);return l.jsx(Tc,D({ref:n,as:s,className:te(c.root,r),ownerState:a},i))});function jc(e){return le("MuiTableHead",e)}ae("MuiTableHead",["root"]);const kc=["className","component"],Mc=e=>{const{classes:t}=e;return ce({root:["root"]},jc,t)},Rc=ee("thead",{name:"MuiTableHead",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"table-header-group"}),Ic={variant:"head"},fr="thead",Ac=v.forwardRef(function(t,n){const o=xe({props:t,name:"MuiTableHead"}),{className:r,component:s=fr}=o,i=oe(o,kc),a=D({},o,{component:s}),c=Mc(a);return l.jsx(On.Provider,{value:Ic,children:l.jsx(Rc,D({as:s,className:te(c.root,r),ref:n,role:s===fr?null:"rowgroup",ownerState:a},i))})});function zc(e){return le("MuiTableRow",e)}const pr=ae("MuiTableRow",["root","selected","hover","head","footer"]),Pc=["className","component","hover","selected"],Dc=e=>{const{classes:t,selected:n,hover:o,head:r,footer:s}=e;return ce({root:["root",n&&"selected",o&&"hover",r&&"head",s&&"footer"]},zc,t)},Lc=ee("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.head&&t.head,n.footer&&t.footer]}})(({theme:e})=>({color:"inherit",display:"table-row",verticalAlign:"middle",outline:0,[`&.${pr.hover}:hover`]:{backgroundColor:(e.vars||e).palette.action.hover},[`&.${pr.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:fe(e.palette.primary.main,e.palette.action.selectedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:fe(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity)}}})),hr="tr",gr=v.forwardRef(function(t,n){const o=xe({props:t,name:"MuiTableRow"}),{className:r,component:s=hr,hover:i=!1,selected:a=!1}=o,c=oe(o,Pc),u=v.useContext(On),d=D({},o,{component:s,hover:i,selected:a,head:u&&u.variant==="head",footer:u&&u.variant==="footer"}),f=Dc(d);return l.jsx(Lc,D({as:s,ref:n,className:te(f.root,r),role:s===hr?null:"row",ownerState:d},c))}),Oc=he([l.jsx("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"},"0"),l.jsx("path",{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},"1")],"AccessTime"),Hc=he(l.jsx("path",{d:"M22 11V3h-7v3H9V3H2v8h7V8h2v10h4v3h7v-8h-7v3h-2V8h2v3z"}),"AccountTree"),Eo=he(l.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add"),Hn=he(l.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"}),"CheckCircle"),ts=he([l.jsx("path",{d:"M4 6H2v14c0 1.1.9 2 2 2h14v-2H4z"},"0"),l.jsx("path",{d:"M20 2H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m0 10-2.5-1.5L15 12V4h5z"},"1")],"CollectionsBookmark"),ns=he(l.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete"),os=he(l.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-2h2zm0-4h-2V7h2z"}),"Error"),jn=he(l.jsx("path",{d:"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9m-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8z"}),"History"),Bc=he(l.jsx("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2m0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2m0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2"}),"MoreVert"),Vc=he(l.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"}),"RadioButtonUnchecked"),Fc=he(l.jsx("path",{d:"M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9m-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8z"}),"Restore"),Wc=he(l.jsx("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3m3-10H5V5h10z"}),"Save"),Uc=he(l.jsx("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14"}),"Search"),Xc=he(l.jsx("path",{d:"m20.38 8.57-1.23 1.85a8 8 0 0 1-.22 7.58H5.07A8 8 0 0 1 15.58 6.85l1.85-1.23A10 10 0 0 0 3.35 19a2 2 0 0 0 1.72 1h13.85a2 2 0 0 0 1.74-1 10 10 0 0 0-.27-10.44zm-9.79 6.84a2 2 0 0 0 2.83 0l5.66-8.49-8.49 5.66a2 2 0 0 0 0 2.83"}),"Speed"),Yc=he(l.jsx("path",{d:"M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"}),"Star"),kn=he(l.jsx("path",{d:"M23 8c0 1.1-.9 2-2 2-.18 0-.35-.02-.51-.07l-3.56 3.55c.05.16.07.34.07.52 0 1.1-.9 2-2 2s-2-.9-2-2c0-.18.02-.36.07-.52l-2.55-2.55c-.16.05-.34.07-.52.07s-.36-.02-.52-.07l-4.55 4.56c.05.16.07.33.07.51 0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2c.18 0 .35.02.51.07l4.56-4.55C8.02 9.36 8 9.18 8 9c0-1.1.9-2 2-2s2 .9 2 2c0 .18-.02.36-.07.52l2.55 2.55c.16-.05.34-.07.52-.07s.36.02.52.07l3.55-3.56C19.02 8.35 19 8.18 19 8c0-1.1.9-2 2-2s2 .9 2 2"}),"Timeline"),Gc=he(l.jsx("path",{d:"M17 7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h10c2.76 0 5-2.24 5-5s-2.24-5-5-5M7 15c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3"}),"ToggleOff"),qc=he(l.jsx("path",{d:"M17 7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h10c2.76 0 5-2.24 5-5s-2.24-5-5-5m0 8c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3"}),"ToggleOn"),Kc=he(l.jsx("path",{d:"m16 6 2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"}),"TrendingUp"),ke="/api/v1",Ye={list:async e=>(await je.get(`${ke}/dispatch-rules`,{params:e})).data,get:async e=>(await je.get(`${ke}/dispatch-rules/${e}`)).data,create:async e=>(await je.post(`${ke}/dispatch-rules`,e)).data,update:async(e,t)=>(await je.put(`${ke}/dispatch-rules/${e}`,t)).data,delete:async e=>{await je.delete(`${ke}/dispatch-rules/${e}`)},activate:async e=>{await je.post(`${ke}/dispatch-rules/${e}/activate`)},deactivate:async e=>{await je.post(`${ke}/dispatch-rules/${e}/deactivate`)},test:async(e,t)=>(await je.post(`${ke}/dispatch-rules/${e}/test`,{test_data:t})).data,getLogs:async(e,t)=>(await je.get(`${ke}/dispatch-rules/${e}/logs`,{params:t})).data,getPerformance:async e=>(await je.get(`${ke}/dispatch-rules/${e}/performance`)).data,simulate:async e=>(await je.post(`${ke}/dispatch-rules/simulate`,e)).data,optimizeOrder:async e=>(await je.post(`${ke}/dispatch-rules/optimize-order/${e}`)).data};function Se(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,o;n<e.length;n++)(o=Se(e[n]))!==""&&(t+=(t&&" ")+o);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}const{useDebugValue:Zc}=k,{useSyncExternalStoreWithSelector:Jc}=na,Qc=e=>e;function rs(e,t=Qc,n){const o=Jc(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return Zc(o),o}const mr=(e,t)=>{const n=ta(e),o=(r,s=t)=>rs(n,r,s);return Object.assign(o,n),o},eu=(e,t)=>e?mr(e,t):mr;function Ce(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[o,r]of e)if(!Object.is(r,t.get(o)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const o of e)if(!t.has(o))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const o of n)if(!Object.prototype.hasOwnProperty.call(t,o)||!Object.is(e[o],t[o]))return!1;return!0}var tu={value:()=>{}};function Bn(){for(var e=0,t=arguments.length,n={},o;e<t;++e){if(!(o=arguments[e]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new Cn(n)}function Cn(e){this._=e}function nu(e,t){return e.trim().split(/^|\s+/).map(function(n){var o="",r=n.indexOf(".");if(r>=0&&(o=n.slice(r+1),n=n.slice(0,r)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}Cn.prototype=Bn.prototype={constructor:Cn,on:function(e,t){var n=this._,o=nu(e+"",n),r,s=-1,i=o.length;if(arguments.length<2){for(;++s<i;)if((r=(e=o[s]).type)&&(r=ou(n[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<i;)if(r=(e=o[s]).type)n[r]=yr(n[r],e.name,t);else if(t==null)for(r in n)n[r]=yr(n[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Cn(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var n=new Array(r),o=0,r,s;o<r;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],o=0,r=s.length;o<r;++o)s[o].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var o=this._[e],r=0,s=o.length;r<s;++r)o[r].value.apply(t,n)}};function ou(e,t){for(var n=0,o=e.length,r;n<o;++n)if((r=e[n]).name===t)return r.value}function yr(e,t,n){for(var o=0,r=e.length;o<r;++o)if(e[o].name===t){e[o]=tu,e=e.slice(0,o).concat(e.slice(o+1));break}return n!=null&&e.push({name:t,value:n}),e}var lo="http://www.w3.org/1999/xhtml";const xr={svg:"http://www.w3.org/2000/svg",xhtml:lo,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Vn(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),xr.hasOwnProperty(t)?{space:xr[t],local:e}:e}function ru(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===lo&&t.documentElement.namespaceURI===lo?t.createElement(e):t.createElementNS(n,e)}}function su(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function ss(e){var t=Vn(e);return(t.local?su:ru)(t)}function iu(){}function $o(e){return e==null?iu:function(){return this.querySelector(e)}}function au(e){typeof e!="function"&&(e=$o(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var s=t[r],i=s.length,a=o[r]=new Array(i),c,u,d=0;d<i;++d)(c=s[d])&&(u=e.call(c,c.__data__,d,s))&&("__data__"in c&&(u.__data__=c.__data__),a[d]=u);return new $e(o,this._parents)}function lu(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function cu(){return[]}function is(e){return e==null?cu:function(){return this.querySelectorAll(e)}}function uu(e){return function(){return lu(e.apply(this,arguments))}}function du(e){typeof e=="function"?e=uu(e):e=is(e);for(var t=this._groups,n=t.length,o=[],r=[],s=0;s<n;++s)for(var i=t[s],a=i.length,c,u=0;u<a;++u)(c=i[u])&&(o.push(e.call(c,c.__data__,u,i)),r.push(c));return new $e(o,r)}function as(e){return function(){return this.matches(e)}}function ls(e){return function(t){return t.matches(e)}}var fu=Array.prototype.find;function pu(e){return function(){return fu.call(this.children,e)}}function hu(){return this.firstElementChild}function gu(e){return this.select(e==null?hu:pu(typeof e=="function"?e:ls(e)))}var mu=Array.prototype.filter;function yu(){return Array.from(this.children)}function xu(e){return function(){return mu.call(this.children,e)}}function vu(e){return this.selectAll(e==null?yu:xu(typeof e=="function"?e:ls(e)))}function bu(e){typeof e!="function"&&(e=as(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var s=t[r],i=s.length,a=o[r]=[],c,u=0;u<i;++u)(c=s[u])&&e.call(c,c.__data__,u,s)&&a.push(c);return new $e(o,this._parents)}function cs(e){return new Array(e.length)}function wu(){return new $e(this._enter||this._groups.map(cs),this._parents)}function Mn(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Mn.prototype={constructor:Mn,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Cu(e){return function(){return e}}function _u(e,t,n,o,r,s){for(var i=0,a,c=t.length,u=s.length;i<u;++i)(a=t[i])?(a.__data__=s[i],o[i]=a):n[i]=new Mn(e,s[i]);for(;i<c;++i)(a=t[i])&&(r[i]=a)}function Su(e,t,n,o,r,s,i){var a,c,u=new Map,d=t.length,f=s.length,p=new Array(d),h;for(a=0;a<d;++a)(c=t[a])&&(p[a]=h=i.call(c,c.__data__,a,t)+"",u.has(h)?r[a]=c:u.set(h,c));for(a=0;a<f;++a)h=i.call(e,s[a],a,s)+"",(c=u.get(h))?(o[a]=c,c.__data__=s[a],u.delete(h)):n[a]=new Mn(e,s[a]);for(a=0;a<d;++a)(c=t[a])&&u.get(p[a])===c&&(r[a]=c)}function Eu(e){return e.__data__}function $u(e,t){if(!arguments.length)return Array.from(this,Eu);var n=t?Su:_u,o=this._parents,r=this._groups;typeof e!="function"&&(e=Cu(e));for(var s=r.length,i=new Array(s),a=new Array(s),c=new Array(s),u=0;u<s;++u){var d=o[u],f=r[u],p=f.length,h=Tu(e.call(d,d&&d.__data__,u,o)),x=h.length,g=a[u]=new Array(x),b=i[u]=new Array(x),m=c[u]=new Array(p);n(d,f,g,b,m,h,t);for(var w=0,E=0,C,N;w<x;++w)if(C=g[w]){for(w>=E&&(E=w+1);!(N=b[E])&&++E<x;);C._next=N||null}}return i=new $e(i,o),i._enter=a,i._exit=c,i}function Tu(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Nu(){return new $e(this._exit||this._groups.map(cs),this._parents)}function ju(e,t,n){var o=this.enter(),r=this,s=this.exit();return typeof e=="function"?(o=e(o),o&&(o=o.selection())):o=o.append(e+""),t!=null&&(r=t(r),r&&(r=r.selection())),n==null?s.remove():n(s),o&&r?o.merge(r).order():r}function ku(e){for(var t=e.selection?e.selection():e,n=this._groups,o=t._groups,r=n.length,s=o.length,i=Math.min(r,s),a=new Array(r),c=0;c<i;++c)for(var u=n[c],d=o[c],f=u.length,p=a[c]=new Array(f),h,x=0;x<f;++x)(h=u[x]||d[x])&&(p[x]=h);for(;c<r;++c)a[c]=n[c];return new $e(a,this._parents)}function Mu(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var o=e[t],r=o.length-1,s=o[r],i;--r>=0;)(i=o[r])&&(s&&i.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(i,s),s=i);return this}function Ru(e){e||(e=Iu);function t(f,p){return f&&p?e(f.__data__,p.__data__):!f-!p}for(var n=this._groups,o=n.length,r=new Array(o),s=0;s<o;++s){for(var i=n[s],a=i.length,c=r[s]=new Array(a),u,d=0;d<a;++d)(u=i[d])&&(c[d]=u);c.sort(t)}return new $e(r,this._parents).order()}function Iu(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Au(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function zu(){return Array.from(this)}function Pu(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,s=o.length;r<s;++r){var i=o[r];if(i)return i}return null}function Du(){let e=0;for(const t of this)++e;return e}function Lu(){return!this.node()}function Ou(e){for(var t=this._groups,n=0,o=t.length;n<o;++n)for(var r=t[n],s=0,i=r.length,a;s<i;++s)(a=r[s])&&e.call(a,a.__data__,s,r);return this}function Hu(e){return function(){this.removeAttribute(e)}}function Bu(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Vu(e,t){return function(){this.setAttribute(e,t)}}function Fu(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Wu(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Uu(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Xu(e,t){var n=Vn(e);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((t==null?n.local?Bu:Hu:typeof t=="function"?n.local?Uu:Wu:n.local?Fu:Vu)(n,t))}function us(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Yu(e){return function(){this.style.removeProperty(e)}}function Gu(e,t,n){return function(){this.style.setProperty(e,t,n)}}function qu(e,t,n){return function(){var o=t.apply(this,arguments);o==null?this.style.removeProperty(e):this.style.setProperty(e,o,n)}}function Ku(e,t,n){return arguments.length>1?this.each((t==null?Yu:typeof t=="function"?qu:Gu)(e,t,n??"")):Ot(this.node(),e)}function Ot(e,t){return e.style.getPropertyValue(t)||us(e).getComputedStyle(e,null).getPropertyValue(t)}function Zu(e){return function(){delete this[e]}}function Ju(e,t){return function(){this[e]=t}}function Qu(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function ed(e,t){return arguments.length>1?this.each((t==null?Zu:typeof t=="function"?Qu:Ju)(e,t)):this.node()[e]}function ds(e){return e.trim().split(/^|\s+/)}function To(e){return e.classList||new fs(e)}function fs(e){this._node=e,this._names=ds(e.getAttribute("class")||"")}fs.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function ps(e,t){for(var n=To(e),o=-1,r=t.length;++o<r;)n.add(t[o])}function hs(e,t){for(var n=To(e),o=-1,r=t.length;++o<r;)n.remove(t[o])}function td(e){return function(){ps(this,e)}}function nd(e){return function(){hs(this,e)}}function od(e,t){return function(){(t.apply(this,arguments)?ps:hs)(this,e)}}function rd(e,t){var n=ds(e+"");if(arguments.length<2){for(var o=To(this.node()),r=-1,s=n.length;++r<s;)if(!o.contains(n[r]))return!1;return!0}return this.each((typeof t=="function"?od:t?td:nd)(n,t))}function sd(){this.textContent=""}function id(e){return function(){this.textContent=e}}function ad(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function ld(e){return arguments.length?this.each(e==null?sd:(typeof e=="function"?ad:id)(e)):this.node().textContent}function cd(){this.innerHTML=""}function ud(e){return function(){this.innerHTML=e}}function dd(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function fd(e){return arguments.length?this.each(e==null?cd:(typeof e=="function"?dd:ud)(e)):this.node().innerHTML}function pd(){this.nextSibling&&this.parentNode.appendChild(this)}function hd(){return this.each(pd)}function gd(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function md(){return this.each(gd)}function yd(e){var t=typeof e=="function"?e:ss(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function xd(){return null}function vd(e,t){var n=typeof e=="function"?e:ss(e),o=t==null?xd:typeof t=="function"?t:$o(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function bd(){var e=this.parentNode;e&&e.removeChild(this)}function wd(){return this.each(bd)}function Cd(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function _d(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Sd(e){return this.select(e?_d:Cd)}function Ed(e){return arguments.length?this.property("__data__",e):this.node().__data__}function $d(e){return function(t){e.call(this,t,this.__data__)}}function Td(e){return e.trim().split(/^|\s+/).map(function(t){var n="",o=t.indexOf(".");return o>=0&&(n=t.slice(o+1),t=t.slice(0,o)),{type:t,name:n}})}function Nd(e){return function(){var t=this.__on;if(t){for(var n=0,o=-1,r=t.length,s;n<r;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++o]=s;++o?t.length=o:delete this.__on}}}function jd(e,t,n){return function(){var o=this.__on,r,s=$d(t);if(o){for(var i=0,a=o.length;i<a;++i)if((r=o[i]).type===e.type&&r.name===e.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=s,r.options=n),r.value=t;return}}this.addEventListener(e.type,s,n),r={type:e.type,name:e.name,value:t,listener:s,options:n},o?o.push(r):this.__on=[r]}}function kd(e,t,n){var o=Td(e+""),r,s=o.length,i;if(arguments.length<2){var a=this.node().__on;if(a){for(var c=0,u=a.length,d;c<u;++c)for(r=0,d=a[c];r<s;++r)if((i=o[r]).type===d.type&&i.name===d.name)return d.value}return}for(a=t?jd:Nd,r=0;r<s;++r)this.each(a(o[r],t,n));return this}function gs(e,t,n){var o=us(e),r=o.CustomEvent;typeof r=="function"?r=new r(t,n):(r=o.document.createEvent("Event"),n?(r.initEvent(t,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(t,!1,!1)),e.dispatchEvent(r)}function Md(e,t){return function(){return gs(this,e,t)}}function Rd(e,t){return function(){return gs(this,e,t.apply(this,arguments))}}function Id(e,t){return this.each((typeof t=="function"?Rd:Md)(e,t))}function*Ad(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var o=e[t],r=0,s=o.length,i;r<s;++r)(i=o[r])&&(yield i)}var ms=[null];function $e(e,t){this._groups=e,this._parents=t}function dn(){return new $e([[document.documentElement]],ms)}function zd(){return this}$e.prototype=dn.prototype={constructor:$e,select:au,selectAll:du,selectChild:gu,selectChildren:vu,filter:bu,data:$u,enter:wu,exit:Nu,join:ju,merge:ku,selection:zd,order:Mu,sort:Ru,call:Au,nodes:zu,node:Pu,size:Du,empty:Lu,each:Ou,attr:Xu,style:Ku,property:ed,classed:rd,text:ld,html:fd,raise:hd,lower:md,append:yd,insert:vd,remove:wd,clone:Sd,datum:Ed,on:kd,dispatch:Id,[Symbol.iterator]:Ad};function De(e){return typeof e=="string"?new $e([[document.querySelector(e)]],[document.documentElement]):new $e([[e]],ms)}function Pd(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Fe(e,t){if(e=Pd(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=e.clientX,o.y=e.clientY,o=o.matrixTransform(t.getScreenCTM().inverse()),[o.x,o.y]}if(t.getBoundingClientRect){var r=t.getBoundingClientRect();return[e.clientX-r.left-t.clientLeft,e.clientY-r.top-t.clientTop]}}return[e.pageX,e.pageY]}const Dd={passive:!1},rn={capture:!0,passive:!1};function Qn(e){e.stopImmediatePropagation()}function It(e){e.preventDefault(),e.stopImmediatePropagation()}function ys(e){var t=e.document.documentElement,n=De(e).on("dragstart.drag",It,rn);"onselectstart"in t?n.on("selectstart.drag",It,rn):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function xs(e,t){var n=e.document.documentElement,o=De(e).on("dragstart.drag",null);t&&(o.on("click.drag",It,rn),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const mn=e=>()=>e;function co(e,{sourceEvent:t,subject:n,target:o,identifier:r,active:s,x:i,y:a,dx:c,dy:u,dispatch:d}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:i,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:d}})}co.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Ld(e){return!e.ctrlKey&&!e.button}function Od(){return this.parentNode}function Hd(e,t){return t??{x:e.x,y:e.y}}function Bd(){return navigator.maxTouchPoints||"ontouchstart"in this}function Vd(){var e=Ld,t=Od,n=Hd,o=Bd,r={},s=Bn("start","drag","end"),i=0,a,c,u,d,f=0;function p(C){C.on("mousedown.drag",h).filter(o).on("touchstart.drag",b).on("touchmove.drag",m,Dd).on("touchend.drag touchcancel.drag",w).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(C,N){if(!(d||!e.call(this,C,N))){var I=E(this,t.call(this,C,N),C,N,"mouse");I&&(De(C.view).on("mousemove.drag",x,rn).on("mouseup.drag",g,rn),ys(C.view),Qn(C),u=!1,a=C.clientX,c=C.clientY,I("start",C))}}function x(C){if(It(C),!u){var N=C.clientX-a,I=C.clientY-c;u=N*N+I*I>f}r.mouse("drag",C)}function g(C){De(C.view).on("mousemove.drag mouseup.drag",null),xs(C.view,u),It(C),r.mouse("end",C)}function b(C,N){if(e.call(this,C,N)){var I=C.changedTouches,j=t.call(this,C,N),M=I.length,T,A;for(T=0;T<M;++T)(A=E(this,j,C,N,I[T].identifier,I[T]))&&(Qn(C),A("start",C,I[T]))}}function m(C){var N=C.changedTouches,I=N.length,j,M;for(j=0;j<I;++j)(M=r[N[j].identifier])&&(It(C),M("drag",C,N[j]))}function w(C){var N=C.changedTouches,I=N.length,j,M;for(d&&clearTimeout(d),d=setTimeout(function(){d=null},500),j=0;j<I;++j)(M=r[N[j].identifier])&&(Qn(C),M("end",C,N[j]))}function E(C,N,I,j,M,T){var A=s.copy(),P=Fe(T||I,N),F,O,y;if((y=n.call(C,new co("beforestart",{sourceEvent:I,target:p,identifier:M,active:i,x:P[0],y:P[1],dx:0,dy:0,dispatch:A}),j))!=null)return F=y.x-P[0]||0,O=y.y-P[1]||0,function $(S,R,L){var _=P,z;switch(S){case"start":r[M]=$,z=i++;break;case"end":delete r[M],--i;case"drag":P=Fe(L||R,N),z=i;break}A.call(S,C,new co(S,{sourceEvent:R,subject:y,target:p,identifier:M,active:z,x:P[0]+F,y:P[1]+O,dx:P[0]-_[0],dy:P[1]-_[1],dispatch:A}),j)}}return p.filter=function(C){return arguments.length?(e=typeof C=="function"?C:mn(!!C),p):e},p.container=function(C){return arguments.length?(t=typeof C=="function"?C:mn(C),p):t},p.subject=function(C){return arguments.length?(n=typeof C=="function"?C:mn(C),p):n},p.touchable=function(C){return arguments.length?(o=typeof C=="function"?C:mn(!!C),p):o},p.on=function(){var C=s.on.apply(s,arguments);return C===s?p:C},p.clickDistance=function(C){return arguments.length?(f=(C=+C)*C,p):Math.sqrt(f)},p}var Ht=0,Jt=0,Yt=0,vs=1e3,Rn,Qt,In=0,xt=0,Fn=0,sn=typeof performance=="object"&&performance.now?performance:Date,bs=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function No(){return xt||(bs(Fd),xt=sn.now()+Fn)}function Fd(){xt=0}function An(){this._call=this._time=this._next=null}An.prototype=ws.prototype={constructor:An,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?No():+n)+(t==null?0:+t),!this._next&&Qt!==this&&(Qt?Qt._next=this:Rn=this,Qt=this),this._call=e,this._time=n,uo()},stop:function(){this._call&&(this._call=null,this._time=1/0,uo())}};function ws(e,t,n){var o=new An;return o.restart(e,t,n),o}function Wd(){No(),++Ht;for(var e=Rn,t;e;)(t=xt-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Ht}function vr(){xt=(In=sn.now())+Fn,Ht=Jt=0;try{Wd()}finally{Ht=0,Xd(),xt=0}}function Ud(){var e=sn.now(),t=e-In;t>vs&&(Fn-=t,In=e)}function Xd(){for(var e,t=Rn,n,o=1/0;t;)t._call?(o>t._time&&(o=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Rn=n);Qt=e,uo(o)}function uo(e){if(!Ht){Jt&&(Jt=clearTimeout(Jt));var t=e-xt;t>24?(e<1/0&&(Jt=setTimeout(vr,e-sn.now()-Fn)),Yt&&(Yt=clearInterval(Yt))):(Yt||(In=sn.now(),Yt=setInterval(Ud,vs)),Ht=1,bs(vr))}}function br(e,t,n){var o=new An;return t=t==null?0:+t,o.restart(r=>{o.stop(),e(r+t)},t,n),o}var Yd=Bn("start","end","cancel","interrupt"),Gd=[],Cs=0,wr=1,fo=2,_n=3,Cr=4,po=5,Sn=6;function Wn(e,t,n,o,r,s){var i=e.__transition;if(!i)e.__transition={};else if(n in i)return;qd(e,n,{name:t,index:o,group:r,on:Yd,tween:Gd,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Cs})}function jo(e,t){var n=Oe(e,t);if(n.state>Cs)throw new Error("too late; already scheduled");return n}function We(e,t){var n=Oe(e,t);if(n.state>_n)throw new Error("too late; already running");return n}function Oe(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function qd(e,t,n){var o=e.__transition,r;o[t]=n,n.timer=ws(s,0,n.time);function s(u){n.state=wr,n.timer.restart(i,n.delay,n.time),n.delay<=u&&i(u-n.delay)}function i(u){var d,f,p,h;if(n.state!==wr)return c();for(d in o)if(h=o[d],h.name===n.name){if(h.state===_n)return br(i);h.state===Cr?(h.state=Sn,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete o[d]):+d<t&&(h.state=Sn,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete o[d])}if(br(function(){n.state===_n&&(n.state=Cr,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=fo,n.on.call("start",e,e.__data__,n.index,n.group),n.state===fo){for(n.state=_n,r=new Array(p=n.tween.length),d=0,f=-1;d<p;++d)(h=n.tween[d].value.call(e,e.__data__,n.index,n.group))&&(r[++f]=h);r.length=f+1}}function a(u){for(var d=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(c),n.state=po,1),f=-1,p=r.length;++f<p;)r[f].call(e,d);n.state===po&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){n.state=Sn,n.timer.stop(),delete o[t];for(var u in o)return;delete e.__transition}}function En(e,t){var n=e.__transition,o,r,s=!0,i;if(n){t=t==null?null:t+"";for(i in n){if((o=n[i]).name!==t){s=!1;continue}r=o.state>fo&&o.state<po,o.state=Sn,o.timer.stop(),o.on.call(r?"interrupt":"cancel",e,e.__data__,o.index,o.group),delete n[i]}s&&delete e.__transition}}function Kd(e){return this.each(function(){En(this,e)})}function Zd(e,t){var n,o;return function(){var r=We(this,e),s=r.tween;if(s!==n){o=n=s;for(var i=0,a=o.length;i<a;++i)if(o[i].name===t){o=o.slice(),o.splice(i,1);break}}r.tween=o}}function Jd(e,t,n){var o,r;if(typeof n!="function")throw new Error;return function(){var s=We(this,e),i=s.tween;if(i!==o){r=(o=i).slice();for(var a={name:t,value:n},c=0,u=r.length;c<u;++c)if(r[c].name===t){r[c]=a;break}c===u&&r.push(a)}s.tween=r}}function Qd(e,t){var n=this._id;if(e+="",arguments.length<2){for(var o=Oe(this.node(),n).tween,r=0,s=o.length,i;r<s;++r)if((i=o[r]).name===e)return i.value;return null}return this.each((t==null?Zd:Jd)(n,e,t))}function ko(e,t,n){var o=e._id;return e.each(function(){var r=We(this,o);(r.value||(r.value={}))[t]=n.apply(this,arguments)}),function(r){return Oe(r,o).value[t]}}function _s(e,t){var n;return(typeof t=="number"?gt:t instanceof Go?Yo:(n=Go(t))?(t=n,Yo):oa)(e,t)}function ef(e){return function(){this.removeAttribute(e)}}function tf(e){return function(){this.removeAttributeNS(e.space,e.local)}}function nf(e,t,n){var o,r=n+"",s;return function(){var i=this.getAttribute(e);return i===r?null:i===o?s:s=t(o=i,n)}}function of(e,t,n){var o,r=n+"",s;return function(){var i=this.getAttributeNS(e.space,e.local);return i===r?null:i===o?s:s=t(o=i,n)}}function rf(e,t,n){var o,r,s;return function(){var i,a=n(this),c;return a==null?void this.removeAttribute(e):(i=this.getAttribute(e),c=a+"",i===c?null:i===o&&c===r?s:(r=c,s=t(o=i,a)))}}function sf(e,t,n){var o,r,s;return function(){var i,a=n(this),c;return a==null?void this.removeAttributeNS(e.space,e.local):(i=this.getAttributeNS(e.space,e.local),c=a+"",i===c?null:i===o&&c===r?s:(r=c,s=t(o=i,a)))}}function af(e,t){var n=Vn(e),o=n==="transform"?ka:_s;return this.attrTween(e,typeof t=="function"?(n.local?sf:rf)(n,o,ko(this,"attr."+e,t)):t==null?(n.local?tf:ef)(n):(n.local?of:nf)(n,o,t))}function lf(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function cf(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function uf(e,t){var n,o;function r(){var s=t.apply(this,arguments);return s!==o&&(n=(o=s)&&cf(e,s)),n}return r._value=t,r}function df(e,t){var n,o;function r(){var s=t.apply(this,arguments);return s!==o&&(n=(o=s)&&lf(e,s)),n}return r._value=t,r}function ff(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var o=Vn(e);return this.tween(n,(o.local?uf:df)(o,t))}function pf(e,t){return function(){jo(this,e).delay=+t.apply(this,arguments)}}function hf(e,t){return t=+t,function(){jo(this,e).delay=t}}function gf(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?pf:hf)(t,e)):Oe(this.node(),t).delay}function mf(e,t){return function(){We(this,e).duration=+t.apply(this,arguments)}}function yf(e,t){return t=+t,function(){We(this,e).duration=t}}function xf(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?mf:yf)(t,e)):Oe(this.node(),t).duration}function vf(e,t){if(typeof t!="function")throw new Error;return function(){We(this,e).ease=t}}function bf(e){var t=this._id;return arguments.length?this.each(vf(t,e)):Oe(this.node(),t).ease}function wf(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;We(this,e).ease=n}}function Cf(e){if(typeof e!="function")throw new Error;return this.each(wf(this._id,e))}function _f(e){typeof e!="function"&&(e=as(e));for(var t=this._groups,n=t.length,o=new Array(n),r=0;r<n;++r)for(var s=t[r],i=s.length,a=o[r]=[],c,u=0;u<i;++u)(c=s[u])&&e.call(c,c.__data__,u,s)&&a.push(c);return new Ke(o,this._parents,this._name,this._id)}function Sf(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,o=t.length,r=n.length,s=Math.min(o,r),i=new Array(o),a=0;a<s;++a)for(var c=t[a],u=n[a],d=c.length,f=i[a]=new Array(d),p,h=0;h<d;++h)(p=c[h]||u[h])&&(f[h]=p);for(;a<o;++a)i[a]=t[a];return new Ke(i,this._parents,this._name,this._id)}function Ef(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function $f(e,t,n){var o,r,s=Ef(t)?jo:We;return function(){var i=s(this,e),a=i.on;a!==o&&(r=(o=a).copy()).on(t,n),i.on=r}}function Tf(e,t){var n=this._id;return arguments.length<2?Oe(this.node(),n).on.on(e):this.each($f(n,e,t))}function Nf(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function jf(){return this.on("end.remove",Nf(this._id))}function kf(e){var t=this._name,n=this._id;typeof e!="function"&&(e=$o(e));for(var o=this._groups,r=o.length,s=new Array(r),i=0;i<r;++i)for(var a=o[i],c=a.length,u=s[i]=new Array(c),d,f,p=0;p<c;++p)(d=a[p])&&(f=e.call(d,d.__data__,p,a))&&("__data__"in d&&(f.__data__=d.__data__),u[p]=f,Wn(u[p],t,n,p,u,Oe(d,n)));return new Ke(s,this._parents,t,n)}function Mf(e){var t=this._name,n=this._id;typeof e!="function"&&(e=is(e));for(var o=this._groups,r=o.length,s=[],i=[],a=0;a<r;++a)for(var c=o[a],u=c.length,d,f=0;f<u;++f)if(d=c[f]){for(var p=e.call(d,d.__data__,f,c),h,x=Oe(d,n),g=0,b=p.length;g<b;++g)(h=p[g])&&Wn(h,t,n,g,p,x);s.push(p),i.push(d)}return new Ke(s,i,t,n)}var Rf=dn.prototype.constructor;function If(){return new Rf(this._groups,this._parents)}function Af(e,t){var n,o,r;return function(){var s=Ot(this,e),i=(this.style.removeProperty(e),Ot(this,e));return s===i?null:s===n&&i===o?r:r=t(n=s,o=i)}}function Ss(e){return function(){this.style.removeProperty(e)}}function zf(e,t,n){var o,r=n+"",s;return function(){var i=Ot(this,e);return i===r?null:i===o?s:s=t(o=i,n)}}function Pf(e,t,n){var o,r,s;return function(){var i=Ot(this,e),a=n(this),c=a+"";return a==null&&(c=a=(this.style.removeProperty(e),Ot(this,e))),i===c?null:i===o&&c===r?s:(r=c,s=t(o=i,a))}}function Df(e,t){var n,o,r,s="style."+t,i="end."+s,a;return function(){var c=We(this,e),u=c.on,d=c.value[s]==null?a||(a=Ss(t)):void 0;(u!==n||r!==d)&&(o=(n=u).copy()).on(i,r=d),c.on=o}}function Lf(e,t,n){var o=(e+="")=="transform"?ja:_s;return t==null?this.styleTween(e,Af(e,o)).on("end.style."+e,Ss(e)):typeof t=="function"?this.styleTween(e,Pf(e,o,ko(this,"style."+e,t))).each(Df(this._id,e)):this.styleTween(e,zf(e,o,t),n).on("end.style."+e,null)}function Of(e,t,n){return function(o){this.style.setProperty(e,t.call(this,o),n)}}function Hf(e,t,n){var o,r;function s(){var i=t.apply(this,arguments);return i!==r&&(o=(r=i)&&Of(e,i,n)),o}return s._value=t,s}function Bf(e,t,n){var o="style."+(e+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(t==null)return this.tween(o,null);if(typeof t!="function")throw new Error;return this.tween(o,Hf(e,t,n??""))}function Vf(e){return function(){this.textContent=e}}function Ff(e){return function(){var t=e(this);this.textContent=t??""}}function Wf(e){return this.tween("text",typeof e=="function"?Ff(ko(this,"text",e)):Vf(e==null?"":e+""))}function Uf(e){return function(t){this.textContent=e.call(this,t)}}function Xf(e){var t,n;function o(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&Uf(r)),t}return o._value=e,o}function Yf(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Xf(e))}function Gf(){for(var e=this._name,t=this._id,n=Es(),o=this._groups,r=o.length,s=0;s<r;++s)for(var i=o[s],a=i.length,c,u=0;u<a;++u)if(c=i[u]){var d=Oe(c,t);Wn(c,e,n,u,i,{time:d.time+d.delay+d.duration,delay:0,duration:d.duration,ease:d.ease})}return new Ke(o,this._parents,e,n)}function qf(){var e,t,n=this,o=n._id,r=n.size();return new Promise(function(s,i){var a={value:i},c={value:function(){--r===0&&s()}};n.each(function(){var u=We(this,o),d=u.on;d!==e&&(t=(e=d).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(c)),u.on=t}),r===0&&s()})}var Kf=0;function Ke(e,t,n,o){this._groups=e,this._parents=t,this._name=n,this._id=o}function Es(){return++Kf}var Ge=dn.prototype;Ke.prototype={constructor:Ke,select:kf,selectAll:Mf,selectChild:Ge.selectChild,selectChildren:Ge.selectChildren,filter:_f,merge:Sf,selection:If,transition:Gf,call:Ge.call,nodes:Ge.nodes,node:Ge.node,size:Ge.size,empty:Ge.empty,each:Ge.each,on:Tf,attr:af,attrTween:ff,style:Lf,styleTween:Bf,text:Wf,textTween:Yf,remove:jf,tween:Qd,delay:gf,duration:xf,ease:bf,easeVarying:Cf,end:qf,[Symbol.iterator]:Ge[Symbol.iterator]};function Zf(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Jf={time:null,delay:0,duration:250,ease:Zf};function Qf(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function ep(e){var t,n;e instanceof Ke?(t=e._id,e=e._name):(t=Es(),(n=Jf).time=No(),e=e==null?null:e+"");for(var o=this._groups,r=o.length,s=0;s<r;++s)for(var i=o[s],a=i.length,c,u=0;u<a;++u)(c=i[u])&&Wn(c,e,t,u,i,n||Qf(c,t));return new Ke(o,this._parents,e,t)}dn.prototype.interrupt=Kd;dn.prototype.transition=ep;const yn=e=>()=>e;function tp(e,{sourceEvent:t,target:n,transform:o,dispatch:r}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:r}})}function qe(e,t,n){this.k=e,this.x=t,this.y=n}qe.prototype={constructor:qe,scale:function(e){return e===1?this:new qe(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new qe(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var tt=new qe(1,0,0);qe.prototype;function eo(e){e.stopImmediatePropagation()}function Gt(e){e.preventDefault(),e.stopImmediatePropagation()}function np(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function op(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function _r(){return this.__zoom||tt}function rp(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function sp(){return navigator.maxTouchPoints||"ontouchstart"in this}function ip(e,t,n){var o=e.invertX(t[0][0])-n[0][0],r=e.invertX(t[1][0])-n[1][0],s=e.invertY(t[0][1])-n[0][1],i=e.invertY(t[1][1])-n[1][1];return e.translate(r>o?(o+r)/2:Math.min(0,o)||Math.max(0,r),i>s?(s+i)/2:Math.min(0,s)||Math.max(0,i))}function ap(){var e=np,t=op,n=ip,o=rp,r=sp,s=[0,1/0],i=[[-1/0,-1/0],[1/0,1/0]],a=250,c=Aa,u=Bn("start","zoom","end"),d,f,p,h=500,x=150,g=0,b=10;function m(y){y.property("__zoom",_r).on("wheel.zoom",M,{passive:!1}).on("mousedown.zoom",T).on("dblclick.zoom",A).filter(r).on("touchstart.zoom",P).on("touchmove.zoom",F).on("touchend.zoom touchcancel.zoom",O).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}m.transform=function(y,$,S,R){var L=y.selection?y.selection():y;L.property("__zoom",_r),y!==L?N(y,$,S,R):L.interrupt().each(function(){I(this,arguments).event(R).start().zoom(null,typeof $=="function"?$.apply(this,arguments):$).end()})},m.scaleBy=function(y,$,S,R){m.scaleTo(y,function(){var L=this.__zoom.k,_=typeof $=="function"?$.apply(this,arguments):$;return L*_},S,R)},m.scaleTo=function(y,$,S,R){m.transform(y,function(){var L=t.apply(this,arguments),_=this.__zoom,z=S==null?C(L):typeof S=="function"?S.apply(this,arguments):S,H=_.invert(z),B=typeof $=="function"?$.apply(this,arguments):$;return n(E(w(_,B),z,H),L,i)},S,R)},m.translateBy=function(y,$,S,R){m.transform(y,function(){return n(this.__zoom.translate(typeof $=="function"?$.apply(this,arguments):$,typeof S=="function"?S.apply(this,arguments):S),t.apply(this,arguments),i)},null,R)},m.translateTo=function(y,$,S,R,L){m.transform(y,function(){var _=t.apply(this,arguments),z=this.__zoom,H=R==null?C(_):typeof R=="function"?R.apply(this,arguments):R;return n(tt.translate(H[0],H[1]).scale(z.k).translate(typeof $=="function"?-$.apply(this,arguments):-$,typeof S=="function"?-S.apply(this,arguments):-S),_,i)},R,L)};function w(y,$){return $=Math.max(s[0],Math.min(s[1],$)),$===y.k?y:new qe($,y.x,y.y)}function E(y,$,S){var R=$[0]-S[0]*y.k,L=$[1]-S[1]*y.k;return R===y.x&&L===y.y?y:new qe(y.k,R,L)}function C(y){return[(+y[0][0]+ +y[1][0])/2,(+y[0][1]+ +y[1][1])/2]}function N(y,$,S,R){y.on("start.zoom",function(){I(this,arguments).event(R).start()}).on("interrupt.zoom end.zoom",function(){I(this,arguments).event(R).end()}).tween("zoom",function(){var L=this,_=arguments,z=I(L,_).event(R),H=t.apply(L,_),B=S==null?C(H):typeof S=="function"?S.apply(L,_):S,X=Math.max(H[1][0]-H[0][0],H[1][1]-H[0][1]),U=L.__zoom,Z=typeof $=="function"?$.apply(L,_):$,V=c(U.invert(B).concat(X/U.k),Z.invert(B).concat(X/Z.k));return function(J){if(J===1)J=Z;else{var re=V(J),me=X/re[2];J=new qe(me,B[0]-re[0]*me,B[1]-re[1]*me)}z.zoom(null,J)}})}function I(y,$,S){return!S&&y.__zooming||new j(y,$)}function j(y,$){this.that=y,this.args=$,this.active=0,this.sourceEvent=null,this.extent=t.apply(y,$),this.taps=0}j.prototype={event:function(y){return y&&(this.sourceEvent=y),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(y,$){return this.mouse&&y!=="mouse"&&(this.mouse[1]=$.invert(this.mouse[0])),this.touch0&&y!=="touch"&&(this.touch0[1]=$.invert(this.touch0[0])),this.touch1&&y!=="touch"&&(this.touch1[1]=$.invert(this.touch1[0])),this.that.__zoom=$,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(y){var $=De(this.that).datum();u.call(y,this.that,new tp(y,{sourceEvent:this.sourceEvent,target:m,transform:this.that.__zoom,dispatch:u}),$)}};function M(y,...$){if(!e.apply(this,arguments))return;var S=I(this,$).event(y),R=this.__zoom,L=Math.max(s[0],Math.min(s[1],R.k*Math.pow(2,o.apply(this,arguments)))),_=Fe(y);if(S.wheel)(S.mouse[0][0]!==_[0]||S.mouse[0][1]!==_[1])&&(S.mouse[1]=R.invert(S.mouse[0]=_)),clearTimeout(S.wheel);else{if(R.k===L)return;S.mouse=[_,R.invert(_)],En(this),S.start()}Gt(y),S.wheel=setTimeout(z,x),S.zoom("mouse",n(E(w(R,L),S.mouse[0],S.mouse[1]),S.extent,i));function z(){S.wheel=null,S.end()}}function T(y,...$){if(p||!e.apply(this,arguments))return;var S=y.currentTarget,R=I(this,$,!0).event(y),L=De(y.view).on("mousemove.zoom",B,!0).on("mouseup.zoom",X,!0),_=Fe(y,S),z=y.clientX,H=y.clientY;ys(y.view),eo(y),R.mouse=[_,this.__zoom.invert(_)],En(this),R.start();function B(U){if(Gt(U),!R.moved){var Z=U.clientX-z,V=U.clientY-H;R.moved=Z*Z+V*V>g}R.event(U).zoom("mouse",n(E(R.that.__zoom,R.mouse[0]=Fe(U,S),R.mouse[1]),R.extent,i))}function X(U){L.on("mousemove.zoom mouseup.zoom",null),xs(U.view,R.moved),Gt(U),R.event(U).end()}}function A(y,...$){if(e.apply(this,arguments)){var S=this.__zoom,R=Fe(y.changedTouches?y.changedTouches[0]:y,this),L=S.invert(R),_=S.k*(y.shiftKey?.5:2),z=n(E(w(S,_),R,L),t.apply(this,$),i);Gt(y),a>0?De(this).transition().duration(a).call(N,z,R,y):De(this).call(m.transform,z,R,y)}}function P(y,...$){if(e.apply(this,arguments)){var S=y.touches,R=S.length,L=I(this,$,y.changedTouches.length===R).event(y),_,z,H,B;for(eo(y),z=0;z<R;++z)H=S[z],B=Fe(H,this),B=[B,this.__zoom.invert(B),H.identifier],L.touch0?!L.touch1&&L.touch0[2]!==B[2]&&(L.touch1=B,L.taps=0):(L.touch0=B,_=!0,L.taps=1+!!d);d&&(d=clearTimeout(d)),_&&(L.taps<2&&(f=B[0],d=setTimeout(function(){d=null},h)),En(this),L.start())}}function F(y,...$){if(this.__zooming){var S=I(this,$).event(y),R=y.changedTouches,L=R.length,_,z,H,B;for(Gt(y),_=0;_<L;++_)z=R[_],H=Fe(z,this),S.touch0&&S.touch0[2]===z.identifier?S.touch0[0]=H:S.touch1&&S.touch1[2]===z.identifier&&(S.touch1[0]=H);if(z=S.that.__zoom,S.touch1){var X=S.touch0[0],U=S.touch0[1],Z=S.touch1[0],V=S.touch1[1],J=(J=Z[0]-X[0])*J+(J=Z[1]-X[1])*J,re=(re=V[0]-U[0])*re+(re=V[1]-U[1])*re;z=w(z,Math.sqrt(J/re)),H=[(X[0]+Z[0])/2,(X[1]+Z[1])/2],B=[(U[0]+V[0])/2,(U[1]+V[1])/2]}else if(S.touch0)H=S.touch0[0],B=S.touch0[1];else return;S.zoom("touch",n(E(z,H,B),S.extent,i))}}function O(y,...$){if(this.__zooming){var S=I(this,$).event(y),R=y.changedTouches,L=R.length,_,z;for(eo(y),p&&clearTimeout(p),p=setTimeout(function(){p=null},h),_=0;_<L;++_)z=R[_],S.touch0&&S.touch0[2]===z.identifier?delete S.touch0:S.touch1&&S.touch1[2]===z.identifier&&delete S.touch1;if(S.touch1&&!S.touch0&&(S.touch0=S.touch1,delete S.touch1),S.touch0)S.touch0[1]=this.__zoom.invert(S.touch0[0]);else if(S.end(),S.taps===2&&(z=Fe(z,this),Math.hypot(f[0]-z[0],f[1]-z[1])<b)){var H=De(this).on("dblclick.zoom");H&&H.apply(this,arguments)}}}return m.wheelDelta=function(y){return arguments.length?(o=typeof y=="function"?y:yn(+y),m):o},m.filter=function(y){return arguments.length?(e=typeof y=="function"?y:yn(!!y),m):e},m.touchable=function(y){return arguments.length?(r=typeof y=="function"?y:yn(!!y),m):r},m.extent=function(y){return arguments.length?(t=typeof y=="function"?y:yn([[+y[0][0],+y[0][1]],[+y[1][0],+y[1][1]]]),m):t},m.scaleExtent=function(y){return arguments.length?(s[0]=+y[0],s[1]=+y[1],m):[s[0],s[1]]},m.translateExtent=function(y){return arguments.length?(i[0][0]=+y[0][0],i[1][0]=+y[1][0],i[0][1]=+y[0][1],i[1][1]=+y[1][1],m):[[i[0][0],i[0][1]],[i[1][0],i[1][1]]]},m.constrain=function(y){return arguments.length?(n=y,m):n},m.duration=function(y){return arguments.length?(a=+y,m):a},m.interpolate=function(y){return arguments.length?(c=y,m):c},m.on=function(){var y=u.on.apply(u,arguments);return y===u?m:y},m.clickDistance=function(y){return arguments.length?(g=(y=+y)*y,m):Math.sqrt(g)},m.tapDistance=function(y){return arguments.length?(b=+y,m):b},m}const Un=v.createContext(null),lp=Un.Provider,Ze={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,t)=>`Couldn't create edge for ${e?"target":"source"} handle id: "${e?t.targetHandle:t.sourceHandle}", edge id: ${t.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},$s=Ze.error001();function ge(e,t){const n=v.useContext(Un);if(n===null)throw new Error($s);return rs(n,e,t)}const be=()=>{const e=v.useContext(Un);if(e===null)throw new Error($s);return v.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe,destroy:e.destroy}),[e])},cp=e=>e.userSelectionActive?"none":"all";function Ts({position:e,children:t,className:n,style:o,...r}){const s=ge(cp),i=`${e}`.split("-");return k.createElement("div",{className:Se(["react-flow__panel",n,...i]),style:{...o,pointerEvents:s},...r},t)}function up({proOptions:e,position:t="bottom-right"}){return e!=null&&e.hideAttribution?null:k.createElement(Ts,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://reactflow.dev/pro"},k.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const dp=({x:e,y:t,label:n,labelStyle:o={},labelShowBg:r=!0,labelBgStyle:s={},labelBgPadding:i=[2,4],labelBgBorderRadius:a=2,children:c,className:u,...d})=>{const f=v.useRef(null),[p,h]=v.useState({x:0,y:0,width:0,height:0}),x=Se(["react-flow__edge-textwrapper",u]);return v.useEffect(()=>{if(f.current){const g=f.current.getBBox();h({x:g.x,y:g.y,width:g.width,height:g.height})}},[n]),typeof n>"u"||!n?null:k.createElement("g",{transform:`translate(${e-p.width/2} ${t-p.height/2})`,className:x,visibility:p.width?"visible":"hidden",...d},r&&k.createElement("rect",{width:p.width+2*i[0],x:-i[0],y:-i[1],height:p.height+2*i[1],className:"react-flow__edge-textbg",style:s,rx:a,ry:a}),k.createElement("text",{className:"react-flow__edge-text",y:p.height/2,dy:"0.3em",ref:f,style:o},n),c)};var fp=v.memo(dp);const Mo=e=>({width:e.offsetWidth,height:e.offsetHeight}),Bt=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Ro=(e={x:0,y:0},t)=>({x:Bt(e.x,t[0][0],t[1][0]),y:Bt(e.y,t[0][1],t[1][1])}),Sr=(e,t,n)=>e<t?Bt(Math.abs(e-t),1,50)/50:e>n?-Bt(Math.abs(e-n),1,50)/50:0,Ns=(e,t)=>{const n=Sr(e.x,35,t.width-35)*20,o=Sr(e.y,35,t.height-35)*20;return[n,o]},js=e=>{var t;return((t=e.getRootNode)==null?void 0:t.call(e))||(window==null?void 0:window.document)},pp=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Io=({x:e,y:t,width:n,height:o})=>({x:e,y:t,x2:e+n,y2:t+o}),hp=({x:e,y:t,x2:n,y2:o})=>({x:e,y:t,width:n-e,height:o-t}),Er=e=>({...e.positionAbsolute||{x:0,y:0},width:e.width||0,height:e.height||0}),ho=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),o=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*o)},gp=e=>Ie(e.width)&&Ie(e.height)&&Ie(e.x)&&Ie(e.y),Ie=e=>!isNaN(e)&&isFinite(e),ye=Symbol.for("internals"),ks=["Enter"," ","Escape"],mp=(e,t)=>{},yp=e=>"nativeEvent"in e;function go(e){var r,s;const t=yp(e)?e.nativeEvent:e,n=((s=(r=t.composedPath)==null?void 0:r.call(t))==null?void 0:s[0])||e.target;return["INPUT","SELECT","TEXTAREA"].includes(n==null?void 0:n.nodeName)||(n==null?void 0:n.hasAttribute("contenteditable"))||!!(n!=null&&n.closest(".nokey"))}const Ms=e=>"clientX"in e,nt=(e,t)=>{var s,i;const n=Ms(e),o=n?e.clientX:(s=e.touches)==null?void 0:s[0].clientX,r=n?e.clientY:(i=e.touches)==null?void 0:i[0].clientY;return{x:o-((t==null?void 0:t.left)??0),y:r-((t==null?void 0:t.top)??0)}},zn=()=>{var e;return typeof navigator<"u"&&((e=navigator==null?void 0:navigator.userAgent)==null?void 0:e.indexOf("Mac"))>=0},fn=({id:e,path:t,labelX:n,labelY:o,label:r,labelStyle:s,labelShowBg:i,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:p,interactionWidth:h=20})=>k.createElement(k.Fragment,null,k.createElement("path",{id:e,style:d,d:t,fill:"none",className:"react-flow__edge-path",markerEnd:f,markerStart:p}),h&&k.createElement("path",{d:t,fill:"none",strokeOpacity:0,strokeWidth:h,className:"react-flow__edge-interaction"}),r&&Ie(n)&&Ie(o)?k.createElement(fp,{x:n,y:o,label:r,labelStyle:s,labelShowBg:i,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u}):null);fn.displayName="BaseEdge";function qt(e,t,n){return n===void 0?n:o=>{const r=t().edges.find(s=>s.id===e);r&&n(o,{...r})}}function Rs({sourceX:e,sourceY:t,targetX:n,targetY:o}){const r=Math.abs(n-e)/2,s=n<e?n+r:n-r,i=Math.abs(o-t)/2,a=o<t?o+i:o-i;return[s,a,r,i]}function Is({sourceX:e,sourceY:t,targetX:n,targetY:o,sourceControlX:r,sourceControlY:s,targetControlX:i,targetControlY:a}){const c=e*.125+r*.375+i*.375+n*.125,u=t*.125+s*.375+a*.375+o*.125,d=Math.abs(c-e),f=Math.abs(u-t);return[c,u,d,f]}var vt;(function(e){e.Strict="strict",e.Loose="loose"})(vt||(vt={}));var yt;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(yt||(yt={}));var an;(function(e){e.Partial="partial",e.Full="full"})(an||(an={}));var et;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(et||(et={}));var ln;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(ln||(ln={}));var G;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(G||(G={}));function $r({pos:e,x1:t,y1:n,x2:o,y2:r}){return e===G.Left||e===G.Right?[.5*(t+o),n]:[t,.5*(n+r)]}function As({sourceX:e,sourceY:t,sourcePosition:n=G.Bottom,targetX:o,targetY:r,targetPosition:s=G.Top}){const[i,a]=$r({pos:n,x1:e,y1:t,x2:o,y2:r}),[c,u]=$r({pos:s,x1:o,y1:r,x2:e,y2:t}),[d,f,p,h]=Is({sourceX:e,sourceY:t,targetX:o,targetY:r,sourceControlX:i,sourceControlY:a,targetControlX:c,targetControlY:u});return[`M${e},${t} C${i},${a} ${c},${u} ${o},${r}`,d,f,p,h]}const Ao=v.memo(({sourceX:e,sourceY:t,targetX:n,targetY:o,sourcePosition:r=G.Bottom,targetPosition:s=G.Top,label:i,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:p,markerEnd:h,markerStart:x,interactionWidth:g})=>{const[b,m,w]=As({sourceX:e,sourceY:t,sourcePosition:r,targetX:n,targetY:o,targetPosition:s});return k.createElement(fn,{path:b,labelX:m,labelY:w,label:i,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:p,markerEnd:h,markerStart:x,interactionWidth:g})});Ao.displayName="SimpleBezierEdge";const Tr={[G.Left]:{x:-1,y:0},[G.Right]:{x:1,y:0},[G.Top]:{x:0,y:-1},[G.Bottom]:{x:0,y:1}},xp=({source:e,sourcePosition:t=G.Bottom,target:n})=>t===G.Left||t===G.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},Nr=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function vp({source:e,sourcePosition:t=G.Bottom,target:n,targetPosition:o=G.Top,center:r,offset:s}){const i=Tr[t],a=Tr[o],c={x:e.x+i.x*s,y:e.y+i.y*s},u={x:n.x+a.x*s,y:n.y+a.y*s},d=xp({source:c,sourcePosition:t,target:u}),f=d.x!==0?"x":"y",p=d[f];let h=[],x,g;const b={x:0,y:0},m={x:0,y:0},[w,E,C,N]=Rs({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(i[f]*a[f]===-1){x=r.x??w,g=r.y??E;const j=[{x,y:c.y},{x,y:u.y}],M=[{x:c.x,y:g},{x:u.x,y:g}];i[f]===p?h=f==="x"?j:M:h=f==="x"?M:j}else{const j=[{x:c.x,y:u.y}],M=[{x:u.x,y:c.y}];if(f==="x"?h=i.x===p?M:j:h=i.y===p?j:M,t===o){const O=Math.abs(e[f]-n[f]);if(O<=s){const y=Math.min(s-1,s-O);i[f]===p?b[f]=(c[f]>e[f]?-1:1)*y:m[f]=(u[f]>n[f]?-1:1)*y}}if(t!==o){const O=f==="x"?"y":"x",y=i[f]===a[O],$=c[O]>u[O],S=c[O]<u[O];(i[f]===1&&(!y&&$||y&&S)||i[f]!==1&&(!y&&S||y&&$))&&(h=f==="x"?j:M)}const T={x:c.x+b.x,y:c.y+b.y},A={x:u.x+m.x,y:u.y+m.y},P=Math.max(Math.abs(T.x-h[0].x),Math.abs(A.x-h[0].x)),F=Math.max(Math.abs(T.y-h[0].y),Math.abs(A.y-h[0].y));P>=F?(x=(T.x+A.x)/2,g=h[0].y):(x=h[0].x,g=(T.y+A.y)/2)}return[[e,{x:c.x+b.x,y:c.y+b.y},...h,{x:u.x+m.x,y:u.y+m.y},n],x,g,C,N]}function bp(e,t,n,o){const r=Math.min(Nr(e,t)/2,Nr(t,n)/2,o),{x:s,y:i}=t;if(e.x===s&&s===n.x||e.y===i&&i===n.y)return`L${s} ${i}`;if(e.y===i){const u=e.x<n.x?-1:1,d=e.y<n.y?1:-1;return`L ${s+r*u},${i}Q ${s},${i} ${s},${i+r*d}`}const a=e.x<n.x?1:-1,c=e.y<n.y?-1:1;return`L ${s},${i+r*c}Q ${s},${i} ${s+r*a},${i}`}function mo({sourceX:e,sourceY:t,sourcePosition:n=G.Bottom,targetX:o,targetY:r,targetPosition:s=G.Top,borderRadius:i=5,centerX:a,centerY:c,offset:u=20}){const[d,f,p,h,x]=vp({source:{x:e,y:t},sourcePosition:n,target:{x:o,y:r},targetPosition:s,center:{x:a,y:c},offset:u});return[d.reduce((b,m,w)=>{let E="";return w>0&&w<d.length-1?E=bp(d[w-1],m,d[w+1],i):E=`${w===0?"M":"L"}${m.x} ${m.y}`,b+=E,b},""),f,p,h,x]}const Xn=v.memo(({sourceX:e,sourceY:t,targetX:n,targetY:o,label:r,labelStyle:s,labelShowBg:i,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u,style:d,sourcePosition:f=G.Bottom,targetPosition:p=G.Top,markerEnd:h,markerStart:x,pathOptions:g,interactionWidth:b})=>{const[m,w,E]=mo({sourceX:e,sourceY:t,sourcePosition:f,targetX:n,targetY:o,targetPosition:p,borderRadius:g==null?void 0:g.borderRadius,offset:g==null?void 0:g.offset});return k.createElement(fn,{path:m,labelX:w,labelY:E,label:r,labelStyle:s,labelShowBg:i,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:h,markerStart:x,interactionWidth:b})});Xn.displayName="SmoothStepEdge";const zo=v.memo(e=>{var t;return k.createElement(Xn,{...e,pathOptions:v.useMemo(()=>{var n;return{borderRadius:0,offset:(n=e.pathOptions)==null?void 0:n.offset}},[(t=e.pathOptions)==null?void 0:t.offset])})});zo.displayName="StepEdge";function wp({sourceX:e,sourceY:t,targetX:n,targetY:o}){const[r,s,i,a]=Rs({sourceX:e,sourceY:t,targetX:n,targetY:o});return[`M ${e},${t}L ${n},${o}`,r,s,i,a]}const Po=v.memo(({sourceX:e,sourceY:t,targetX:n,targetY:o,label:r,labelStyle:s,labelShowBg:i,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:p,interactionWidth:h})=>{const[x,g,b]=wp({sourceX:e,sourceY:t,targetX:n,targetY:o});return k.createElement(fn,{path:x,labelX:g,labelY:b,label:r,labelStyle:s,labelShowBg:i,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u,style:d,markerEnd:f,markerStart:p,interactionWidth:h})});Po.displayName="StraightEdge";function xn(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function jr({pos:e,x1:t,y1:n,x2:o,y2:r,c:s}){switch(e){case G.Left:return[t-xn(t-o,s),n];case G.Right:return[t+xn(o-t,s),n];case G.Top:return[t,n-xn(n-r,s)];case G.Bottom:return[t,n+xn(r-n,s)]}}function zs({sourceX:e,sourceY:t,sourcePosition:n=G.Bottom,targetX:o,targetY:r,targetPosition:s=G.Top,curvature:i=.25}){const[a,c]=jr({pos:n,x1:e,y1:t,x2:o,y2:r,c:i}),[u,d]=jr({pos:s,x1:o,y1:r,x2:e,y2:t,c:i}),[f,p,h,x]=Is({sourceX:e,sourceY:t,targetX:o,targetY:r,sourceControlX:a,sourceControlY:c,targetControlX:u,targetControlY:d});return[`M${e},${t} C${a},${c} ${u},${d} ${o},${r}`,f,p,h,x]}const Pn=v.memo(({sourceX:e,sourceY:t,targetX:n,targetY:o,sourcePosition:r=G.Bottom,targetPosition:s=G.Top,label:i,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:p,markerEnd:h,markerStart:x,pathOptions:g,interactionWidth:b})=>{const[m,w,E]=zs({sourceX:e,sourceY:t,sourcePosition:r,targetX:n,targetY:o,targetPosition:s,curvature:g==null?void 0:g.curvature});return k.createElement(fn,{path:m,labelX:w,labelY:E,label:i,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:d,labelBgBorderRadius:f,style:p,markerEnd:h,markerStart:x,interactionWidth:b})});Pn.displayName="BezierEdge";const Do=v.createContext(null),Cp=Do.Provider;Do.Consumer;const _p=()=>v.useContext(Do),Sp=e=>"id"in e&&"source"in e&&"target"in e,Ep=({source:e,sourceHandle:t,target:n,targetHandle:o})=>`reactflow__edge-${e}${t||""}-${n}${o||""}`,yo=(e,t)=>typeof e>"u"?"":typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(o=>`${o}=${e[o]}`).join("&")}`,$p=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),Ps=(e,t)=>{if(!e.source||!e.target)return t;let n;return Sp(e)?n={...e}:n={...e,id:Ep(e)},$p(n,t)?t:t.concat(n)},xo=({x:e,y:t},[n,o,r],s,[i,a])=>{const c={x:(e-n)/r,y:(t-o)/r};return s?{x:i*Math.round(c.x/i),y:a*Math.round(c.y/a)}:c},Ds=({x:e,y:t},[n,o,r])=>({x:e*r+n,y:t*r+o}),At=(e,t=[0,0])=>{if(!e)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(e.width??0)*t[0],o=(e.height??0)*t[1],r={x:e.position.x-n,y:e.position.y-o};return{...r,positionAbsolute:e.positionAbsolute?{x:e.positionAbsolute.x-n,y:e.positionAbsolute.y-o}:r}},Lo=(e,t=[0,0])=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((o,r)=>{const{x:s,y:i}=At(r,t).positionAbsolute;return pp(o,Io({x:s,y:i,width:r.width||0,height:r.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return hp(n)},Ls=(e,t,[n,o,r]=[0,0,1],s=!1,i=!1,a=[0,0])=>{const c={x:(t.x-n)/r,y:(t.y-o)/r,width:t.width/r,height:t.height/r},u=[];return e.forEach(d=>{const{width:f,height:p,selectable:h=!0,hidden:x=!1}=d;if(i&&!h||x)return!1;const{positionAbsolute:g}=At(d,a),b={x:g.x,y:g.y,width:f||0,height:p||0},m=ho(c,b),w=typeof f>"u"||typeof p>"u"||f===null||p===null,E=s&&m>0,C=(f||0)*(p||0);(w||E||m>=C||d.dragging)&&u.push(d)}),u},Os=(e,t)=>{const n=e.map(o=>o.id);return t.filter(o=>n.includes(o.source)||n.includes(o.target))},Hs=(e,t,n,o,r,s=.1)=>{const i=t/(e.width*(1+s)),a=n/(e.height*(1+s)),c=Math.min(i,a),u=Bt(c,o,r),d=e.x+e.width/2,f=e.y+e.height/2,p=t/2-d*u,h=n/2-f*u;return{x:p,y:h,zoom:u}},mt=(e,t=0)=>e.transition().duration(t);function kr(e,t,n,o){return(t[n]||[]).reduce((r,s)=>{var i,a;return`${e.id}-${s.id}-${n}`!==o&&r.push({id:s.id||null,type:n,nodeId:e.id,x:(((i=e.positionAbsolute)==null?void 0:i.x)??0)+s.x+s.width/2,y:(((a=e.positionAbsolute)==null?void 0:a.y)??0)+s.y+s.height/2}),r},[])}function Tp(e,t,n,o,r,s){const{x:i,y:a}=nt(e),u=t.elementsFromPoint(i,a).find(x=>x.classList.contains("react-flow__handle"));if(u){const x=u.getAttribute("data-nodeid");if(x){const g=Oo(void 0,u),b=u.getAttribute("data-handleid"),m=s({nodeId:x,id:b,type:g});if(m){const w=r.find(E=>E.nodeId===x&&E.type===g&&E.id===b);return{handle:{id:b,type:g,nodeId:x,x:(w==null?void 0:w.x)||n.x,y:(w==null?void 0:w.y)||n.y},validHandleResult:m}}}}let d=[],f=1/0;if(r.forEach(x=>{const g=Math.sqrt((x.x-n.x)**2+(x.y-n.y)**2);if(g<=o){const b=s(x);g<=f&&(g<f?d=[{handle:x,validHandleResult:b}]:g===f&&d.push({handle:x,validHandleResult:b}),f=g)}}),!d.length)return{handle:null,validHandleResult:Bs()};if(d.length===1)return d[0];const p=d.some(({validHandleResult:x})=>x.isValid),h=d.some(({handle:x})=>x.type==="target");return d.find(({handle:x,validHandleResult:g})=>h?x.type==="target":p?g.isValid:!0)||d[0]}const Np={source:null,target:null,sourceHandle:null,targetHandle:null},Bs=()=>({handleDomNode:null,isValid:!1,connection:Np,endHandle:null});function Vs(e,t,n,o,r,s,i){const a=r==="target",c=i.querySelector(`.react-flow__handle[data-id="${e==null?void 0:e.nodeId}-${e==null?void 0:e.id}-${e==null?void 0:e.type}"]`),u={...Bs(),handleDomNode:c};if(c){const d=Oo(void 0,c),f=c.getAttribute("data-nodeid"),p=c.getAttribute("data-handleid"),h=c.classList.contains("connectable"),x=c.classList.contains("connectableend"),g={source:a?f:n,sourceHandle:a?p:o,target:a?n:f,targetHandle:a?o:p};u.connection=g,h&&x&&(t===vt.Strict?a&&d==="source"||!a&&d==="target":f!==n||p!==o)&&(u.endHandle={nodeId:f,handleId:p,type:d},u.isValid=s(g))}return u}function jp({nodes:e,nodeId:t,handleId:n,handleType:o}){return e.reduce((r,s)=>{if(s[ye]){const{handleBounds:i}=s[ye];let a=[],c=[];i&&(a=kr(s,i,"source",`${t}-${n}-${o}`),c=kr(s,i,"target",`${t}-${n}-${o}`)),r.push(...a,...c)}return r},[])}function Oo(e,t){return e||(t!=null&&t.classList.contains("target")?"target":t!=null&&t.classList.contains("source")?"source":null)}function to(e){e==null||e.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function kp(e,t){let n=null;return t?n="valid":e&&!t&&(n="invalid"),n}function Fs({event:e,handleId:t,nodeId:n,onConnect:o,isTarget:r,getState:s,setState:i,isValidConnection:a,edgeUpdaterType:c,onReconnectEnd:u}){const d=js(e.target),{connectionMode:f,domNode:p,autoPanOnConnect:h,connectionRadius:x,onConnectStart:g,panBy:b,getNodes:m,cancelConnection:w}=s();let E=0,C;const{x:N,y:I}=nt(e),j=d==null?void 0:d.elementFromPoint(N,I),M=Oo(c,j),T=p==null?void 0:p.getBoundingClientRect();if(!T||!M)return;let A,P=nt(e,T),F=!1,O=null,y=!1,$=null;const S=jp({nodes:m(),nodeId:n,handleId:t,handleType:M}),R=()=>{if(!h)return;const[z,H]=Ns(P,T);b({x:z,y:H}),E=requestAnimationFrame(R)};i({connectionPosition:P,connectionStatus:null,connectionNodeId:n,connectionHandleId:t,connectionHandleType:M,connectionStartHandle:{nodeId:n,handleId:t,type:M},connectionEndHandle:null}),g==null||g(e,{nodeId:n,handleId:t,handleType:M});function L(z){const{transform:H}=s();P=nt(z,T);const{handle:B,validHandleResult:X}=Tp(z,d,xo(P,H,!1,[1,1]),x,S,U=>Vs(U,f,n,t,r?"target":"source",a,d));if(C=B,F||(R(),F=!0),$=X.handleDomNode,O=X.connection,y=X.isValid,i({connectionPosition:C&&y?Ds({x:C.x,y:C.y},H):P,connectionStatus:kp(!!C,y),connectionEndHandle:X.endHandle}),!C&&!y&&!$)return to(A);O.source!==O.target&&$&&(to(A),A=$,$.classList.add("connecting","react-flow__handle-connecting"),$.classList.toggle("valid",y),$.classList.toggle("react-flow__handle-valid",y))}function _(z){var H,B;(C||$)&&O&&y&&(o==null||o(O)),(B=(H=s()).onConnectEnd)==null||B.call(H,z),c&&(u==null||u(z)),to(A),w(),cancelAnimationFrame(E),F=!1,y=!1,O=null,$=null,d.removeEventListener("mousemove",L),d.removeEventListener("mouseup",_),d.removeEventListener("touchmove",L),d.removeEventListener("touchend",_)}d.addEventListener("mousemove",L),d.addEventListener("mouseup",_),d.addEventListener("touchmove",L),d.addEventListener("touchend",_)}const Mr=()=>!0,Mp=e=>({connectionStartHandle:e.connectionStartHandle,connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName}),Rp=(e,t,n)=>o=>{const{connectionStartHandle:r,connectionEndHandle:s,connectionClickStartHandle:i}=o;return{connecting:(r==null?void 0:r.nodeId)===e&&(r==null?void 0:r.handleId)===t&&(r==null?void 0:r.type)===n||(s==null?void 0:s.nodeId)===e&&(s==null?void 0:s.handleId)===t&&(s==null?void 0:s.type)===n,clickConnecting:(i==null?void 0:i.nodeId)===e&&(i==null?void 0:i.handleId)===t&&(i==null?void 0:i.type)===n}},Ws=v.forwardRef(({type:e="source",position:t=G.Top,isValidConnection:n,isConnectable:o=!0,isConnectableStart:r=!0,isConnectableEnd:s=!0,id:i,onConnect:a,children:c,className:u,onMouseDown:d,onTouchStart:f,...p},h)=>{var T,A;const x=i||null,g=e==="target",b=be(),m=_p(),{connectOnClick:w,noPanClassName:E}=ge(Mp,Ce),{connecting:C,clickConnecting:N}=ge(Rp(m,x,e),Ce);m||(A=(T=b.getState()).onError)==null||A.call(T,"010",Ze.error010());const I=P=>{const{defaultEdgeOptions:F,onConnect:O,hasDefaultEdges:y}=b.getState(),$={...F,...P};if(y){const{edges:S,setEdges:R}=b.getState();R(Ps($,S))}O==null||O($),a==null||a($)},j=P=>{if(!m)return;const F=Ms(P);r&&(F&&P.button===0||!F)&&Fs({event:P,handleId:x,nodeId:m,onConnect:I,isTarget:g,getState:b.getState,setState:b.setState,isValidConnection:n||b.getState().isValidConnection||Mr}),F?d==null||d(P):f==null||f(P)},M=P=>{const{onClickConnectStart:F,onClickConnectEnd:O,connectionClickStartHandle:y,connectionMode:$,isValidConnection:S}=b.getState();if(!m||!y&&!r)return;if(!y){F==null||F(P,{nodeId:m,handleId:x,handleType:e}),b.setState({connectionClickStartHandle:{nodeId:m,type:e,handleId:x}});return}const R=js(P.target),L=n||S||Mr,{connection:_,isValid:z}=Vs({nodeId:m,id:x,type:e},$,y.nodeId,y.handleId||null,y.type,L,R);z&&I(_),O==null||O(P),b.setState({connectionClickStartHandle:null})};return k.createElement("div",{"data-handleid":x,"data-nodeid":m,"data-handlepos":t,"data-id":`${m}-${x}-${e}`,className:Se(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",E,u,{source:!g,target:g,connectable:o,connectablestart:r,connectableend:s,connecting:N,connectionindicator:o&&(r&&!C||s&&C)}]),onMouseDown:j,onTouchStart:j,onClick:w?M:void 0,ref:h,...p},c)});Ws.displayName="Handle";var Dn=v.memo(Ws);const Us=({data:e,isConnectable:t,targetPosition:n=G.Top,sourcePosition:o=G.Bottom})=>k.createElement(k.Fragment,null,k.createElement(Dn,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label,k.createElement(Dn,{type:"source",position:o,isConnectable:t}));Us.displayName="DefaultNode";var vo=v.memo(Us);const Xs=({data:e,isConnectable:t,sourcePosition:n=G.Bottom})=>k.createElement(k.Fragment,null,e==null?void 0:e.label,k.createElement(Dn,{type:"source",position:n,isConnectable:t}));Xs.displayName="InputNode";var Ys=v.memo(Xs);const Gs=({data:e,isConnectable:t,targetPosition:n=G.Top})=>k.createElement(k.Fragment,null,k.createElement(Dn,{type:"target",position:n,isConnectable:t}),e==null?void 0:e.label);Gs.displayName="OutputNode";var qs=v.memo(Gs);const Ho=()=>null;Ho.displayName="GroupNode";const Ip=e=>({selectedNodes:e.getNodes().filter(t=>t.selected),selectedEdges:e.edges.filter(t=>t.selected).map(t=>({...t}))}),vn=e=>e.id;function Ap(e,t){return Ce(e.selectedNodes.map(vn),t.selectedNodes.map(vn))&&Ce(e.selectedEdges.map(vn),t.selectedEdges.map(vn))}const Ks=v.memo(({onSelectionChange:e})=>{const t=be(),{selectedNodes:n,selectedEdges:o}=ge(Ip,Ap);return v.useEffect(()=>{const r={nodes:n,edges:o};e==null||e(r),t.getState().onSelectionChange.forEach(s=>s(r))},[n,o,e]),null});Ks.displayName="SelectionListener";const zp=e=>!!e.onSelectionChange;function Pp({onSelectionChange:e}){const t=ge(zp);return e||t?k.createElement(Ks,{onSelectionChange:e}):null}const Dp=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset});function $t(e,t){v.useEffect(()=>{typeof e<"u"&&t(e)},[e])}function Q(e,t,n){v.useEffect(()=>{typeof t<"u"&&n({[e]:t})},[t])}const Lp=({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,onConnect:r,onConnectStart:s,onConnectEnd:i,onClickConnectStart:a,onClickConnectEnd:c,nodesDraggable:u,nodesConnectable:d,nodesFocusable:f,edgesFocusable:p,edgesUpdatable:h,elevateNodesOnSelect:x,minZoom:g,maxZoom:b,nodeExtent:m,onNodesChange:w,onEdgesChange:E,elementsSelectable:C,connectionMode:N,snapGrid:I,snapToGrid:j,translateExtent:M,connectOnClick:T,defaultEdgeOptions:A,fitView:P,fitViewOptions:F,onNodesDelete:O,onEdgesDelete:y,onNodeDrag:$,onNodeDragStart:S,onNodeDragStop:R,onSelectionDrag:L,onSelectionDragStart:_,onSelectionDragStop:z,noPanClassName:H,nodeOrigin:B,rfId:X,autoPanOnConnect:U,autoPanOnNodeDrag:Z,onError:V,connectionRadius:J,isValidConnection:re,nodeDragThreshold:me})=>{const{setNodes:ue,setEdges:Ae,setDefaultNodesAndEdges:Te,setMinZoom:ze,setMaxZoom:Ne,setTranslateExtent:ve,setNodeExtent:He,reset:de}=ge(Dp,Ce),q=be();return v.useEffect(()=>{const Ee=o==null?void 0:o.map(lt=>({...lt,...A}));return Te(n,Ee),()=>{de()}},[]),Q("defaultEdgeOptions",A,q.setState),Q("connectionMode",N,q.setState),Q("onConnect",r,q.setState),Q("onConnectStart",s,q.setState),Q("onConnectEnd",i,q.setState),Q("onClickConnectStart",a,q.setState),Q("onClickConnectEnd",c,q.setState),Q("nodesDraggable",u,q.setState),Q("nodesConnectable",d,q.setState),Q("nodesFocusable",f,q.setState),Q("edgesFocusable",p,q.setState),Q("edgesUpdatable",h,q.setState),Q("elementsSelectable",C,q.setState),Q("elevateNodesOnSelect",x,q.setState),Q("snapToGrid",j,q.setState),Q("snapGrid",I,q.setState),Q("onNodesChange",w,q.setState),Q("onEdgesChange",E,q.setState),Q("connectOnClick",T,q.setState),Q("fitViewOnInit",P,q.setState),Q("fitViewOnInitOptions",F,q.setState),Q("onNodesDelete",O,q.setState),Q("onEdgesDelete",y,q.setState),Q("onNodeDrag",$,q.setState),Q("onNodeDragStart",S,q.setState),Q("onNodeDragStop",R,q.setState),Q("onSelectionDrag",L,q.setState),Q("onSelectionDragStart",_,q.setState),Q("onSelectionDragStop",z,q.setState),Q("noPanClassName",H,q.setState),Q("nodeOrigin",B,q.setState),Q("rfId",X,q.setState),Q("autoPanOnConnect",U,q.setState),Q("autoPanOnNodeDrag",Z,q.setState),Q("onError",V,q.setState),Q("connectionRadius",J,q.setState),Q("isValidConnection",re,q.setState),Q("nodeDragThreshold",me,q.setState),$t(e,ue),$t(t,Ae),$t(g,ze),$t(b,Ne),$t(M,ve),$t(m,He),null},Rr={display:"none"},Op={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Zs="react-flow__node-desc",Js="react-flow__edge-desc",Hp="react-flow__aria-live",Bp=e=>e.ariaLiveMessage;function Vp({rfId:e}){const t=ge(Bp);return k.createElement("div",{id:`${Hp}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:Op},t)}function Fp({rfId:e,disableKeyboardA11y:t}){return k.createElement(k.Fragment,null,k.createElement("div",{id:`${Zs}-${e}`,style:Rr},"Press enter or space to select a node.",!t&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),k.createElement("div",{id:`${Js}-${e}`,style:Rr},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!t&&k.createElement(Vp,{rfId:e}))}var cn=(e=null,t={actInsideInputWithModifier:!0})=>{const[n,o]=v.useState(!1),r=v.useRef(!1),s=v.useRef(new Set([])),[i,a]=v.useMemo(()=>{if(e!==null){const u=(Array.isArray(e)?e:[e]).filter(f=>typeof f=="string").map(f=>f.split("+")),d=u.reduce((f,p)=>f.concat(...p),[]);return[u,d]}return[[],[]]},[e]);return v.useEffect(()=>{const c=typeof document<"u"?document:null,u=(t==null?void 0:t.target)||c;if(e!==null){const d=h=>{if(r.current=h.ctrlKey||h.metaKey||h.shiftKey,(!r.current||r.current&&!t.actInsideInputWithModifier)&&go(h))return!1;const g=Ar(h.code,a);s.current.add(h[g]),Ir(i,s.current,!1)&&(h.preventDefault(),o(!0))},f=h=>{if((!r.current||r.current&&!t.actInsideInputWithModifier)&&go(h))return!1;const g=Ar(h.code,a);Ir(i,s.current,!0)?(o(!1),s.current.clear()):s.current.delete(h[g]),h.key==="Meta"&&s.current.clear(),r.current=!1},p=()=>{s.current.clear(),o(!1)};return u==null||u.addEventListener("keydown",d),u==null||u.addEventListener("keyup",f),window.addEventListener("blur",p),()=>{u==null||u.removeEventListener("keydown",d),u==null||u.removeEventListener("keyup",f),window.removeEventListener("blur",p)}}},[e,o]),n};function Ir(e,t,n){return e.filter(o=>n||o.length===t.size).some(o=>o.every(r=>t.has(r)))}function Ar(e,t){return t.includes(e)?"code":"key"}function Qs(e,t,n,o){var a,c;const r=e.parentNode||e.parentId;if(!r)return n;const s=t.get(r),i=At(s,o);return Qs(s,t,{x:(n.x??0)+i.x,y:(n.y??0)+i.y,z:(((a=s[ye])==null?void 0:a.z)??0)>(n.z??0)?((c=s[ye])==null?void 0:c.z)??0:n.z??0},o)}function ei(e,t,n){e.forEach(o=>{var s;const r=o.parentNode||o.parentId;if(r&&!e.has(r))throw new Error(`Parent node ${r} not found`);if(r||n!=null&&n[o.id]){const{x:i,y:a,z:c}=Qs(o,e,{...o.position,z:((s=o[ye])==null?void 0:s.z)??0},t);o.positionAbsolute={x:i,y:a},o[ye].z=c,n!=null&&n[o.id]&&(o[ye].isParent=!0)}})}function no(e,t,n,o){const r=new Map,s={},i=o?1e3:0;return e.forEach(a=>{var h;const c=(Ie(a.zIndex)?a.zIndex:0)+(a.selected?i:0),u=t.get(a.id),d={...a,positionAbsolute:{x:a.position.x,y:a.position.y}},f=a.parentNode||a.parentId;f&&(s[f]=!0);const p=(u==null?void 0:u.type)&&(u==null?void 0:u.type)!==a.type;Object.defineProperty(d,ye,{enumerable:!1,value:{handleBounds:p||(h=u==null?void 0:u[ye])==null?void 0:h.handleBounds,z:c}}),r.set(a.id,d)}),ei(r,n,s),r}function ti(e,t={}){const{getNodes:n,width:o,height:r,minZoom:s,maxZoom:i,d3Zoom:a,d3Selection:c,fitViewOnInitDone:u,fitViewOnInit:d,nodeOrigin:f}=e(),p=t.initial&&!u&&d;if(a&&c&&(p||!t.initial)){const x=n().filter(b=>{var w;const m=t.includeHiddenNodes?b.width&&b.height:!b.hidden;return(w=t.nodes)!=null&&w.length?m&&t.nodes.some(E=>E.id===b.id):m}),g=x.every(b=>b.width&&b.height);if(x.length>0&&g){const b=Lo(x,f),{x:m,y:w,zoom:E}=Hs(b,o,r,t.minZoom??s,t.maxZoom??i,t.padding??.1),C=tt.translate(m,w).scale(E);return typeof t.duration=="number"&&t.duration>0?a.transform(mt(c,t.duration),C):a.transform(c,C),!0}}return!1}function Wp(e,t){return e.forEach(n=>{const o=t.get(n.id);o&&t.set(o.id,{...o,[ye]:o[ye],selected:n.selected})}),new Map(t)}function Up(e,t){return t.map(n=>{const o=e.find(r=>r.id===n.id);return o&&(n.selected=o.selected),n})}function bn({changedNodes:e,changedEdges:t,get:n,set:o}){const{nodeInternals:r,edges:s,onNodesChange:i,onEdgesChange:a,hasDefaultNodes:c,hasDefaultEdges:u}=n();e!=null&&e.length&&(c&&o({nodeInternals:Wp(e,r)}),i==null||i(e)),t!=null&&t.length&&(u&&o({edges:Up(t,s)}),a==null||a(t))}const Tt=()=>{},Xp={zoomIn:Tt,zoomOut:Tt,zoomTo:Tt,getZoom:()=>1,setViewport:Tt,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:Tt,fitBounds:Tt,project:e=>e,screenToFlowPosition:e=>e,flowToScreenPosition:e=>e,viewportInitialized:!1},Yp=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection}),Gp=()=>{const e=be(),{d3Zoom:t,d3Selection:n}=ge(Yp,Ce);return v.useMemo(()=>n&&t?{zoomIn:r=>t.scaleBy(mt(n,r==null?void 0:r.duration),1.2),zoomOut:r=>t.scaleBy(mt(n,r==null?void 0:r.duration),1/1.2),zoomTo:(r,s)=>t.scaleTo(mt(n,s==null?void 0:s.duration),r),getZoom:()=>e.getState().transform[2],setViewport:(r,s)=>{const[i,a,c]=e.getState().transform,u=tt.translate(r.x??i,r.y??a).scale(r.zoom??c);t.transform(mt(n,s==null?void 0:s.duration),u)},getViewport:()=>{const[r,s,i]=e.getState().transform;return{x:r,y:s,zoom:i}},fitView:r=>ti(e.getState,r),setCenter:(r,s,i)=>{const{width:a,height:c,maxZoom:u}=e.getState(),d=typeof(i==null?void 0:i.zoom)<"u"?i.zoom:u,f=a/2-r*d,p=c/2-s*d,h=tt.translate(f,p).scale(d);t.transform(mt(n,i==null?void 0:i.duration),h)},fitBounds:(r,s)=>{const{width:i,height:a,minZoom:c,maxZoom:u}=e.getState(),{x:d,y:f,zoom:p}=Hs(r,i,a,c,u,(s==null?void 0:s.padding)??.1),h=tt.translate(d,f).scale(p);t.transform(mt(n,s==null?void 0:s.duration),h)},project:r=>{const{transform:s,snapToGrid:i,snapGrid:a}=e.getState();return console.warn("[DEPRECATED] `project` is deprecated. Instead use `screenToFlowPosition`. There is no need to subtract the react flow bounds anymore! https://reactflow.dev/api-reference/types/react-flow-instance#screen-to-flow-position"),xo(r,s,i,a)},screenToFlowPosition:r=>{const{transform:s,snapToGrid:i,snapGrid:a,domNode:c}=e.getState();if(!c)return r;const{x:u,y:d}=c.getBoundingClientRect(),f={x:r.x-u,y:r.y-d};return xo(f,s,i,a)},flowToScreenPosition:r=>{const{transform:s,domNode:i}=e.getState();if(!i)return r;const{x:a,y:c}=i.getBoundingClientRect(),u=Ds(r,s);return{x:u.x+a,y:u.y+c}},viewportInitialized:!0}:Xp,[t,n])};function Bo(){const e=Gp(),t=be(),n=v.useCallback(()=>t.getState().getNodes().map(g=>({...g})),[]),o=v.useCallback(g=>t.getState().nodeInternals.get(g),[]),r=v.useCallback(()=>{const{edges:g=[]}=t.getState();return g.map(b=>({...b}))},[]),s=v.useCallback(g=>{const{edges:b=[]}=t.getState();return b.find(m=>m.id===g)},[]),i=v.useCallback(g=>{const{getNodes:b,setNodes:m,hasDefaultNodes:w,onNodesChange:E}=t.getState(),C=b(),N=typeof g=="function"?g(C):g;if(w)m(N);else if(E){const I=N.length===0?C.map(j=>({type:"remove",id:j.id})):N.map(j=>({item:j,type:"reset"}));E(I)}},[]),a=v.useCallback(g=>{const{edges:b=[],setEdges:m,hasDefaultEdges:w,onEdgesChange:E}=t.getState(),C=typeof g=="function"?g(b):g;if(w)m(C);else if(E){const N=C.length===0?b.map(I=>({type:"remove",id:I.id})):C.map(I=>({item:I,type:"reset"}));E(N)}},[]),c=v.useCallback(g=>{const b=Array.isArray(g)?g:[g],{getNodes:m,setNodes:w,hasDefaultNodes:E,onNodesChange:C}=t.getState();if(E){const I=[...m(),...b];w(I)}else if(C){const N=b.map(I=>({item:I,type:"add"}));C(N)}},[]),u=v.useCallback(g=>{const b=Array.isArray(g)?g:[g],{edges:m=[],setEdges:w,hasDefaultEdges:E,onEdgesChange:C}=t.getState();if(E)w([...m,...b]);else if(C){const N=b.map(I=>({item:I,type:"add"}));C(N)}},[]),d=v.useCallback(()=>{const{getNodes:g,edges:b=[],transform:m}=t.getState(),[w,E,C]=m;return{nodes:g().map(N=>({...N})),edges:b.map(N=>({...N})),viewport:{x:w,y:E,zoom:C}}},[]),f=v.useCallback(({nodes:g,edges:b})=>{const{nodeInternals:m,getNodes:w,edges:E,hasDefaultNodes:C,hasDefaultEdges:N,onNodesDelete:I,onEdgesDelete:j,onNodesChange:M,onEdgesChange:T}=t.getState(),A=(g||[]).map($=>$.id),P=(b||[]).map($=>$.id),F=w().reduce(($,S)=>{const R=S.parentNode||S.parentId,L=!A.includes(S.id)&&R&&$.find(z=>z.id===R);return(typeof S.deletable=="boolean"?S.deletable:!0)&&(A.includes(S.id)||L)&&$.push(S),$},[]),O=E.filter($=>typeof $.deletable=="boolean"?$.deletable:!0),y=O.filter($=>P.includes($.id));if(F||y){const $=Os(F,O),S=[...y,...$],R=S.reduce((L,_)=>(L.includes(_.id)||L.push(_.id),L),[]);if((N||C)&&(N&&t.setState({edges:E.filter(L=>!R.includes(L.id))}),C&&(F.forEach(L=>{m.delete(L.id)}),t.setState({nodeInternals:new Map(m)}))),R.length>0&&(j==null||j(S),T&&T(R.map(L=>({id:L,type:"remove"})))),F.length>0&&(I==null||I(F),M)){const L=F.map(_=>({id:_.id,type:"remove"}));M(L)}}},[]),p=v.useCallback(g=>{const b=gp(g),m=b?null:t.getState().nodeInternals.get(g.id);return!b&&!m?[null,null,b]:[b?g:Er(m),m,b]},[]),h=v.useCallback((g,b=!0,m)=>{const[w,E,C]=p(g);return w?(m||t.getState().getNodes()).filter(N=>{if(!C&&(N.id===E.id||!N.positionAbsolute))return!1;const I=Er(N),j=ho(I,w);return b&&j>0||j>=w.width*w.height}):[]},[]),x=v.useCallback((g,b,m=!0)=>{const[w]=p(g);if(!w)return!1;const E=ho(w,b);return m&&E>0||E>=w.width*w.height},[]);return v.useMemo(()=>({...e,getNodes:n,getNode:o,getEdges:r,getEdge:s,setNodes:i,setEdges:a,addNodes:c,addEdges:u,toObject:d,deleteElements:f,getIntersectingNodes:h,isNodeIntersecting:x}),[e,n,o,r,s,i,a,c,u,d,f,h,x])}const qp={actInsideInputWithModifier:!1};var Kp=({deleteKeyCode:e,multiSelectionKeyCode:t})=>{const n=be(),{deleteElements:o}=Bo(),r=cn(e,qp),s=cn(t);v.useEffect(()=>{if(r){const{edges:i,getNodes:a}=n.getState(),c=a().filter(d=>d.selected),u=i.filter(d=>d.selected);o({nodes:c,edges:u}),n.setState({nodesSelectionActive:!1})}},[r]),v.useEffect(()=>{n.setState({multiSelectionActive:s})},[s])};function Zp(e){const t=be();v.useEffect(()=>{let n;const o=()=>{var s,i;if(!e.current)return;const r=Mo(e.current);(r.height===0||r.width===0)&&((i=(s=t.getState()).onError)==null||i.call(s,"004",Ze.error004())),t.setState({width:r.width||500,height:r.height||500})};return o(),window.addEventListener("resize",o),e.current&&(n=new ResizeObserver(()=>o()),n.observe(e.current)),()=>{window.removeEventListener("resize",o),n&&e.current&&n.unobserve(e.current)}},[])}const Vo={position:"absolute",width:"100%",height:"100%",top:0,left:0},Jp=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,wn=e=>({x:e.x,y:e.y,zoom:e.k}),Nt=(e,t)=>e.target.closest(`.${t}`),zr=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),Pr=e=>{const t=e.ctrlKey&&zn()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t},Qp=e=>({d3Zoom:e.d3Zoom,d3Selection:e.d3Selection,d3ZoomHandler:e.d3ZoomHandler,userSelectionActive:e.userSelectionActive}),eh=({onMove:e,onMoveStart:t,onMoveEnd:n,onPaneContextMenu:o,zoomOnScroll:r=!0,zoomOnPinch:s=!0,panOnScroll:i=!1,panOnScrollSpeed:a=.5,panOnScrollMode:c=yt.Free,zoomOnDoubleClick:u=!0,elementsSelectable:d,panOnDrag:f=!0,defaultViewport:p,translateExtent:h,minZoom:x,maxZoom:g,zoomActivationKeyCode:b,preventScrolling:m=!0,children:w,noWheelClassName:E,noPanClassName:C})=>{const N=v.useRef(),I=be(),j=v.useRef(!1),M=v.useRef(!1),T=v.useRef(null),A=v.useRef({x:0,y:0,zoom:0}),{d3Zoom:P,d3Selection:F,d3ZoomHandler:O,userSelectionActive:y}=ge(Qp,Ce),$=cn(b),S=v.useRef(0),R=v.useRef(!1),L=v.useRef();return Zp(T),v.useEffect(()=>{if(T.current){const _=T.current.getBoundingClientRect(),z=ap().scaleExtent([x,g]).translateExtent(h),H=De(T.current).call(z),B=tt.translate(p.x,p.y).scale(Bt(p.zoom,x,g)),X=[[0,0],[_.width,_.height]],U=z.constrain()(B,X,h);z.transform(H,U),z.wheelDelta(Pr),I.setState({d3Zoom:z,d3Selection:H,d3ZoomHandler:H.on("wheel.zoom"),transform:[U.x,U.y,U.k],domNode:T.current.closest(".react-flow")})}},[]),v.useEffect(()=>{F&&P&&(i&&!$&&!y?F.on("wheel.zoom",_=>{if(Nt(_,E))return!1;_.preventDefault(),_.stopImmediatePropagation();const z=F.property("__zoom").k||1;if(_.ctrlKey&&s){const re=Fe(_),me=Pr(_),ue=z*Math.pow(2,me);P.scaleTo(F,ue,re,_);return}const H=_.deltaMode===1?20:1;let B=c===yt.Vertical?0:_.deltaX*H,X=c===yt.Horizontal?0:_.deltaY*H;!zn()&&_.shiftKey&&c!==yt.Vertical&&(B=_.deltaY*H,X=0),P.translateBy(F,-(B/z)*a,-(X/z)*a,{internal:!0});const U=wn(F.property("__zoom")),{onViewportChangeStart:Z,onViewportChange:V,onViewportChangeEnd:J}=I.getState();clearTimeout(L.current),R.current||(R.current=!0,t==null||t(_,U),Z==null||Z(U)),R.current&&(e==null||e(_,U),V==null||V(U),L.current=setTimeout(()=>{n==null||n(_,U),J==null||J(U),R.current=!1},150))},{passive:!1}):typeof O<"u"&&F.on("wheel.zoom",function(_,z){if(!m&&_.type==="wheel"&&!_.ctrlKey||Nt(_,E))return null;_.preventDefault(),O.call(this,_,z)},{passive:!1}))},[y,i,c,F,P,O,$,s,m,E,t,e,n]),v.useEffect(()=>{P&&P.on("start",_=>{var B,X;if(!_.sourceEvent||_.sourceEvent.internal)return null;S.current=(B=_.sourceEvent)==null?void 0:B.button;const{onViewportChangeStart:z}=I.getState(),H=wn(_.transform);j.current=!0,A.current=H,((X=_.sourceEvent)==null?void 0:X.type)==="mousedown"&&I.setState({paneDragging:!0}),z==null||z(H),t==null||t(_.sourceEvent,H)})},[P,t]),v.useEffect(()=>{P&&(y&&!j.current?P.on("zoom",null):y||P.on("zoom",_=>{var H;const{onViewportChange:z}=I.getState();if(I.setState({transform:[_.transform.x,_.transform.y,_.transform.k]}),M.current=!!(o&&zr(f,S.current??0)),(e||z)&&!((H=_.sourceEvent)!=null&&H.internal)){const B=wn(_.transform);z==null||z(B),e==null||e(_.sourceEvent,B)}}))},[y,P,e,f,o]),v.useEffect(()=>{P&&P.on("end",_=>{if(!_.sourceEvent||_.sourceEvent.internal)return null;const{onViewportChangeEnd:z}=I.getState();if(j.current=!1,I.setState({paneDragging:!1}),o&&zr(f,S.current??0)&&!M.current&&o(_.sourceEvent),M.current=!1,(n||z)&&Jp(A.current,_.transform)){const H=wn(_.transform);A.current=H,clearTimeout(N.current),N.current=setTimeout(()=>{z==null||z(H),n==null||n(_.sourceEvent,H)},i?150:0)}})},[P,i,f,n,o]),v.useEffect(()=>{P&&P.filter(_=>{const z=$||r,H=s&&_.ctrlKey;if((f===!0||Array.isArray(f)&&f.includes(1))&&_.button===1&&_.type==="mousedown"&&(Nt(_,"react-flow__node")||Nt(_,"react-flow__edge")))return!0;if(!f&&!z&&!i&&!u&&!s||y||!u&&_.type==="dblclick"||Nt(_,E)&&_.type==="wheel"||Nt(_,C)&&(_.type!=="wheel"||i&&_.type==="wheel"&&!$)||!s&&_.ctrlKey&&_.type==="wheel"||!z&&!i&&!H&&_.type==="wheel"||!f&&(_.type==="mousedown"||_.type==="touchstart")||Array.isArray(f)&&!f.includes(_.button)&&_.type==="mousedown")return!1;const B=Array.isArray(f)&&f.includes(_.button)||!_.button||_.button<=1;return(!_.ctrlKey||_.type==="wheel")&&B})},[y,P,r,s,i,u,f,d,$]),k.createElement("div",{className:"react-flow__renderer",ref:T,style:Vo},w)},th=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function nh(){const{userSelectionActive:e,userSelectionRect:t}=ge(th,Ce);return e&&t?k.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}function Dr(e,t){const n=t.parentNode||t.parentId,o=e.find(r=>r.id===n);if(o){const r=t.position.x+t.width-o.width,s=t.position.y+t.height-o.height;if(r>0||s>0||t.position.x<0||t.position.y<0){if(o.style={...o.style},o.style.width=o.style.width??o.width,o.style.height=o.style.height??o.height,r>0&&(o.style.width+=r),s>0&&(o.style.height+=s),t.position.x<0){const i=Math.abs(t.position.x);o.position.x=o.position.x-i,o.style.width+=i,t.position.x=0}if(t.position.y<0){const i=Math.abs(t.position.y);o.position.y=o.position.y-i,o.style.height+=i,t.position.y=0}o.width=o.style.width,o.height=o.style.height}}}function ni(e,t){if(e.some(o=>o.type==="reset"))return e.filter(o=>o.type==="reset").map(o=>o.item);const n=e.filter(o=>o.type==="add").map(o=>o.item);return t.reduce((o,r)=>{const s=e.filter(a=>a.id===r.id);if(s.length===0)return o.push(r),o;const i={...r};for(const a of s)if(a)switch(a.type){case"select":{i.selected=a.selected;break}case"position":{typeof a.position<"u"&&(i.position=a.position),typeof a.positionAbsolute<"u"&&(i.positionAbsolute=a.positionAbsolute),typeof a.dragging<"u"&&(i.dragging=a.dragging),i.expandParent&&Dr(o,i);break}case"dimensions":{typeof a.dimensions<"u"&&(i.width=a.dimensions.width,i.height=a.dimensions.height),typeof a.updateStyle<"u"&&(i.style={...i.style||{},...a.dimensions}),typeof a.resizing=="boolean"&&(i.resizing=a.resizing),i.expandParent&&Dr(o,i);break}case"remove":return o}return o.push(i),o},n)}function oi(e,t){return ni(e,t)}function oh(e,t){return ni(e,t)}const Qe=(e,t)=>({id:e,type:"select",selected:t});function kt(e,t){return e.reduce((n,o)=>{const r=t.includes(o.id);return!o.selected&&r?(o.selected=!0,n.push(Qe(o.id,!0))):o.selected&&!r&&(o.selected=!1,n.push(Qe(o.id,!1))),n},[])}const oo=(e,t)=>n=>{n.target===t.current&&(e==null||e(n))},rh=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,dragging:e.paneDragging}),ri=v.memo(({isSelecting:e,selectionMode:t=an.Full,panOnDrag:n,onSelectionStart:o,onSelectionEnd:r,onPaneClick:s,onPaneContextMenu:i,onPaneScroll:a,onPaneMouseEnter:c,onPaneMouseMove:u,onPaneMouseLeave:d,children:f})=>{const p=v.useRef(null),h=be(),x=v.useRef(0),g=v.useRef(0),b=v.useRef(),{userSelectionActive:m,elementsSelectable:w,dragging:E}=ge(rh,Ce),C=()=>{h.setState({userSelectionActive:!1,userSelectionRect:null}),x.current=0,g.current=0},N=O=>{s==null||s(O),h.getState().resetSelectedElements(),h.setState({nodesSelectionActive:!1})},I=O=>{if(Array.isArray(n)&&(n!=null&&n.includes(2))){O.preventDefault();return}i==null||i(O)},j=a?O=>a(O):void 0,M=O=>{const{resetSelectedElements:y,domNode:$}=h.getState();if(b.current=$==null?void 0:$.getBoundingClientRect(),!w||!e||O.button!==0||O.target!==p.current||!b.current)return;const{x:S,y:R}=nt(O,b.current);y(),h.setState({userSelectionRect:{width:0,height:0,startX:S,startY:R,x:S,y:R}}),o==null||o(O)},T=O=>{const{userSelectionRect:y,nodeInternals:$,edges:S,transform:R,onNodesChange:L,onEdgesChange:_,nodeOrigin:z,getNodes:H}=h.getState();if(!e||!b.current||!y)return;h.setState({userSelectionActive:!0,nodesSelectionActive:!1});const B=nt(O,b.current),X=y.startX??0,U=y.startY??0,Z={...y,x:B.x<X?B.x:X,y:B.y<U?B.y:U,width:Math.abs(B.x-X),height:Math.abs(B.y-U)},V=H(),J=Ls($,Z,R,t===an.Partial,!0,z),re=Os(J,S).map(ue=>ue.id),me=J.map(ue=>ue.id);if(x.current!==me.length){x.current=me.length;const ue=kt(V,me);ue.length&&(L==null||L(ue))}if(g.current!==re.length){g.current=re.length;const ue=kt(S,re);ue.length&&(_==null||_(ue))}h.setState({userSelectionRect:Z})},A=O=>{if(O.button!==0)return;const{userSelectionRect:y}=h.getState();!m&&y&&O.target===p.current&&(N==null||N(O)),h.setState({nodesSelectionActive:x.current>0}),C(),r==null||r(O)},P=O=>{m&&(h.setState({nodesSelectionActive:x.current>0}),r==null||r(O)),C()},F=w&&(e||m);return k.createElement("div",{className:Se(["react-flow__pane",{dragging:E,selection:e}]),onClick:F?void 0:oo(N,p),onContextMenu:oo(I,p),onWheel:oo(j,p),onMouseEnter:F?void 0:c,onMouseDown:F?M:void 0,onMouseMove:F?T:u,onMouseUp:F?A:void 0,onMouseLeave:F?P:d,ref:p,style:Vo},f,k.createElement(nh,null))});ri.displayName="Pane";function si(e,t){const n=e.parentNode||e.parentId;if(!n)return!1;const o=t.get(n);return o?o.selected?!0:si(o,t):!1}function Lr(e,t,n){let o=e;do{if(o!=null&&o.matches(t))return!0;if(o===n.current)return!1;o=o.parentElement}while(o);return!1}function sh(e,t,n,o){return Array.from(e.values()).filter(r=>(r.selected||r.id===o)&&(!r.parentNode||r.parentId||!si(r,e))&&(r.draggable||t&&typeof r.draggable>"u")).map(r=>{var s,i;return{id:r.id,position:r.position||{x:0,y:0},positionAbsolute:r.positionAbsolute||{x:0,y:0},distance:{x:n.x-(((s=r.positionAbsolute)==null?void 0:s.x)??0),y:n.y-(((i=r.positionAbsolute)==null?void 0:i.y)??0)},delta:{x:0,y:0},extent:r.extent,parentNode:r.parentNode||r.parentId,parentId:r.parentNode||r.parentId,width:r.width,height:r.height,expandParent:r.expandParent}})}function ih(e,t){return!t||t==="parent"?t:[t[0],[t[1][0]-(e.width||0),t[1][1]-(e.height||0)]]}function ii(e,t,n,o,r=[0,0],s){const i=ih(e,e.extent||o);let a=i;const c=e.parentNode||e.parentId;if(e.extent==="parent"&&!e.expandParent)if(c&&e.width&&e.height){const f=n.get(c),{x:p,y:h}=At(f,r).positionAbsolute;a=f&&Ie(p)&&Ie(h)&&Ie(f.width)&&Ie(f.height)?[[p+e.width*r[0],h+e.height*r[1]],[p+f.width-e.width+e.width*r[0],h+f.height-e.height+e.height*r[1]]]:a}else s==null||s("005",Ze.error005()),a=i;else if(e.extent&&c&&e.extent!=="parent"){const f=n.get(c),{x:p,y:h}=At(f,r).positionAbsolute;a=[[e.extent[0][0]+p,e.extent[0][1]+h],[e.extent[1][0]+p,e.extent[1][1]+h]]}let u={x:0,y:0};if(c){const f=n.get(c);u=At(f,r).positionAbsolute}const d=a&&a!=="parent"?Ro(t,a):t;return{position:{x:d.x-u.x,y:d.y-u.y},positionAbsolute:d}}function ro({nodeId:e,dragItems:t,nodeInternals:n}){const o=t.map(r=>({...n.get(r.id),position:r.position,positionAbsolute:r.positionAbsolute}));return[e?o.find(r=>r.id===e):o[0],o]}const Or=(e,t,n,o)=>{const r=t.querySelectorAll(e);if(!r||!r.length)return null;const s=Array.from(r),i=t.getBoundingClientRect(),a={x:i.width*o[0],y:i.height*o[1]};return s.map(c=>{const u=c.getBoundingClientRect();return{id:c.getAttribute("data-handleid"),position:c.getAttribute("data-handlepos"),x:(u.left-i.left-a.x)/n,y:(u.top-i.top-a.y)/n,...Mo(c)}})};function Kt(e,t,n){return n===void 0?n:o=>{const r=t().nodeInternals.get(e);r&&n(o,{...r})}}function bo({id:e,store:t,unselect:n=!1,nodeRef:o}){const{addSelectedNodes:r,unselectNodesAndEdges:s,multiSelectionActive:i,nodeInternals:a,onError:c}=t.getState(),u=a.get(e);if(!u){c==null||c("012",Ze.error012(e));return}t.setState({nodesSelectionActive:!1}),u.selected?(n||u.selected&&i)&&(s({nodes:[u],edges:[]}),requestAnimationFrame(()=>{var d;return(d=o==null?void 0:o.current)==null?void 0:d.blur()})):r([e])}function ah(){const e=be();return v.useCallback(({sourceEvent:n})=>{const{transform:o,snapGrid:r,snapToGrid:s}=e.getState(),i=n.touches?n.touches[0].clientX:n.clientX,a=n.touches?n.touches[0].clientY:n.clientY,c={x:(i-o[0])/o[2],y:(a-o[1])/o[2]};return{xSnapped:s?r[0]*Math.round(c.x/r[0]):c.x,ySnapped:s?r[1]*Math.round(c.y/r[1]):c.y,...c}},[])}function so(e){return(t,n,o)=>e==null?void 0:e(t,o)}function ai({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:o,nodeId:r,isSelectable:s,selectNodesOnDrag:i}){const a=be(),[c,u]=v.useState(!1),d=v.useRef([]),f=v.useRef({x:null,y:null}),p=v.useRef(0),h=v.useRef(null),x=v.useRef({x:0,y:0}),g=v.useRef(null),b=v.useRef(!1),m=v.useRef(!1),w=v.useRef(!1),E=ah();return v.useEffect(()=>{if(e!=null&&e.current){const C=De(e.current),N=({x:M,y:T})=>{const{nodeInternals:A,onNodeDrag:P,onSelectionDrag:F,updateNodePositions:O,nodeExtent:y,snapGrid:$,snapToGrid:S,nodeOrigin:R,onError:L}=a.getState();f.current={x:M,y:T};let _=!1,z={x:0,y:0,x2:0,y2:0};if(d.current.length>1&&y){const B=Lo(d.current,R);z=Io(B)}if(d.current=d.current.map(B=>{const X={x:M-B.distance.x,y:T-B.distance.y};S&&(X.x=$[0]*Math.round(X.x/$[0]),X.y=$[1]*Math.round(X.y/$[1]));const U=[[y[0][0],y[0][1]],[y[1][0],y[1][1]]];d.current.length>1&&y&&!B.extent&&(U[0][0]=B.positionAbsolute.x-z.x+y[0][0],U[1][0]=B.positionAbsolute.x+(B.width??0)-z.x2+y[1][0],U[0][1]=B.positionAbsolute.y-z.y+y[0][1],U[1][1]=B.positionAbsolute.y+(B.height??0)-z.y2+y[1][1]);const Z=ii(B,X,A,U,R,L);return _=_||B.position.x!==Z.position.x||B.position.y!==Z.position.y,B.position=Z.position,B.positionAbsolute=Z.positionAbsolute,B}),!_)return;O(d.current,!0,!0),u(!0);const H=r?P:so(F);if(H&&g.current){const[B,X]=ro({nodeId:r,dragItems:d.current,nodeInternals:A});H(g.current,B,X)}},I=()=>{if(!h.current)return;const[M,T]=Ns(x.current,h.current);if(M!==0||T!==0){const{transform:A,panBy:P}=a.getState();f.current.x=(f.current.x??0)-M/A[2],f.current.y=(f.current.y??0)-T/A[2],P({x:M,y:T})&&N(f.current)}p.current=requestAnimationFrame(I)},j=M=>{var R;const{nodeInternals:T,multiSelectionActive:A,nodesDraggable:P,unselectNodesAndEdges:F,onNodeDragStart:O,onSelectionDragStart:y}=a.getState();m.current=!0;const $=r?O:so(y);(!i||!s)&&!A&&r&&((R=T.get(r))!=null&&R.selected||F()),r&&s&&i&&bo({id:r,store:a,nodeRef:e});const S=E(M);if(f.current=S,d.current=sh(T,P,S,r),$&&d.current){const[L,_]=ro({nodeId:r,dragItems:d.current,nodeInternals:T});$(M.sourceEvent,L,_)}};if(t)C.on(".drag",null);else{const M=Vd().on("start",T=>{const{domNode:A,nodeDragThreshold:P}=a.getState();P===0&&j(T),w.current=!1;const F=E(T);f.current=F,h.current=(A==null?void 0:A.getBoundingClientRect())||null,x.current=nt(T.sourceEvent,h.current)}).on("drag",T=>{var O,y;const A=E(T),{autoPanOnNodeDrag:P,nodeDragThreshold:F}=a.getState();if(T.sourceEvent.type==="touchmove"&&T.sourceEvent.touches.length>1&&(w.current=!0),!w.current){if(!b.current&&m.current&&P&&(b.current=!0,I()),!m.current){const $=A.xSnapped-(((O=f==null?void 0:f.current)==null?void 0:O.x)??0),S=A.ySnapped-(((y=f==null?void 0:f.current)==null?void 0:y.y)??0);Math.sqrt($*$+S*S)>F&&j(T)}(f.current.x!==A.xSnapped||f.current.y!==A.ySnapped)&&d.current&&m.current&&(g.current=T.sourceEvent,x.current=nt(T.sourceEvent,h.current),N(A))}}).on("end",T=>{if(!(!m.current||w.current)&&(u(!1),b.current=!1,m.current=!1,cancelAnimationFrame(p.current),d.current)){const{updateNodePositions:A,nodeInternals:P,onNodeDragStop:F,onSelectionDragStop:O}=a.getState(),y=r?F:so(O);if(A(d.current,!1,!1),y){const[$,S]=ro({nodeId:r,dragItems:d.current,nodeInternals:P});y(T.sourceEvent,$,S)}}}).filter(T=>{const A=T.target;return!T.button&&(!n||!Lr(A,`.${n}`,e))&&(!o||Lr(A,o,e))});return C.call(M),()=>{C.on(".drag",null)}}}},[e,t,n,o,s,a,r,i,E]),c}function li(){const e=be();return v.useCallback(n=>{const{nodeInternals:o,nodeExtent:r,updateNodePositions:s,getNodes:i,snapToGrid:a,snapGrid:c,onError:u,nodesDraggable:d}=e.getState(),f=i().filter(w=>w.selected&&(w.draggable||d&&typeof w.draggable>"u")),p=a?c[0]:5,h=a?c[1]:5,x=n.isShiftPressed?4:1,g=n.x*p*x,b=n.y*h*x,m=f.map(w=>{if(w.positionAbsolute){const E={x:w.positionAbsolute.x+g,y:w.positionAbsolute.y+b};a&&(E.x=c[0]*Math.round(E.x/c[0]),E.y=c[1]*Math.round(E.y/c[1]));const{positionAbsolute:C,position:N}=ii(w,E,o,r,void 0,u);w.position=N,w.positionAbsolute=C}return w});s(m,!0,!1)},[])}const zt={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var Zt=e=>{const t=({id:n,type:o,data:r,xPos:s,yPos:i,xPosOrigin:a,yPosOrigin:c,selected:u,onClick:d,onMouseEnter:f,onMouseMove:p,onMouseLeave:h,onContextMenu:x,onDoubleClick:g,style:b,className:m,isDraggable:w,isSelectable:E,isConnectable:C,isFocusable:N,selectNodesOnDrag:I,sourcePosition:j,targetPosition:M,hidden:T,resizeObserver:A,dragHandle:P,zIndex:F,isParent:O,noDragClassName:y,noPanClassName:$,initialized:S,disableKeyboardA11y:R,ariaLabel:L,rfId:_,hasHandleBounds:z})=>{const H=be(),B=v.useRef(null),X=v.useRef(null),U=v.useRef(j),Z=v.useRef(M),V=v.useRef(o),J=E||w||d||f||p||h,re=li(),me=Kt(n,H.getState,f),ue=Kt(n,H.getState,p),Ae=Kt(n,H.getState,h),Te=Kt(n,H.getState,x),ze=Kt(n,H.getState,g),Ne=de=>{const{nodeDragThreshold:q}=H.getState();if(E&&(!I||!w||q>0)&&bo({id:n,store:H,nodeRef:B}),d){const Ee=H.getState().nodeInternals.get(n);Ee&&d(de,{...Ee})}},ve=de=>{if(!go(de)&&!R)if(ks.includes(de.key)&&E){const q=de.key==="Escape";bo({id:n,store:H,unselect:q,nodeRef:B})}else w&&u&&Object.prototype.hasOwnProperty.call(zt,de.key)&&(H.setState({ariaLiveMessage:`Moved selected node ${de.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~s}, y: ${~~i}`}),re({x:zt[de.key].x,y:zt[de.key].y,isShiftPressed:de.shiftKey}))};v.useEffect(()=>()=>{X.current&&(A==null||A.unobserve(X.current),X.current=null)},[]),v.useEffect(()=>{if(B.current&&!T){const de=B.current;(!S||!z||X.current!==de)&&(X.current&&(A==null||A.unobserve(X.current)),A==null||A.observe(de),X.current=de)}},[T,S,z]),v.useEffect(()=>{const de=V.current!==o,q=U.current!==j,Ee=Z.current!==M;B.current&&(de||q||Ee)&&(de&&(V.current=o),q&&(U.current=j),Ee&&(Z.current=M),H.getState().updateNodeDimensions([{id:n,nodeElement:B.current,forceUpdate:!0}]))},[n,o,j,M]);const He=ai({nodeRef:B,disabled:T||!w,noDragClassName:y,handleSelector:P,nodeId:n,isSelectable:E,selectNodesOnDrag:I});return T?null:k.createElement("div",{className:Se(["react-flow__node",`react-flow__node-${o}`,{[$]:w},m,{selected:u,selectable:E,parent:O,dragging:He}]),ref:B,style:{zIndex:F,transform:`translate(${a}px,${c}px)`,pointerEvents:J?"all":"none",visibility:S?"visible":"hidden",...b},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:me,onMouseMove:ue,onMouseLeave:Ae,onContextMenu:Te,onClick:Ne,onDoubleClick:ze,onKeyDown:N?ve:void 0,tabIndex:N?0:void 0,role:N?"button":void 0,"aria-describedby":R?void 0:`${Zs}-${_}`,"aria-label":L},k.createElement(Cp,{value:n},k.createElement(e,{id:n,data:r,type:o,xPos:s,yPos:i,selected:u,isConnectable:C,sourcePosition:j,targetPosition:M,dragging:He,dragHandle:P,zIndex:F})))};return t.displayName="NodeWrapper",v.memo(t)};const lh=e=>{const t=e.getNodes().filter(n=>n.selected);return{...Lo(t,e.nodeOrigin),transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`,userSelectionActive:e.userSelectionActive}};function ch({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const o=be(),{width:r,height:s,x:i,y:a,transformString:c,userSelectionActive:u}=ge(lh,Ce),d=li(),f=v.useRef(null);if(v.useEffect(()=>{var x;n||(x=f.current)==null||x.focus({preventScroll:!0})},[n]),ai({nodeRef:f}),u||!r||!s)return null;const p=e?x=>{const g=o.getState().getNodes().filter(b=>b.selected);e(x,g)}:void 0,h=x=>{Object.prototype.hasOwnProperty.call(zt,x.key)&&d({x:zt[x.key].x,y:zt[x.key].y,isShiftPressed:x.shiftKey})};return k.createElement("div",{className:Se(["react-flow__nodesselection","react-flow__container",t]),style:{transform:c}},k.createElement("div",{ref:f,className:"react-flow__nodesselection-rect",onContextMenu:p,tabIndex:n?void 0:-1,onKeyDown:n?void 0:h,style:{width:r,height:s,top:a,left:i}}))}var uh=v.memo(ch);const dh=e=>e.nodesSelectionActive,ci=({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:o,onPaneMouseLeave:r,onPaneContextMenu:s,onPaneScroll:i,deleteKeyCode:a,onMove:c,onMoveStart:u,onMoveEnd:d,selectionKeyCode:f,selectionOnDrag:p,selectionMode:h,onSelectionStart:x,onSelectionEnd:g,multiSelectionKeyCode:b,panActivationKeyCode:m,zoomActivationKeyCode:w,elementsSelectable:E,zoomOnScroll:C,zoomOnPinch:N,panOnScroll:I,panOnScrollSpeed:j,panOnScrollMode:M,zoomOnDoubleClick:T,panOnDrag:A,defaultViewport:P,translateExtent:F,minZoom:O,maxZoom:y,preventScrolling:$,onSelectionContextMenu:S,noWheelClassName:R,noPanClassName:L,disableKeyboardA11y:_})=>{const z=ge(dh),H=cn(f),B=cn(m),X=B||A,U=B||I,Z=H||p&&X!==!0;return Kp({deleteKeyCode:a,multiSelectionKeyCode:b}),k.createElement(eh,{onMove:c,onMoveStart:u,onMoveEnd:d,onPaneContextMenu:s,elementsSelectable:E,zoomOnScroll:C,zoomOnPinch:N,panOnScroll:U,panOnScrollSpeed:j,panOnScrollMode:M,zoomOnDoubleClick:T,panOnDrag:!H&&X,defaultViewport:P,translateExtent:F,minZoom:O,maxZoom:y,zoomActivationKeyCode:w,preventScrolling:$,noWheelClassName:R,noPanClassName:L},k.createElement(ri,{onSelectionStart:x,onSelectionEnd:g,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:o,onPaneMouseLeave:r,onPaneContextMenu:s,onPaneScroll:i,panOnDrag:X,isSelecting:!!Z,selectionMode:h},e,z&&k.createElement(uh,{onSelectionContextMenu:S,noPanClassName:L,disableKeyboardA11y:_})))};ci.displayName="FlowRenderer";var fh=v.memo(ci);function ph(e){return ge(v.useCallback(n=>e?Ls(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[e]))}function hh(e){const t={input:Zt(e.input||Ys),default:Zt(e.default||vo),output:Zt(e.output||qs),group:Zt(e.group||Ho)},n={},o=Object.keys(e).filter(r=>!["input","default","output","group"].includes(r)).reduce((r,s)=>(r[s]=Zt(e[s]||vo),r),n);return{...t,...o}}const gh=({x:e,y:t,width:n,height:o,origin:r})=>!n||!o?{x:e,y:t}:r[0]<0||r[1]<0||r[0]>1||r[1]>1?{x:e,y:t}:{x:e-n*r[0],y:t-o*r[1]},mh=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,updateNodeDimensions:e.updateNodeDimensions,onError:e.onError}),ui=e=>{const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:o,elementsSelectable:r,updateNodeDimensions:s,onError:i}=ge(mh,Ce),a=ph(e.onlyRenderVisibleElements),c=v.useRef(),u=v.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const d=new ResizeObserver(f=>{const p=f.map(h=>({id:h.target.getAttribute("data-id"),nodeElement:h.target,forceUpdate:!0}));s(p)});return c.current=d,d},[]);return v.useEffect(()=>()=>{var d;(d=c==null?void 0:c.current)==null||d.disconnect()},[]),k.createElement("div",{className:"react-flow__nodes",style:Vo},a.map(d=>{var N,I,j;let f=d.type||"default";e.nodeTypes[f]||(i==null||i("003",Ze.error003(f)),f="default");const p=e.nodeTypes[f]||e.nodeTypes.default,h=!!(d.draggable||t&&typeof d.draggable>"u"),x=!!(d.selectable||r&&typeof d.selectable>"u"),g=!!(d.connectable||n&&typeof d.connectable>"u"),b=!!(d.focusable||o&&typeof d.focusable>"u"),m=e.nodeExtent?Ro(d.positionAbsolute,e.nodeExtent):d.positionAbsolute,w=(m==null?void 0:m.x)??0,E=(m==null?void 0:m.y)??0,C=gh({x:w,y:E,width:d.width??0,height:d.height??0,origin:e.nodeOrigin});return k.createElement(p,{key:d.id,id:d.id,className:d.className,style:d.style,type:f,data:d.data,sourcePosition:d.sourcePosition||G.Bottom,targetPosition:d.targetPosition||G.Top,hidden:d.hidden,xPos:w,yPos:E,xPosOrigin:C.x,yPosOrigin:C.y,selectNodesOnDrag:e.selectNodesOnDrag,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,selected:!!d.selected,isDraggable:h,isSelectable:x,isConnectable:g,isFocusable:b,resizeObserver:u,dragHandle:d.dragHandle,zIndex:((N=d[ye])==null?void 0:N.z)??0,isParent:!!((I=d[ye])!=null&&I.isParent),noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,initialized:!!d.width&&!!d.height,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,ariaLabel:d.ariaLabel,hasHandleBounds:!!((j=d[ye])!=null&&j.handleBounds)})}))};ui.displayName="NodeRenderer";var yh=v.memo(ui);const xh=(e,t,n)=>n===G.Left?e-t:n===G.Right?e+t:e,vh=(e,t,n)=>n===G.Top?e-t:n===G.Bottom?e+t:e,Hr="react-flow__edgeupdater",Br=({position:e,centerX:t,centerY:n,radius:o=10,onMouseDown:r,onMouseEnter:s,onMouseOut:i,type:a})=>k.createElement("circle",{onMouseDown:r,onMouseEnter:s,onMouseOut:i,className:Se([Hr,`${Hr}-${a}`]),cx:xh(t,o,e),cy:vh(n,o,e),r:o,stroke:"transparent",fill:"transparent"}),bh=()=>!0;var jt=e=>{const t=({id:n,className:o,type:r,data:s,onClick:i,onEdgeDoubleClick:a,selected:c,animated:u,label:d,labelStyle:f,labelShowBg:p,labelBgStyle:h,labelBgPadding:x,labelBgBorderRadius:g,style:b,source:m,target:w,sourceX:E,sourceY:C,targetX:N,targetY:I,sourcePosition:j,targetPosition:M,elementsSelectable:T,hidden:A,sourceHandleId:P,targetHandleId:F,onContextMenu:O,onMouseEnter:y,onMouseMove:$,onMouseLeave:S,reconnectRadius:R,onReconnect:L,onReconnectStart:_,onReconnectEnd:z,markerEnd:H,markerStart:B,rfId:X,ariaLabel:U,isFocusable:Z,isReconnectable:V,pathOptions:J,interactionWidth:re,disableKeyboardA11y:me})=>{const ue=v.useRef(null),[Ae,Te]=v.useState(!1),[ze,Ne]=v.useState(!1),ve=be(),He=v.useMemo(()=>`url('#${yo(B,X)}')`,[B,X]),de=v.useMemo(()=>`url('#${yo(H,X)}')`,[H,X]);if(A)return null;const q=we=>{var Be;const{edges:Pe,addSelectedEdges:dt,unselectNodesAndEdges:ft,multiSelectionActive:pt}=ve.getState(),Xe=Pe.find(Wt=>Wt.id===n);Xe&&(T&&(ve.setState({nodesSelectionActive:!1}),Xe.selected&&pt?(ft({nodes:[],edges:[Xe]}),(Be=ue.current)==null||Be.blur()):dt([n])),i&&i(we,Xe))},Ee=qt(n,ve.getState,a),lt=qt(n,ve.getState,O),Vt=qt(n,ve.getState,y),wt=qt(n,ve.getState,$),Ct=qt(n,ve.getState,S),Ue=(we,Pe)=>{if(we.button!==0)return;const{edges:dt,isValidConnection:ft}=ve.getState(),pt=Pe?w:m,Xe=(Pe?F:P)||null,Be=Pe?"target":"source",Wt=ft||bh,Yn=Pe,Ut=dt.find(ht=>ht.id===n);Ne(!0),_==null||_(we,Ut,Be);const Gn=ht=>{Ne(!1),z==null||z(ht,Ut,Be)};Fs({event:we,handleId:Xe,nodeId:pt,onConnect:ht=>L==null?void 0:L(Ut,ht),isTarget:Yn,getState:ve.getState,setState:ve.setState,isValidConnection:Wt,edgeUpdaterType:Be,onReconnectEnd:Gn})},_t=we=>Ue(we,!0),ct=we=>Ue(we,!1),ut=()=>Te(!0),St=()=>Te(!1),Et=!T&&!i,Ft=we=>{var Pe;if(!me&&ks.includes(we.key)&&T){const{unselectNodesAndEdges:dt,addSelectedEdges:ft,edges:pt}=ve.getState();we.key==="Escape"?((Pe=ue.current)==null||Pe.blur(),dt({edges:[pt.find(Be=>Be.id===n)]})):ft([n])}};return k.createElement("g",{className:Se(["react-flow__edge",`react-flow__edge-${r}`,o,{selected:c,animated:u,inactive:Et,updating:Ae}]),onClick:q,onDoubleClick:Ee,onContextMenu:lt,onMouseEnter:Vt,onMouseMove:wt,onMouseLeave:Ct,onKeyDown:Z?Ft:void 0,tabIndex:Z?0:void 0,role:Z?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":U===null?void 0:U||`Edge from ${m} to ${w}`,"aria-describedby":Z?`${Js}-${X}`:void 0,ref:ue},!ze&&k.createElement(e,{id:n,source:m,target:w,selected:c,animated:u,label:d,labelStyle:f,labelShowBg:p,labelBgStyle:h,labelBgPadding:x,labelBgBorderRadius:g,data:s,style:b,sourceX:E,sourceY:C,targetX:N,targetY:I,sourcePosition:j,targetPosition:M,sourceHandleId:P,targetHandleId:F,markerStart:He,markerEnd:de,pathOptions:J,interactionWidth:re}),V&&k.createElement(k.Fragment,null,(V==="source"||V===!0)&&k.createElement(Br,{position:j,centerX:E,centerY:C,radius:R,onMouseDown:_t,onMouseEnter:ut,onMouseOut:St,type:"source"}),(V==="target"||V===!0)&&k.createElement(Br,{position:M,centerX:N,centerY:I,radius:R,onMouseDown:ct,onMouseEnter:ut,onMouseOut:St,type:"target"})))};return t.displayName="EdgeWrapper",v.memo(t)};function wh(e){const t={default:jt(e.default||Pn),straight:jt(e.bezier||Po),step:jt(e.step||zo),smoothstep:jt(e.step||Xn),simplebezier:jt(e.simplebezier||Ao)},n={},o=Object.keys(e).filter(r=>!["default","bezier"].includes(r)).reduce((r,s)=>(r[s]=jt(e[s]||Pn),r),n);return{...t,...o}}function Vr(e,t,n=null){const o=((n==null?void 0:n.x)||0)+t.x,r=((n==null?void 0:n.y)||0)+t.y,s=(n==null?void 0:n.width)||t.width,i=(n==null?void 0:n.height)||t.height;switch(e){case G.Top:return{x:o+s/2,y:r};case G.Right:return{x:o+s,y:r+i/2};case G.Bottom:return{x:o+s/2,y:r+i};case G.Left:return{x:o,y:r+i/2}}}function Fr(e,t){return e?e.length===1||!t?e[0]:t&&e.find(n=>n.id===t)||null:null}const Ch=(e,t,n,o,r,s)=>{const i=Vr(n,e,t),a=Vr(s,o,r);return{sourceX:i.x,sourceY:i.y,targetX:a.x,targetY:a.y}};function _h({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:o,targetWidth:r,targetHeight:s,width:i,height:a,transform:c}){const u={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+r),y2:Math.max(e.y+o,t.y+s)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const d=Io({x:(0-c[0])/c[2],y:(0-c[1])/c[2],width:i/c[2],height:a/c[2]}),f=Math.max(0,Math.min(d.x2,u.x2)-Math.max(d.x,u.x)),p=Math.max(0,Math.min(d.y2,u.y2)-Math.max(d.y,u.y));return Math.ceil(f*p)>0}function Wr(e){var o,r,s,i,a;const t=((o=e==null?void 0:e[ye])==null?void 0:o.handleBounds)||null,n=t&&(e==null?void 0:e.width)&&(e==null?void 0:e.height)&&typeof((r=e==null?void 0:e.positionAbsolute)==null?void 0:r.x)<"u"&&typeof((s=e==null?void 0:e.positionAbsolute)==null?void 0:s.y)<"u";return[{x:((i=e==null?void 0:e.positionAbsolute)==null?void 0:i.x)||0,y:((a=e==null?void 0:e.positionAbsolute)==null?void 0:a.y)||0,width:(e==null?void 0:e.width)||0,height:(e==null?void 0:e.height)||0},t,!!n]}const Sh=[{level:0,isMaxLevel:!0,edges:[]}];function Eh(e,t,n=!1){let o=-1;const r=e.reduce((i,a)=>{var d,f;const c=Ie(a.zIndex);let u=c?a.zIndex:0;if(n){const p=t.get(a.target),h=t.get(a.source),x=a.selected||(p==null?void 0:p.selected)||(h==null?void 0:h.selected),g=Math.max(((d=h==null?void 0:h[ye])==null?void 0:d.z)||0,((f=p==null?void 0:p[ye])==null?void 0:f.z)||0,1e3);u=(c?a.zIndex:0)+(x?g:0)}return i[u]?i[u].push(a):i[u]=[a],o=u>o?u:o,i},{}),s=Object.entries(r).map(([i,a])=>{const c=+i;return{edges:a,level:c,isMaxLevel:c===o}});return s.length===0?Sh:s}function $h(e,t,n){const o=ge(v.useCallback(r=>e?r.edges.filter(s=>{const i=t.get(s.source),a=t.get(s.target);return(i==null?void 0:i.width)&&(i==null?void 0:i.height)&&(a==null?void 0:a.width)&&(a==null?void 0:a.height)&&_h({sourcePos:i.positionAbsolute||{x:0,y:0},targetPos:a.positionAbsolute||{x:0,y:0},sourceWidth:i.width,sourceHeight:i.height,targetWidth:a.width,targetHeight:a.height,width:r.width,height:r.height,transform:r.transform})}):r.edges,[e,t]));return Eh(o,t,n)}const Th=({color:e="none",strokeWidth:t=1})=>k.createElement("polyline",{style:{stroke:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),Nh=({color:e="none",strokeWidth:t=1})=>k.createElement("polyline",{style:{stroke:e,fill:e,strokeWidth:t},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),Ur={[ln.Arrow]:Th,[ln.ArrowClosed]:Nh};function jh(e){const t=be();return v.useMemo(()=>{var r,s;return Object.prototype.hasOwnProperty.call(Ur,e)?Ur[e]:((s=(r=t.getState()).onError)==null||s.call(r,"009",Ze.error009(e)),null)},[e])}const kh=({id:e,type:t,color:n,width:o=12.5,height:r=12.5,markerUnits:s="strokeWidth",strokeWidth:i,orient:a="auto-start-reverse"})=>{const c=jh(t);return c?k.createElement("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${o}`,markerHeight:`${r}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:a,refX:"0",refY:"0"},k.createElement(c,{color:n,strokeWidth:i})):null},Mh=({defaultColor:e,rfId:t})=>n=>{const o=[];return n.edges.reduce((r,s)=>([s.markerStart,s.markerEnd].forEach(i=>{if(i&&typeof i=="object"){const a=yo(i,t);o.includes(a)||(r.push({id:a,color:i.color||e,...i}),o.push(a))}}),r),[]).sort((r,s)=>r.id.localeCompare(s.id))},di=({defaultColor:e,rfId:t})=>{const n=ge(v.useCallback(Mh({defaultColor:e,rfId:t}),[e,t]),(o,r)=>!(o.length!==r.length||o.some((s,i)=>s.id!==r[i].id)));return k.createElement("defs",null,n.map(o=>k.createElement(kh,{id:o.id,key:o.id,type:o.type,color:o.color,width:o.width,height:o.height,markerUnits:o.markerUnits,strokeWidth:o.strokeWidth,orient:o.orient})))};di.displayName="MarkerDefinitions";var Rh=v.memo(di);const Ih=e=>({nodesConnectable:e.nodesConnectable,edgesFocusable:e.edgesFocusable,edgesUpdatable:e.edgesUpdatable,elementsSelectable:e.elementsSelectable,width:e.width,height:e.height,connectionMode:e.connectionMode,nodeInternals:e.nodeInternals,onError:e.onError}),fi=({defaultMarkerColor:e,onlyRenderVisibleElements:t,elevateEdgesOnSelect:n,rfId:o,edgeTypes:r,noPanClassName:s,onEdgeContextMenu:i,onEdgeMouseEnter:a,onEdgeMouseMove:c,onEdgeMouseLeave:u,onEdgeClick:d,onEdgeDoubleClick:f,onReconnect:p,onReconnectStart:h,onReconnectEnd:x,reconnectRadius:g,children:b,disableKeyboardA11y:m})=>{const{edgesFocusable:w,edgesUpdatable:E,elementsSelectable:C,width:N,height:I,connectionMode:j,nodeInternals:M,onError:T}=ge(Ih,Ce),A=$h(t,M,n);return N?k.createElement(k.Fragment,null,A.map(({level:P,edges:F,isMaxLevel:O})=>k.createElement("svg",{key:P,style:{zIndex:P},width:N,height:I,className:"react-flow__edges react-flow__container"},O&&k.createElement(Rh,{defaultColor:e,rfId:o}),k.createElement("g",null,F.map(y=>{const[$,S,R]=Wr(M.get(y.source)),[L,_,z]=Wr(M.get(y.target));if(!R||!z)return null;let H=y.type||"default";r[H]||(T==null||T("011",Ze.error011(H)),H="default");const B=r[H]||r.default,X=j===vt.Strict?_.target:(_.target??[]).concat(_.source??[]),U=Fr(S.source,y.sourceHandle),Z=Fr(X,y.targetHandle),V=(U==null?void 0:U.position)||G.Bottom,J=(Z==null?void 0:Z.position)||G.Top,re=!!(y.focusable||w&&typeof y.focusable>"u"),me=y.reconnectable||y.updatable,ue=typeof p<"u"&&(me||E&&typeof me>"u");if(!U||!Z)return T==null||T("008",Ze.error008(U,y)),null;const{sourceX:Ae,sourceY:Te,targetX:ze,targetY:Ne}=Ch($,U,V,L,Z,J);return k.createElement(B,{key:y.id,id:y.id,className:Se([y.className,s]),type:H,data:y.data,selected:!!y.selected,animated:!!y.animated,hidden:!!y.hidden,label:y.label,labelStyle:y.labelStyle,labelShowBg:y.labelShowBg,labelBgStyle:y.labelBgStyle,labelBgPadding:y.labelBgPadding,labelBgBorderRadius:y.labelBgBorderRadius,style:y.style,source:y.source,target:y.target,sourceHandleId:y.sourceHandle,targetHandleId:y.targetHandle,markerEnd:y.markerEnd,markerStart:y.markerStart,sourceX:Ae,sourceY:Te,targetX:ze,targetY:Ne,sourcePosition:V,targetPosition:J,elementsSelectable:C,onContextMenu:i,onMouseEnter:a,onMouseMove:c,onMouseLeave:u,onClick:d,onEdgeDoubleClick:f,onReconnect:p,onReconnectStart:h,onReconnectEnd:x,reconnectRadius:g,rfId:o,ariaLabel:y.ariaLabel,isFocusable:re,isReconnectable:ue,pathOptions:"pathOptions"in y?y.pathOptions:void 0,interactionWidth:y.interactionWidth,disableKeyboardA11y:m})})))),b):null};fi.displayName="EdgeRenderer";var Ah=v.memo(fi);const zh=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function Ph({children:e}){const t=ge(zh);return k.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:t}},e)}function Dh(e){const t=Bo(),n=v.useRef(!1);v.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const Lh={[G.Left]:G.Right,[G.Right]:G.Left,[G.Top]:G.Bottom,[G.Bottom]:G.Top},pi=({nodeId:e,handleType:t,style:n,type:o=et.Bezier,CustomComponent:r,connectionStatus:s})=>{var I,j,M;const{fromNode:i,handleId:a,toX:c,toY:u,connectionMode:d}=ge(v.useCallback(T=>({fromNode:T.nodeInternals.get(e),handleId:T.connectionHandleId,toX:(T.connectionPosition.x-T.transform[0])/T.transform[2],toY:(T.connectionPosition.y-T.transform[1])/T.transform[2],connectionMode:T.connectionMode}),[e]),Ce),f=(I=i==null?void 0:i[ye])==null?void 0:I.handleBounds;let p=f==null?void 0:f[t];if(d===vt.Loose&&(p=p||(f==null?void 0:f[t==="source"?"target":"source"])),!i||!p)return null;const h=a?p.find(T=>T.id===a):p[0],x=h?h.x+h.width/2:(i.width??0)/2,g=h?h.y+h.height/2:i.height??0,b=(((j=i.positionAbsolute)==null?void 0:j.x)??0)+x,m=(((M=i.positionAbsolute)==null?void 0:M.y)??0)+g,w=h==null?void 0:h.position,E=w?Lh[w]:null;if(!w||!E)return null;if(r)return k.createElement(r,{connectionLineType:o,connectionLineStyle:n,fromNode:i,fromHandle:h,fromX:b,fromY:m,toX:c,toY:u,fromPosition:w,toPosition:E,connectionStatus:s});let C="";const N={sourceX:b,sourceY:m,sourcePosition:w,targetX:c,targetY:u,targetPosition:E};return o===et.Bezier?[C]=zs(N):o===et.Step?[C]=mo({...N,borderRadius:0}):o===et.SmoothStep?[C]=mo(N):o===et.SimpleBezier?[C]=As(N):C=`M${b},${m} ${c},${u}`,k.createElement("path",{d:C,fill:"none",className:"react-flow__connection-path",style:n})};pi.displayName="ConnectionLine";const Oh=e=>({nodeId:e.connectionNodeId,handleType:e.connectionHandleType,nodesConnectable:e.nodesConnectable,connectionStatus:e.connectionStatus,width:e.width,height:e.height});function Hh({containerStyle:e,style:t,type:n,component:o}){const{nodeId:r,handleType:s,nodesConnectable:i,width:a,height:c,connectionStatus:u}=ge(Oh,Ce);return!(r&&s&&a&&i)?null:k.createElement("svg",{style:e,width:a,height:c,className:"react-flow__edges react-flow__connectionline react-flow__container"},k.createElement("g",{className:Se(["react-flow__connection",u])},k.createElement(pi,{nodeId:r,handleType:s,style:t,type:n,CustomComponent:o,connectionStatus:u})))}function Xr(e,t){return v.useRef(null),be(),v.useMemo(()=>t(e),[e])}const hi=({nodeTypes:e,edgeTypes:t,onMove:n,onMoveStart:o,onMoveEnd:r,onInit:s,onNodeClick:i,onEdgeClick:a,onNodeDoubleClick:c,onEdgeDoubleClick:u,onNodeMouseEnter:d,onNodeMouseMove:f,onNodeMouseLeave:p,onNodeContextMenu:h,onSelectionContextMenu:x,onSelectionStart:g,onSelectionEnd:b,connectionLineType:m,connectionLineStyle:w,connectionLineComponent:E,connectionLineContainerStyle:C,selectionKeyCode:N,selectionOnDrag:I,selectionMode:j,multiSelectionKeyCode:M,panActivationKeyCode:T,zoomActivationKeyCode:A,deleteKeyCode:P,onlyRenderVisibleElements:F,elementsSelectable:O,selectNodesOnDrag:y,defaultViewport:$,translateExtent:S,minZoom:R,maxZoom:L,preventScrolling:_,defaultMarkerColor:z,zoomOnScroll:H,zoomOnPinch:B,panOnScroll:X,panOnScrollSpeed:U,panOnScrollMode:Z,zoomOnDoubleClick:V,panOnDrag:J,onPaneClick:re,onPaneMouseEnter:me,onPaneMouseMove:ue,onPaneMouseLeave:Ae,onPaneScroll:Te,onPaneContextMenu:ze,onEdgeContextMenu:Ne,onEdgeMouseEnter:ve,onEdgeMouseMove:He,onEdgeMouseLeave:de,onReconnect:q,onReconnectStart:Ee,onReconnectEnd:lt,reconnectRadius:Vt,noDragClassName:wt,noWheelClassName:Ct,noPanClassName:Ue,elevateEdgesOnSelect:_t,disableKeyboardA11y:ct,nodeOrigin:ut,nodeExtent:St,rfId:Et})=>{const Ft=Xr(e,hh),we=Xr(t,wh);return Dh(s),k.createElement(fh,{onPaneClick:re,onPaneMouseEnter:me,onPaneMouseMove:ue,onPaneMouseLeave:Ae,onPaneContextMenu:ze,onPaneScroll:Te,deleteKeyCode:P,selectionKeyCode:N,selectionOnDrag:I,selectionMode:j,onSelectionStart:g,onSelectionEnd:b,multiSelectionKeyCode:M,panActivationKeyCode:T,zoomActivationKeyCode:A,elementsSelectable:O,onMove:n,onMoveStart:o,onMoveEnd:r,zoomOnScroll:H,zoomOnPinch:B,zoomOnDoubleClick:V,panOnScroll:X,panOnScrollSpeed:U,panOnScrollMode:Z,panOnDrag:J,defaultViewport:$,translateExtent:S,minZoom:R,maxZoom:L,onSelectionContextMenu:x,preventScrolling:_,noDragClassName:wt,noWheelClassName:Ct,noPanClassName:Ue,disableKeyboardA11y:ct},k.createElement(Ph,null,k.createElement(Ah,{edgeTypes:we,onEdgeClick:a,onEdgeDoubleClick:u,onlyRenderVisibleElements:F,onEdgeContextMenu:Ne,onEdgeMouseEnter:ve,onEdgeMouseMove:He,onEdgeMouseLeave:de,onReconnect:q,onReconnectStart:Ee,onReconnectEnd:lt,reconnectRadius:Vt,defaultMarkerColor:z,noPanClassName:Ue,elevateEdgesOnSelect:!!_t,disableKeyboardA11y:ct,rfId:Et},k.createElement(Hh,{style:w,type:m,component:E,containerStyle:C})),k.createElement("div",{className:"react-flow__edgelabel-renderer"}),k.createElement(yh,{nodeTypes:Ft,onNodeClick:i,onNodeDoubleClick:c,onNodeMouseEnter:d,onNodeMouseMove:f,onNodeMouseLeave:p,onNodeContextMenu:h,selectNodesOnDrag:y,onlyRenderVisibleElements:F,noPanClassName:Ue,noDragClassName:wt,disableKeyboardA11y:ct,nodeOrigin:ut,nodeExtent:St,rfId:Et})))};hi.displayName="GraphView";var Bh=v.memo(hi);const wo=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],Je={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:wo,nodeExtent:wo,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:vt.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,onSelectionChange:[],multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:mp,isValidConnection:void 0},Vh=()=>eu((e,t)=>({...Je,setNodes:n=>{const{nodeInternals:o,nodeOrigin:r,elevateNodesOnSelect:s}=t();e({nodeInternals:no(n,o,r,s)})},getNodes:()=>Array.from(t().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:o={}}=t();e({edges:n.map(r=>({...o,...r}))})},setDefaultNodesAndEdges:(n,o)=>{const r=typeof n<"u",s=typeof o<"u",i=r?no(n,new Map,t().nodeOrigin,t().elevateNodesOnSelect):new Map;e({nodeInternals:i,edges:s?o:[],hasDefaultNodes:r,hasDefaultEdges:s})},updateNodeDimensions:n=>{const{onNodesChange:o,nodeInternals:r,fitViewOnInit:s,fitViewOnInitDone:i,fitViewOnInitOptions:a,domNode:c,nodeOrigin:u}=t(),d=c==null?void 0:c.querySelector(".react-flow__viewport");if(!d)return;const f=window.getComputedStyle(d),{m22:p}=new window.DOMMatrixReadOnly(f.transform),h=n.reduce((g,b)=>{const m=r.get(b.id);if(m!=null&&m.hidden)r.set(m.id,{...m,[ye]:{...m[ye],handleBounds:void 0}});else if(m){const w=Mo(b.nodeElement);!!(w.width&&w.height&&(m.width!==w.width||m.height!==w.height||b.forceUpdate))&&(r.set(m.id,{...m,[ye]:{...m[ye],handleBounds:{source:Or(".source",b.nodeElement,p,u),target:Or(".target",b.nodeElement,p,u)}},...w}),g.push({id:m.id,type:"dimensions",dimensions:w}))}return g},[]);ei(r,u);const x=i||s&&!i&&ti(t,{initial:!0,...a});e({nodeInternals:new Map(r),fitViewOnInitDone:x}),(h==null?void 0:h.length)>0&&(o==null||o(h))},updateNodePositions:(n,o=!0,r=!1)=>{const{triggerNodeChanges:s}=t(),i=n.map(a=>{const c={id:a.id,type:"position",dragging:r};return o&&(c.positionAbsolute=a.positionAbsolute,c.position=a.position),c});s(i)},triggerNodeChanges:n=>{const{onNodesChange:o,nodeInternals:r,hasDefaultNodes:s,nodeOrigin:i,getNodes:a,elevateNodesOnSelect:c}=t();if(n!=null&&n.length){if(s){const u=oi(n,a()),d=no(u,r,i,c);e({nodeInternals:d})}o==null||o(n)}},addSelectedNodes:n=>{const{multiSelectionActive:o,edges:r,getNodes:s}=t();let i,a=null;o?i=n.map(c=>Qe(c,!0)):(i=kt(s(),n),a=kt(r,[])),bn({changedNodes:i,changedEdges:a,get:t,set:e})},addSelectedEdges:n=>{const{multiSelectionActive:o,edges:r,getNodes:s}=t();let i,a=null;o?i=n.map(c=>Qe(c,!0)):(i=kt(r,n),a=kt(s(),[])),bn({changedNodes:a,changedEdges:i,get:t,set:e})},unselectNodesAndEdges:({nodes:n,edges:o}={})=>{const{edges:r,getNodes:s}=t(),i=n||s(),a=o||r,c=i.map(d=>(d.selected=!1,Qe(d.id,!1))),u=a.map(d=>Qe(d.id,!1));bn({changedNodes:c,changedEdges:u,get:t,set:e})},setMinZoom:n=>{const{d3Zoom:o,maxZoom:r}=t();o==null||o.scaleExtent([n,r]),e({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:o,minZoom:r}=t();o==null||o.scaleExtent([r,n]),e({maxZoom:n})},setTranslateExtent:n=>{var o;(o=t().d3Zoom)==null||o.translateExtent(n),e({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:o}=t(),s=o().filter(a=>a.selected).map(a=>Qe(a.id,!1)),i=n.filter(a=>a.selected).map(a=>Qe(a.id,!1));bn({changedNodes:s,changedEdges:i,get:t,set:e})},setNodeExtent:n=>{const{nodeInternals:o}=t();o.forEach(r=>{r.positionAbsolute=Ro(r.position,n)}),e({nodeExtent:n,nodeInternals:new Map(o)})},panBy:n=>{const{transform:o,width:r,height:s,d3Zoom:i,d3Selection:a,translateExtent:c}=t();if(!i||!a||!n.x&&!n.y)return!1;const u=tt.translate(o[0]+n.x,o[1]+n.y).scale(o[2]),d=[[0,0],[r,s]],f=i==null?void 0:i.constrain()(u,d,c);return i.transform(a,f),o[0]!==f.x||o[1]!==f.y||o[2]!==f.k},cancelConnection:()=>e({connectionNodeId:Je.connectionNodeId,connectionHandleId:Je.connectionHandleId,connectionHandleType:Je.connectionHandleType,connectionStatus:Je.connectionStatus,connectionStartHandle:Je.connectionStartHandle,connectionEndHandle:Je.connectionEndHandle}),reset:()=>e({...Je})}),Object.is),gi=({children:e})=>{const t=v.useRef(null);return t.current||(t.current=Vh()),k.createElement(lp,{value:t.current},e)};gi.displayName="ReactFlowProvider";const mi=({children:e})=>v.useContext(Un)?k.createElement(k.Fragment,null,e):k.createElement(gi,null,e);mi.displayName="ReactFlowWrapper";const Fh={input:Ys,default:vo,output:qs,group:Ho},Wh={default:Pn,straight:Po,step:zo,smoothstep:Xn,simplebezier:Ao},Uh=[0,0],Xh=[15,15],Yh={x:0,y:0,zoom:1},Gh={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},yi=v.forwardRef(({nodes:e,edges:t,defaultNodes:n,defaultEdges:o,className:r,nodeTypes:s=Fh,edgeTypes:i=Wh,onNodeClick:a,onEdgeClick:c,onInit:u,onMove:d,onMoveStart:f,onMoveEnd:p,onConnect:h,onConnectStart:x,onConnectEnd:g,onClickConnectStart:b,onClickConnectEnd:m,onNodeMouseEnter:w,onNodeMouseMove:E,onNodeMouseLeave:C,onNodeContextMenu:N,onNodeDoubleClick:I,onNodeDragStart:j,onNodeDrag:M,onNodeDragStop:T,onNodesDelete:A,onEdgesDelete:P,onSelectionChange:F,onSelectionDragStart:O,onSelectionDrag:y,onSelectionDragStop:$,onSelectionContextMenu:S,onSelectionStart:R,onSelectionEnd:L,connectionMode:_=vt.Strict,connectionLineType:z=et.Bezier,connectionLineStyle:H,connectionLineComponent:B,connectionLineContainerStyle:X,deleteKeyCode:U="Backspace",selectionKeyCode:Z="Shift",selectionOnDrag:V=!1,selectionMode:J=an.Full,panActivationKeyCode:re="Space",multiSelectionKeyCode:me=zn()?"Meta":"Control",zoomActivationKeyCode:ue=zn()?"Meta":"Control",snapToGrid:Ae=!1,snapGrid:Te=Xh,onlyRenderVisibleElements:ze=!1,selectNodesOnDrag:Ne=!0,nodesDraggable:ve,nodesConnectable:He,nodesFocusable:de,nodeOrigin:q=Uh,edgesFocusable:Ee,edgesUpdatable:lt,elementsSelectable:Vt,defaultViewport:wt=Yh,minZoom:Ct=.5,maxZoom:Ue=2,translateExtent:_t=wo,preventScrolling:ct=!0,nodeExtent:ut,defaultMarkerColor:St="#b1b1b7",zoomOnScroll:Et=!0,zoomOnPinch:Ft=!0,panOnScroll:we=!1,panOnScrollSpeed:Pe=.5,panOnScrollMode:dt=yt.Free,zoomOnDoubleClick:ft=!0,panOnDrag:pt=!0,onPaneClick:Xe,onPaneMouseEnter:Be,onPaneMouseMove:Wt,onPaneMouseLeave:Yn,onPaneScroll:Ut,onPaneContextMenu:Gn,children:Fo,onEdgeContextMenu:ht,onEdgeDoubleClick:Ci,onEdgeMouseEnter:_i,onEdgeMouseMove:Si,onEdgeMouseLeave:Ei,onEdgeUpdate:$i,onEdgeUpdateStart:Ti,onEdgeUpdateEnd:Ni,onReconnect:ji,onReconnectStart:ki,onReconnectEnd:Mi,reconnectRadius:Ri=10,edgeUpdaterRadius:Ii=10,onNodesChange:Ai,onEdgesChange:zi,noDragClassName:Pi="nodrag",noWheelClassName:Di="nowheel",noPanClassName:Wo="nopan",fitView:Li=!1,fitViewOptions:Oi,connectOnClick:Hi=!0,attributionPosition:Bi,proOptions:Vi,defaultEdgeOptions:Fi,elevateNodesOnSelect:Wi=!0,elevateEdgesOnSelect:Ui=!1,disableKeyboardA11y:Uo=!1,autoPanOnConnect:Xi=!0,autoPanOnNodeDrag:Yi=!0,connectionRadius:Gi=20,isValidConnection:qi,onError:Ki,style:Zi,id:Xo,nodeDragThreshold:Ji,...Qi},ea)=>{const qn=Xo||"1";return k.createElement("div",{...Qi,style:{...Zi,...Gh},ref:ea,className:Se(["react-flow",r]),"data-testid":"rf__wrapper",id:Xo},k.createElement(mi,null,k.createElement(Bh,{onInit:u,onMove:d,onMoveStart:f,onMoveEnd:p,onNodeClick:a,onEdgeClick:c,onNodeMouseEnter:w,onNodeMouseMove:E,onNodeMouseLeave:C,onNodeContextMenu:N,onNodeDoubleClick:I,nodeTypes:s,edgeTypes:i,connectionLineType:z,connectionLineStyle:H,connectionLineComponent:B,connectionLineContainerStyle:X,selectionKeyCode:Z,selectionOnDrag:V,selectionMode:J,deleteKeyCode:U,multiSelectionKeyCode:me,panActivationKeyCode:re,zoomActivationKeyCode:ue,onlyRenderVisibleElements:ze,selectNodesOnDrag:Ne,defaultViewport:wt,translateExtent:_t,minZoom:Ct,maxZoom:Ue,preventScrolling:ct,zoomOnScroll:Et,zoomOnPinch:Ft,zoomOnDoubleClick:ft,panOnScroll:we,panOnScrollSpeed:Pe,panOnScrollMode:dt,panOnDrag:pt,onPaneClick:Xe,onPaneMouseEnter:Be,onPaneMouseMove:Wt,onPaneMouseLeave:Yn,onPaneScroll:Ut,onPaneContextMenu:Gn,onSelectionContextMenu:S,onSelectionStart:R,onSelectionEnd:L,onEdgeContextMenu:ht,onEdgeDoubleClick:Ci,onEdgeMouseEnter:_i,onEdgeMouseMove:Si,onEdgeMouseLeave:Ei,onReconnect:ji??$i,onReconnectStart:ki??Ti,onReconnectEnd:Mi??Ni,reconnectRadius:Ri??Ii,defaultMarkerColor:St,noDragClassName:Pi,noWheelClassName:Di,noPanClassName:Wo,elevateEdgesOnSelect:Ui,rfId:qn,disableKeyboardA11y:Uo,nodeOrigin:q,nodeExtent:ut}),k.createElement(Lp,{nodes:e,edges:t,defaultNodes:n,defaultEdges:o,onConnect:h,onConnectStart:x,onConnectEnd:g,onClickConnectStart:b,onClickConnectEnd:m,nodesDraggable:ve,nodesConnectable:He,nodesFocusable:de,edgesFocusable:Ee,edgesUpdatable:lt,elementsSelectable:Vt,elevateNodesOnSelect:Wi,minZoom:Ct,maxZoom:Ue,nodeExtent:ut,onNodesChange:Ai,onEdgesChange:zi,snapToGrid:Ae,snapGrid:Te,connectionMode:_,translateExtent:_t,connectOnClick:Hi,defaultEdgeOptions:Fi,fitView:Li,fitViewOptions:Oi,onNodesDelete:A,onEdgesDelete:P,onNodeDragStart:j,onNodeDrag:M,onNodeDragStop:T,onSelectionDrag:y,onSelectionDragStart:O,onSelectionDragStop:$,noPanClassName:Wo,nodeOrigin:q,rfId:qn,autoPanOnConnect:Xi,autoPanOnNodeDrag:Yi,onError:Ki,connectionRadius:Gi,isValidConnection:qi,nodeDragThreshold:Ji}),k.createElement(Pp,{onSelectionChange:F}),Fo,k.createElement(up,{proOptions:Vi,position:Bi}),k.createElement(Fp,{rfId:qn,disableKeyboardA11y:Uo})))});yi.displayName="ReactFlow";function xi(e){return t=>{const[n,o]=v.useState(t),r=v.useCallback(s=>o(i=>e(s,i)),[]);return[n,o,r]}}const qh=xi(oi),Kh=xi(oh);function Zh(){return k.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},k.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function Jh(){return k.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},k.createElement("path",{d:"M0 0h32v4.2H0z"}))}function Qh(){return k.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},k.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function eg(){return k.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},k.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function tg(){return k.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},k.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}const en=({children:e,className:t,...n})=>k.createElement("button",{type:"button",className:Se(["react-flow__controls-button",t]),...n},e);en.displayName="ControlButton";const ng=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),vi=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:o=!0,fitViewOptions:r,onZoomIn:s,onZoomOut:i,onFitView:a,onInteractiveChange:c,className:u,children:d,position:f="bottom-left"})=>{const p=be(),[h,x]=v.useState(!1),{isInteractive:g,minZoomReached:b,maxZoomReached:m}=ge(ng,Ce),{zoomIn:w,zoomOut:E,fitView:C}=Bo();if(v.useEffect(()=>{x(!0)},[]),!h)return null;const N=()=>{w(),s==null||s()},I=()=>{E(),i==null||i()},j=()=>{C(r),a==null||a()},M=()=>{p.setState({nodesDraggable:!g,nodesConnectable:!g,elementsSelectable:!g}),c==null||c(!g)};return k.createElement(Ts,{className:Se(["react-flow__controls",u]),position:f,style:e,"data-testid":"rf__controls"},t&&k.createElement(k.Fragment,null,k.createElement(en,{onClick:N,className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:m},k.createElement(Zh,null)),k.createElement(en,{onClick:I,className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:b},k.createElement(Jh,null))),n&&k.createElement(en,{className:"react-flow__controls-fitview",onClick:j,title:"fit view","aria-label":"fit view"},k.createElement(Qh,null)),o&&k.createElement(en,{className:"react-flow__controls-interactive",onClick:M,title:"toggle interactivity","aria-label":"toggle interactivity"},g?k.createElement(tg,null):k.createElement(eg,null)),d)};vi.displayName="Controls";var og=v.memo(vi),Le;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Le||(Le={}));function rg({color:e,dimensions:t,lineWidth:n}){return k.createElement("path",{stroke:e,strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function sg({color:e,radius:t}){return k.createElement("circle",{cx:t,cy:t,r:t,fill:e})}const ig={[Le.Dots]:"#91919a",[Le.Lines]:"#eee",[Le.Cross]:"#e2e2e2"},ag={[Le.Dots]:1,[Le.Lines]:1,[Le.Cross]:6},lg=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function bi({id:e,variant:t=Le.Dots,gap:n=20,size:o,lineWidth:r=1,offset:s=2,color:i,style:a,className:c}){const u=v.useRef(null),{transform:d,patternId:f}=ge(lg,Ce),p=i||ig[t],h=o||ag[t],x=t===Le.Dots,g=t===Le.Cross,b=Array.isArray(n)?n:[n,n],m=[b[0]*d[2]||1,b[1]*d[2]||1],w=h*d[2],E=g?[w,w]:m,C=x?[w/s,w/s]:[E[0]/s,E[1]/s];return k.createElement("svg",{className:Se(["react-flow__background",c]),style:{...a,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:u,"data-testid":"rf__background"},k.createElement("pattern",{id:f+e,x:d[0]%m[0],y:d[1]%m[1],width:m[0],height:m[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${C[0]},-${C[1]})`},x?k.createElement(sg,{color:p,radius:w/s}):k.createElement(rg,{dimensions:E,color:p,lineWidth:r})),k.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${f+e})`}))}bi.displayName="Background";var cg=v.memo(bi);const ug=({data:e})=>l.jsxs(K,{sx:{padding:2,borderRadius:2,border:"2px solid #3b82f6",backgroundColor:"#eff6ff",minWidth:200},children:[l.jsx(W,{variant:"subtitle2",fontWeight:"bold",color:"primary",children:"Condition"}),l.jsx(W,{variant:"body2",sx:{mt:1},children:e.label}),e.field&&l.jsxs(W,{variant:"caption",display:"block",sx:{mt:.5},children:["Field: ",e.field]}),e.operator&&l.jsxs(W,{variant:"caption",display:"block",children:["Operator: ",e.operator]}),e.value!==void 0&&l.jsxs(W,{variant:"caption",display:"block",children:["Value: ",String(e.value)]})]}),dg=({data:e})=>l.jsxs(K,{sx:{padding:2,borderRadius:2,border:"2px solid #10b981",backgroundColor:"#ecfdf5",minWidth:200},children:[l.jsx(W,{variant:"subtitle2",fontWeight:"bold",color:"success.main",children:"Action"}),l.jsx(W,{variant:"body2",sx:{mt:1},children:e.label}),e.actionType&&l.jsxs(W,{variant:"caption",display:"block",sx:{mt:.5},children:["Type: ",e.actionType]}),e.params&&l.jsxs(W,{variant:"caption",display:"block",children:["Params: ",JSON.stringify(e.params)]})]}),fg=({data:e})=>l.jsx(K,{sx:{padding:2,borderRadius:2,border:"2px solid #f59e0b",backgroundColor:"#fffbeb",minWidth:100,textAlign:"center"},children:l.jsx(W,{variant:"h6",fontWeight:"bold",color:"warning.main",children:e.label})}),pg={condition:ug,action:dg,logical:fg},hg=({onSave:e,initialRule:t})=>{const[n,o,r]=qh([]),[s,i,a]=Kh([]),[c,u]=v.useState(null),[d,f]=v.useState(!1),[p,h]=v.useState("condition"),[x,g]=v.useState({label:"",field:"",operator:"",value:"",actionType:"",params:{}}),b=v.useCallback(j=>{i(M=>Ps({...j,animated:!0,markerEnd:{type:ln.ArrowClosed}},M))},[i]),m=v.useCallback((j,M)=>{u(M)},[]),w=()=>{f(!0)},E=()=>{const M={id:`${p}-${n.length+1}`,type:p,position:{x:Math.random()*400,y:Math.random()*400},data:{...x}};o(T=>[...T,M]),f(!1),g({label:"",field:"",operator:"",value:"",actionType:"",params:{}})},C=()=>{c&&(o(j=>j.filter(M=>M.id!==c.id)),i(j=>j.filter(M=>M.source!==c.id&&M.target!==c.id)),u(null))},N=()=>{const j={nodes:n,edges:s,conditions:gg(n),actions:yg(n)};e(j)},I=()=>{console.log("Testing rule with current configuration")};return l.jsxs(K,{sx:{height:"600px",width:"100%"},children:[l.jsx(Pt,{sx:{mb:2,p:2},children:l.jsxs(K,{sx:{display:"flex",gap:2,alignItems:"center"},children:[l.jsx(pe,{variant:"contained",startIcon:l.jsx(Eo,{}),onClick:w,children:"Add Node"}),l.jsx(pe,{variant:"outlined",startIcon:l.jsx(ns,{}),onClick:C,disabled:!c,children:"Delete Node"}),l.jsx(pe,{variant:"contained",color:"success",startIcon:l.jsx(Wc,{}),onClick:N,children:"Save Rule"}),l.jsx(pe,{variant:"outlined",color:"primary",startIcon:l.jsx(Dt,{}),onClick:I,children:"Test Rule"}),c&&l.jsx(_e,{label:`Selected: ${c.data.label}`,onDelete:()=>u(null)})]})}),l.jsx(Pt,{sx:{height:"calc(100% - 80px)"},children:l.jsxs(yi,{nodes:n,edges:s,onNodesChange:r,onEdgesChange:a,onConnect:b,onNodeClick:m,nodeTypes:pg,fitView:!0,children:[l.jsx(og,{}),l.jsx(cg,{})]})}),l.jsxs(ot,{open:d,onClose:()=>f(!1),maxWidth:"sm",fullWidth:!0,children:[l.jsx(it,{children:"Add New Node"}),l.jsxs(st,{children:[l.jsxs(tn,{fullWidth:!0,sx:{mt:2},children:[l.jsx(nn,{children:"Node Type"}),l.jsxs(on,{value:p,label:"Node Type",onChange:j=>h(j.target.value),children:[l.jsx(se,{value:"condition",children:"Condition"}),l.jsx(se,{value:"action",children:"Action"}),l.jsx(se,{value:"logical",children:"Logical (AND/OR)"})]})]}),l.jsx(Re,{fullWidth:!0,label:"Label",value:x.label,onChange:j=>g({...x,label:j.target.value}),sx:{mt:2}}),p==="condition"&&l.jsxs(l.Fragment,{children:[l.jsx(Re,{fullWidth:!0,label:"Field",value:x.field,onChange:j=>g({...x,field:j.target.value}),sx:{mt:2},placeholder:"e.g., order.priority"}),l.jsxs(tn,{fullWidth:!0,sx:{mt:2},children:[l.jsx(nn,{children:"Operator"}),l.jsxs(on,{value:x.operator,label:"Operator",onChange:j=>g({...x,operator:j.target.value}),children:[l.jsx(se,{value:"eq",children:"Equals (==)"}),l.jsx(se,{value:"ne",children:"Not Equals (!=)"}),l.jsx(se,{value:"gt",children:"Greater Than (>)"}),l.jsx(se,{value:"lt",children:"Less Than (<)"}),l.jsx(se,{value:"gte",children:"Greater Than or Equal (>=)"}),l.jsx(se,{value:"lte",children:"Less Than or Equal (<=)"}),l.jsx(se,{value:"in",children:"In"}),l.jsx(se,{value:"nin",children:"Not In"}),l.jsx(se,{value:"contains",children:"Contains"}),l.jsx(se,{value:"regex",children:"Regex"})]})]}),l.jsx(Re,{fullWidth:!0,label:"Value",value:x.value,onChange:j=>g({...x,value:j.target.value}),sx:{mt:2}})]}),p==="action"&&l.jsxs(l.Fragment,{children:[l.jsxs(tn,{fullWidth:!0,sx:{mt:2},children:[l.jsx(nn,{children:"Action Type"}),l.jsxs(on,{value:x.actionType,label:"Action Type",onChange:j=>g({...x,actionType:j.target.value}),children:[l.jsx(se,{value:"assign_driver",children:"Assign Driver"}),l.jsx(se,{value:"assign_vehicle",children:"Assign Vehicle"}),l.jsx(se,{value:"set_priority",children:"Set Priority"}),l.jsx(se,{value:"notify",children:"Send Notification"}),l.jsx(se,{value:"optimize",children:"Run Optimization"})]})]}),l.jsx(Re,{fullWidth:!0,label:"Parameters (JSON)",value:JSON.stringify(x.params),onChange:j=>{try{const M=JSON.parse(j.target.value);g({...x,params:M})}catch{}},sx:{mt:2},multiline:!0,rows:3})]})]}),l.jsxs(rt,{children:[l.jsx(pe,{onClick:()=>f(!1),children:"Cancel"}),l.jsx(pe,{onClick:E,variant:"contained",children:"Add"})]})]})]})};function gg(e,t){const n=e.filter(r=>r.type==="condition"),o=e.filter(r=>r.type==="logical");if(n.length===0)return{};if(n.length===1&&o.length===0){const r=n[0];return Co(r)}return o.length>0?mg(n,o):{and:n.map(Co)}}function Co(e){const{field:t,operator:n,value:o}=e.data,s={eq:"$eq",ne:"$ne",gt:"$gt",lt:"$lt",gte:"$gte",lte:"$lte",in:"$in",nin:"$nin",contains:"$regex",regex:"$regex"}[n]||n;if(n==="contains")return{[t]:{[s]:o,$options:"i"}};let i=o;return typeof o=="string"&&!isNaN(Number(o))&&(i=Number(o)),{[t]:{[s]:i}}}function mg(e,t,n){var s;const o=t[0];return{[((s=o==null?void 0:o.data.label)==null?void 0:s.toLowerCase())==="or"?"or":"and"]:e.map(Co)}}function yg(e,t){const n=e.filter(r=>r.type==="action");if(n.length===0)return{};const o={};return n.forEach(r=>{const{actionType:s,params:i}=r.data;switch(s){case"assign_driver":o.assign_driver=!0,i.criteria&&(o.driver_criteria=i.criteria);break;case"assign_vehicle":o.assign_vehicle=!0,i.criteria&&(o.vehicle_criteria=i.criteria);break;case"set_priority":o.set_priority=i.priority||50;break;case"notify":o.notify=!0,i.message&&(o.notification_message=i.message);break;case"optimize":o.optimize=!0;break;default:o[s]=i}}),o}const xg=({open:e,onClose:t,ruleId:n,ruleName:o,onTest:r})=>{const[s,i]=v.useState(`{
  "order_id": 123,
  "driver_rating": 4.8,
  "distance_km": 3.5
}`),[a,c]=v.useState(!1),[u,d]=v.useState(null),[f,p]=v.useState(null),h=async()=>{c(!0),p(null),d(null);try{const g=JSON.parse(s),b=await r(n,g);d(b)}catch(g){p(g.message||"Failed to test rule")}finally{c(!1)}},x=()=>{i(`{
  "order_id": 123,
  "driver_rating": 4.8,
  "distance_km": 3.5
}`),d(null),p(null),t()};return l.jsxs(ot,{open:e,onClose:x,maxWidth:"md",fullWidth:!0,children:[l.jsx(it,{children:l.jsxs(K,{display:"flex",alignItems:"center",gap:1,children:[l.jsx(Dt,{color:"primary"}),l.jsxs(W,{variant:"h6",children:["Test Rule: ",o]})]})}),l.jsxs(st,{children:[l.jsxs(K,{sx:{mb:2},children:[l.jsx(W,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"Enter test data (JSON format):"}),l.jsx(Re,{fullWidth:!0,multiline:!0,rows:8,value:s,onChange:g=>i(g.target.value),placeholder:"Enter test data as JSON",variant:"outlined",sx:{fontFamily:"monospace"}})]}),f&&l.jsx(Lt,{severity:"error",sx:{mb:2},children:f}),u&&l.jsxs(K,{sx:{mt:2},children:[l.jsx(So,{sx:{mb:2}}),l.jsx(W,{variant:"subtitle1",fontWeight:"bold",sx:{mb:1},children:"Test Result:"}),l.jsx(K,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:u.matched?l.jsxs(l.Fragment,{children:[l.jsx(Hn,{color:"success"}),l.jsx(_e,{label:"Rule Matched",color:"success",size:"small"})]}):l.jsxs(l.Fragment,{children:[l.jsx(os,{color:"error"}),l.jsx(_e,{label:"Rule Not Matched",color:"error",size:"small"})]})}),l.jsx(K,{sx:{bgcolor:"grey.100",p:2,borderRadius:1,mb:2},children:l.jsx(W,{variant:"body2",component:"pre",sx:{fontFamily:"monospace",whiteSpace:"pre-wrap"},children:JSON.stringify(u,null,2)})}),u.execution_time_ms&&l.jsxs(W,{variant:"caption",color:"text.secondary",children:["Execution Time: ",u.execution_time_ms,"ms"]})]})]}),l.jsxs(rt,{children:[l.jsx(pe,{onClick:x,children:"Close"}),l.jsx(pe,{variant:"contained",startIcon:a?l.jsx(Ln,{size:16}):l.jsx(Dt,{}),onClick:h,disabled:a,children:a?"Testing...":"Run Test"})]})]})},vg=({open:e,onClose:t,ruleId:n,ruleName:o,onLoadLogs:r})=>{const[s,i]=v.useState([]),[a,c]=v.useState(!1),[u,d]=v.useState(1),[f,p]=v.useState("all"),h=10;v.useEffect(()=>{e&&x()},[e,u,f]);const x=async()=>{c(!0);try{const m={skip:(u-1)*h,limit:h,status:f!=="all"?f:void 0},w=await r(n,m);i(w)}catch(m){console.error("Failed to load logs:",m)}finally{c(!1)}},g=m=>{switch(m){case"success":return l.jsx(_e,{label:"Success",color:"success",size:"small",icon:l.jsx(Hn,{})});case"failure":return l.jsx(_e,{label:"Failure",color:"error",size:"small",icon:l.jsx(os,{})});default:return l.jsx(_e,{label:m,size:"small"})}},b=m=>new Date(m).toLocaleString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"});return l.jsxs(ot,{open:e,onClose:t,maxWidth:"lg",fullWidth:!0,children:[l.jsx(it,{children:l.jsxs(K,{display:"flex",alignItems:"center",gap:1,children:[l.jsx(jn,{color:"primary"}),l.jsxs(W,{variant:"h6",children:["Rule Execution Logs: ",o]})]})}),l.jsxs(st,{children:[l.jsxs(K,{sx:{mb:2,display:"flex",gap:2},children:[l.jsxs(tn,{size:"small",sx:{minWidth:150},children:[l.jsx(nn,{children:"Status Filter"}),l.jsxs(on,{value:f,label:"Status Filter",onChange:m=>{p(m.target.value),d(1)},children:[l.jsx(se,{value:"all",children:"All"}),l.jsx(se,{value:"success",children:"Success"}),l.jsx(se,{value:"failure",children:"Failure"})]})]}),l.jsx(pe,{variant:"outlined",size:"small",onClick:x,children:"Refresh"})]}),a?l.jsx(K,{display:"flex",justifyContent:"center",p:4,children:l.jsx(Ln,{})}):s.length===0?l.jsx(K,{p:4,textAlign:"center",children:l.jsx(W,{color:"text.secondary",children:"No logs found"})}):l.jsxs(l.Fragment,{children:[l.jsx(Nc,{component:Pt,variant:"outlined",children:l.jsxs(fc,{size:"small",children:[l.jsx(Ac,{children:l.jsxs(gr,{children:[l.jsx(Ve,{children:"Timestamp"}),l.jsx(Ve,{children:"Status"}),l.jsx(Ve,{children:"Order ID"}),l.jsx(Ve,{children:"Execution Time"}),l.jsx(Ve,{children:"Result"})]})}),l.jsx(xc,{children:s.map(m=>l.jsxs(gr,{children:[l.jsx(Ve,{children:l.jsxs(K,{display:"flex",alignItems:"center",gap:.5,children:[l.jsx(Oc,{fontSize:"small"}),l.jsx(W,{variant:"body2",children:b(m.executed_at||m.created_at)})]})}),l.jsx(Ve,{children:g(m.status)}),l.jsx(Ve,{children:l.jsx(W,{variant:"body2",children:m.order_id||"-"})}),l.jsx(Ve,{children:l.jsxs(W,{variant:"body2",children:[m.execution_time_ms,"ms"]})}),l.jsx(Ve,{children:l.jsx(W,{variant:"body2",sx:{maxWidth:300,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:JSON.stringify(m.result||m.actions_taken)})})]},m.id))})]})}),l.jsx(K,{display:"flex",justifyContent:"center",mt:2,children:l.jsx(Gl,{count:Math.ceil(s.length/h)||1,page:u,onChange:(m,w)=>d(w),color:"primary"})})]})]}),l.jsx(rt,{children:l.jsx(pe,{onClick:t,children:"Close"})})]})},bg=({open:e,onClose:t,ruleId:n,ruleName:o,onLoadPerformance:r})=>{var f;const[s,i]=v.useState(null),[a,c]=v.useState(!1);v.useEffect(()=>{e&&u()},[e]);const u=async()=>{c(!0);try{const p=await r(n);i(p)}catch(p){console.error("Failed to load performance data:",p)}finally{c(!1)}},d=({title:p,value:h,icon:x,color:g})=>l.jsx(Mt,{variant:"outlined",children:l.jsx(Rt,{children:l.jsxs(K,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[l.jsxs(K,{children:[l.jsx(W,{variant:"body2",color:"text.secondary",gutterBottom:!0,children:p}),l.jsx(W,{variant:"h4",fontWeight:"bold",color:g,children:h})]}),l.jsx(K,{sx:{color:g,fontSize:40},children:x})]})})});return l.jsxs(ot,{open:e,onClose:t,maxWidth:"md",fullWidth:!0,children:[l.jsx(it,{children:l.jsxs(K,{display:"flex",alignItems:"center",gap:1,children:[l.jsx(kn,{color:"primary"}),l.jsxs(W,{variant:"h6",children:["Performance Metrics: ",o]})]})}),l.jsx(st,{children:a?l.jsx(K,{display:"flex",justifyContent:"center",p:4,children:l.jsx(Ln,{})}):s?l.jsxs(K,{children:[l.jsxs(ie,{container:!0,spacing:2,sx:{mb:3},children:[l.jsx(ie,{item:!0,xs:6,children:l.jsx(d,{title:"Total Executions",value:s.total_executions||0,icon:l.jsx(kn,{}),color:"primary.main"})}),l.jsx(ie,{item:!0,xs:6,children:l.jsx(d,{title:"Success Rate",value:`${((s.success_rate||0)*100).toFixed(1)}%`,icon:l.jsx(Hn,{}),color:"success.main"})}),l.jsx(ie,{item:!0,xs:6,children:l.jsx(d,{title:"Avg Execution Time",value:`${s.avg_execution_time_ms||0}ms`,icon:l.jsx(Xc,{}),color:"info.main"})}),l.jsx(ie,{item:!0,xs:6,children:l.jsx(d,{title:"Performance Score",value:((f=s.performance_score)==null?void 0:f.toFixed(1))||"N/A",icon:l.jsx(Kc,{}),color:"warning.main"})})]}),l.jsx(So,{sx:{my:2}}),l.jsx(W,{variant:"subtitle1",fontWeight:"bold",gutterBottom:!0,children:"Detailed Statistics"}),l.jsx(K,{sx:{bgcolor:"grey.50",p:2,borderRadius:1},children:l.jsxs(ie,{container:!0,spacing:2,children:[l.jsxs(ie,{item:!0,xs:6,children:[l.jsx(W,{variant:"body2",color:"text.secondary",children:"Total Successes:"}),l.jsx(W,{variant:"body1",fontWeight:"medium",children:s.successful_executions||0})]}),l.jsxs(ie,{item:!0,xs:6,children:[l.jsx(W,{variant:"body2",color:"text.secondary",children:"Total Failures:"}),l.jsx(W,{variant:"body1",fontWeight:"medium",children:s.failed_executions||0})]}),l.jsxs(ie,{item:!0,xs:6,children:[l.jsx(W,{variant:"body2",color:"text.secondary",children:"Min Execution Time:"}),l.jsxs(W,{variant:"body1",fontWeight:"medium",children:[s.min_execution_time_ms||0,"ms"]})]}),l.jsxs(ie,{item:!0,xs:6,children:[l.jsx(W,{variant:"body2",color:"text.secondary",children:"Max Execution Time:"}),l.jsxs(W,{variant:"body1",fontWeight:"medium",children:[s.max_execution_time_ms||0,"ms"]})]}),l.jsxs(ie,{item:!0,xs:12,children:[l.jsx(W,{variant:"body2",color:"text.secondary",children:"Last Executed:"}),l.jsx(W,{variant:"body1",fontWeight:"medium",children:s.last_executed_at?new Date(s.last_executed_at).toLocaleString("ko-KR"):"Never"})]})]})}),s.recent_trend&&l.jsxs(K,{sx:{mt:2},children:[l.jsx(W,{variant:"body2",color:"text.secondary",children:"Recent Trend:"}),l.jsxs(W,{variant:"body1",children:[s.recent_trend==="improving"&&"📈 Improving",s.recent_trend==="stable"&&"➡️ Stable",s.recent_trend==="declining"&&"📉 Declining"]})]})]}):l.jsx(K,{p:4,textAlign:"center",children:l.jsx(W,{color:"text.secondary",children:"No performance data available"})})}),l.jsxs(rt,{children:[l.jsx(pe,{onClick:t,children:"Close"}),l.jsx(pe,{variant:"outlined",onClick:u,children:"Refresh"})]})]})},wg=({open:e,onClose:t,onSimulate:n})=>{const[o,r]=v.useState(`{
  "orders": [
    { "id": 1, "priority": "high", "distance_km": 5 },
    { "id": 2, "priority": "normal", "distance_km": 10 }
  ],
  "drivers": [
    { "id": 1, "rating": 4.8, "available": true },
    { "id": 2, "rating": 4.5, "available": true }
  ]
}`),[s,i]=v.useState(!1),[a,c]=v.useState(null),[u,d]=v.useState(null),f=async()=>{i(!0),d(null),c(null);try{const h=JSON.parse(o),x=await n(h);c(x)}catch(h){d(h.message||"Failed to run simulation")}finally{i(!1)}},p=()=>{c(null),d(null),t()};return l.jsxs(ot,{open:e,onClose:p,maxWidth:"lg",fullWidth:!0,children:[l.jsx(it,{children:l.jsxs(K,{display:"flex",alignItems:"center",gap:1,children:[l.jsx(qr,{color:"primary"}),l.jsx(W,{variant:"h6",children:"Rule Simulation"})]})}),l.jsxs(st,{children:[l.jsx(Lt,{severity:"info",sx:{mb:2},children:"Test how your rules would perform against different scenarios before applying them in production."}),l.jsxs(K,{sx:{mb:3},children:[l.jsx(W,{variant:"body2",color:"text.secondary",sx:{mb:1},children:"Scenario Data (JSON):"}),l.jsx(Re,{fullWidth:!0,multiline:!0,rows:12,value:o,onChange:h=>r(h.target.value),placeholder:"Enter scenario data",variant:"outlined",sx:{fontFamily:"monospace"}})]}),u&&l.jsx(Lt,{severity:"error",sx:{mb:2},children:u}),a&&l.jsxs(K,{sx:{mt:2},children:[l.jsx(So,{sx:{mb:2}}),l.jsxs(K,{display:"flex",alignItems:"center",gap:1,mb:2,children:[l.jsx(kn,{color:"primary"}),l.jsx(W,{variant:"subtitle1",fontWeight:"bold",children:"Simulation Results"})]}),l.jsxs(ie,{container:!0,spacing:2,sx:{mb:2},children:[l.jsx(ie,{item:!0,xs:4,children:l.jsx(Mt,{variant:"outlined",children:l.jsxs(Rt,{children:[l.jsx(W,{variant:"body2",color:"text.secondary",children:"Rules Applied"}),l.jsx(W,{variant:"h5",fontWeight:"bold",color:"primary.main",children:a.rules_applied||0})]})})}),l.jsx(ie,{item:!0,xs:4,children:l.jsx(Mt,{variant:"outlined",children:l.jsxs(Rt,{children:[l.jsx(W,{variant:"body2",color:"text.secondary",children:"Orders Matched"}),l.jsx(W,{variant:"h5",fontWeight:"bold",color:"success.main",children:a.orders_matched||0})]})})}),l.jsx(ie,{item:!0,xs:4,children:l.jsx(Mt,{variant:"outlined",children:l.jsxs(Rt,{children:[l.jsx(W,{variant:"body2",color:"text.secondary",children:"Total Time"}),l.jsxs(W,{variant:"h5",fontWeight:"bold",color:"info.main",children:[a.execution_time_ms||0,"ms"]})]})})})]}),l.jsxs(K,{sx:{bgcolor:"grey.100",p:2,borderRadius:1,mb:2},children:[l.jsx(W,{variant:"body2",fontWeight:"medium",gutterBottom:!0,children:"Detailed Results:"}),l.jsx(W,{variant:"body2",component:"pre",sx:{fontFamily:"monospace",whiteSpace:"pre-wrap"},children:JSON.stringify(a,null,2)})]}),a.recommendations&&a.recommendations.length>0&&l.jsxs(K,{children:[l.jsx(W,{variant:"body2",fontWeight:"medium",gutterBottom:!0,children:"Recommendations:"}),a.recommendations.map((h,x)=>l.jsx(_e,{label:h,size:"small",sx:{mr:1,mb:1},color:"warning"},x))]})]})]}),l.jsxs(rt,{children:[l.jsx(pe,{onClick:p,children:"Close"}),l.jsx(pe,{variant:"contained",startIcon:s?l.jsx(Ln,{size:16}):l.jsx(Dt,{}),onClick:f,disabled:s,children:s?"Running...":"Run Simulation"})]})]})},Yr=[{id:"nearby-drivers",name:"Nearby Drivers Priority",description:"Prioritize drivers within 5km of pickup location",category:"Distance",difficulty:"easy",popular:!0,rule_type:"assignment",priority:90,conditions:{distance_km:{$lte:5}},actions:{assign_driver:!0,notify:!0}},{id:"high-rated-drivers",name:"High-Rated Drivers First",description:"Assign orders to drivers with rating >= 4.5",category:"Quality",difficulty:"easy",popular:!0,rule_type:"assignment",priority:85,conditions:{driver_rating:{$gte:4.5},driver_status:{$eq:"available"}},actions:{assign_driver:!0}},{id:"urgent-orders",name:"Urgent Order Handling",description:"Fast-track high priority orders to nearest available driver",category:"Priority",difficulty:"medium",popular:!0,rule_type:"assignment",priority:100,conditions:{and:[{order_priority:{$eq:"urgent"}},{distance_km:{$lte:10}},{driver_available:{$eq:!0}}]},actions:{assign_driver:!0,set_priority:{value:100},notify:{channel:"sms",urgent:!0}}},{id:"peak-hours",name:"Peak Hours Optimization",description:"Optimize assignments during peak hours (8-10 AM, 6-8 PM)",category:"Time",difficulty:"medium",popular:!1,rule_type:"optimization",priority:80,conditions:{or:[{current_hour:{$gte:8,$lte:10}},{current_hour:{$gte:18,$lte:20}}]},actions:{optimize:!0,algorithm:"hungarian"}},{id:"temperature-sensitive",name:"Temperature-Sensitive Cargo",description:"Assign refrigerated vehicles for cold chain orders",category:"Special",difficulty:"medium",popular:!1,rule_type:"constraint",priority:95,conditions:{and:[{order_type:{$eq:"cold_chain"}},{vehicle_type:{$eq:"refrigerated"}},{temperature_control:{$eq:!0}}]},actions:{assign_vehicle:{type:"refrigerated"},monitor_temperature:!0,notify:{channel:"app"}}},{id:"balanced-workload",name:"Balanced Driver Workload",description:"Distribute orders evenly among available drivers",category:"Fairness",difficulty:"hard",popular:!1,rule_type:"optimization",priority:70,conditions:{driver_available:{$eq:!0}},actions:{optimize:!0,strategy:"balanced_workload",max_orders_per_driver:5}},{id:"multi-stop-route",name:"Multi-Stop Route Optimization",description:"Optimize routes for orders with multiple stops",category:"Efficiency",difficulty:"hard",popular:!0,rule_type:"optimization",priority:75,conditions:{order_stops:{$gt:2}},actions:{optimize:!0,algorithm:"tsp",minimize:"total_distance"}},{id:"new-driver-training",name:"New Driver Training Assignments",description:"Assign easier routes to new drivers (< 30 days)",category:"Training",difficulty:"easy",popular:!1,rule_type:"assignment",priority:60,conditions:{and:[{driver_experience_days:{$lt:30}},{distance_km:{$lte:15}},{order_complexity:{$eq:"simple"}}]},actions:{assign_driver:!0,mentor_support:!0}}],Cg=({open:e,onClose:t,onSelectTemplate:n})=>{const[o,r]=v.useState(""),[s,i]=v.useState("all"),a=Yr.filter(f=>{const p=f.name.toLowerCase().includes(o.toLowerCase())||f.description.toLowerCase().includes(o.toLowerCase()),h=s==="all"||f.category===s;return p&&h}),c=["all",...Array.from(new Set(Yr.map(f=>f.category)))],u=f=>{switch(f){case"easy":return"success";case"medium":return"warning";case"hard":return"error";default:return"default"}},d=f=>{n(f),t()};return l.jsxs(ot,{open:e,onClose:t,maxWidth:"lg",fullWidth:!0,children:[l.jsx(it,{children:l.jsxs(K,{display:"flex",alignItems:"center",gap:1,children:[l.jsx(ts,{color:"primary"}),l.jsx(W,{variant:"h6",children:"Rule Template Gallery"})]})}),l.jsxs(st,{children:[l.jsx(K,{sx:{mb:3},children:l.jsx(Re,{fullWidth:!0,size:"small",placeholder:"Search templates...",value:o,onChange:f=>r(f.target.value),InputProps:{startAdornment:l.jsx(vl,{position:"start",children:l.jsx(Uc,{})})}})}),l.jsx(K,{sx:{mb:2,display:"flex",gap:1,flexWrap:"wrap"},children:c.map(f=>l.jsx(_e,{label:f,onClick:()=>i(f),color:s===f?"primary":"default",variant:s===f?"filled":"outlined"},f))}),l.jsx(ie,{container:!0,spacing:2,children:a.map(f=>l.jsx(ie,{item:!0,xs:12,md:6,children:l.jsxs(Mt,{variant:"outlined",sx:{height:"100%",display:"flex",flexDirection:"column"},children:[l.jsxs(Rt,{sx:{flexGrow:1},children:[l.jsxs(K,{display:"flex",alignItems:"center",justifyContent:"space-between",mb:1,children:[l.jsx(W,{variant:"h6",component:"div",children:f.name}),f.popular&&l.jsx(Yc,{color:"warning",fontSize:"small"})]}),l.jsx(W,{variant:"body2",color:"text.secondary",sx:{mb:2},children:f.description}),l.jsxs(K,{display:"flex",gap:1,flexWrap:"wrap",children:[l.jsx(_e,{label:f.category,size:"small",variant:"outlined"}),l.jsx(_e,{label:f.difficulty,size:"small",color:u(f.difficulty)}),l.jsx(_e,{label:f.rule_type,size:"small",color:"info"})]})]}),l.jsx(Ua,{children:l.jsx(pe,{size:"small",variant:"contained",startIcon:l.jsx(Eo,{}),onClick:()=>d(f),fullWidth:!0,children:"Use Template"})})]})},f.id))}),a.length===0&&l.jsx(K,{textAlign:"center",py:4,children:l.jsx(W,{color:"text.secondary",children:"No templates found"})})]}),l.jsx(rt,{children:l.jsx(pe,{onClick:t,children:"Close"})})]})},un=v.createContext({});function _g(e){return le("MuiTimeline",e)}ae("MuiTimeline",["root","positionLeft","positionRight","positionAlternate","positionAlternateReverse"]);function at(e){return e==="alternate-reverse"?"positionAlternateReverse":`position${Y(e)}`}const Sg=["position","className"],Eg=e=>{const{position:t,classes:n}=e,o={root:["root",t&&at(t)]};return ce(o,_g,n)},$g=ee("ul",{name:"MuiTimeline",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,n.position&&t[at(n.position)]]}})({display:"flex",flexDirection:"column",padding:"6px 16px",flexGrow:1}),Tg=v.forwardRef(function(t,n){const o=bt({props:t,name:"MuiTimeline"}),{position:r="right",className:s}=o,i=oe(o,Sg),a=D({},o,{position:r}),c=Eg(a),u=v.useMemo(()=>({position:r}),[r]);return l.jsx(un.Provider,{value:u,children:l.jsx($g,D({className:te(c.root,s),ownerState:a,ref:n},i))})});function Ng(e){return le("MuiTimelineConnector",e)}ae("MuiTimelineConnector",["root"]);const jg=["className"],kg=e=>{const{classes:t}=e;return ce({root:["root"]},Ng,t)},Mg=ee("span",{name:"MuiTimelineConnector",slot:"Root",overridesResolver:(e,t)=>t.root})(({theme:e})=>({width:2,backgroundColor:(e.vars||e).palette.grey[400],flexGrow:1})),Rg=v.forwardRef(function(t,n){const o=bt({props:t,name:"MuiTimelineConnector"}),{className:r}=o,s=oe(o,jg),i=o,a=kg(i);return l.jsx(Mg,D({className:te(a.root,r),ownerState:i,ref:n},s))});function Ig(e){return le("MuiTimelineContent",e)}const Ag=ae("MuiTimelineContent",["root","positionLeft","positionRight","positionAlternate","positionAlternateReverse"]),zg=["className"],Pg=e=>{const{position:t,classes:n}=e,o={root:["root",at(t)]};return ce(o,Ig,n)},Dg=ee(W,{name:"MuiTimelineContent",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[at(n.position)]]}})(({ownerState:e})=>D({flex:1,padding:"6px 16px",textAlign:"left"},e.position==="left"&&{textAlign:"right"})),Lg=v.forwardRef(function(t,n){const o=bt({props:t,name:"MuiTimelineContent"}),{className:r}=o,s=oe(o,zg),{position:i}=v.useContext(un),a=D({},o,{position:i||"right"}),c=Pg(a);return l.jsx(Dg,D({component:"div",className:te(c.root,r),ownerState:a,ref:n},s))});function Og(e){return le("MuiTimelineDot",e)}ae("MuiTimelineDot",["root","filled","outlined","filledGrey","outlinedGrey","filledPrimary","outlinedPrimary","filledSecondary","outlinedSecondary"]);const Hg=["className","color","variant"],Bg=e=>{const{color:t,variant:n,classes:o}=e,r={root:["root",n,t!=="inherit"&&`${n}${Y(t)}`]};return ce(r,Og,o)},Vg=ee("span",{name:"MuiTimelineDot",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[n.color!=="inherit"&&`${n.variant}${Y(n.color)}`],t[n.variant]]}})(({ownerState:e,theme:t})=>D({display:"flex",alignSelf:"baseline",borderStyle:"solid",borderWidth:2,padding:4,borderRadius:"50%",boxShadow:(t.vars||t).shadows[1],margin:"11.5px 0"},e.variant==="filled"&&D({borderColor:"transparent"},e.color!=="inherit"&&D({},e.color==="grey"?{color:(t.vars||t).palette.grey[50],backgroundColor:(t.vars||t).palette.grey[400]}:{color:(t.vars||t).palette[e.color].contrastText,backgroundColor:(t.vars||t).palette[e.color].main})),e.variant==="outlined"&&D({boxShadow:"none",backgroundColor:"transparent"},e.color!=="inherit"&&D({},e.color==="grey"?{borderColor:(t.vars||t).palette.grey[400]}:{borderColor:(t.vars||t).palette[e.color].main})))),Fg=v.forwardRef(function(t,n){const o=bt({props:t,name:"MuiTimelineDot"}),{className:r,color:s="grey",variant:i="filled"}=o,a=oe(o,Hg),c=D({},o,{color:s,variant:i}),u=Bg(c);return l.jsx(Vg,D({className:te(u.root,r),ownerState:c,ref:n},a))});function Wg(e){return le("MuiTimelineOppositeContent",e)}const Ug=ae("MuiTimelineOppositeContent",["root","positionLeft","positionRight","positionAlternate","positionAlternateReverse"]),Xg=["className"],Yg=e=>{const{position:t,classes:n}=e,o={root:["root",at(t)]};return ce(o,Wg,n)},Gg=ee(W,{name:"MuiTimelineOppositeContent",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[at(n.position)]]}})(({ownerState:e})=>D({padding:"6px 16px",marginRight:"auto",textAlign:"right",flex:1},e.position==="left"&&{textAlign:"left"})),wi=v.forwardRef(function(t,n){const o=bt({props:t,name:"MuiTimelineOppositeContent"}),{className:r}=o,s=oe(o,Xg),{position:i}=v.useContext(un),a=D({},o,{position:i||"left"}),c=Yg(a);return l.jsx(Gg,D({component:"div",className:te(c.root,r),ownerState:a,ref:n},s))});wi.muiName="TimelineOppositeContent";function qg(e){return le("MuiTimelineItem",e)}ae("MuiTimelineItem",["root","positionLeft","positionRight","positionAlternate","positionAlternateReverse","missingOppositeContent"]);const Kg=["position","className"],Zg=e=>{const{position:t,classes:n,hasOppositeContent:o}=e,r={root:["root",at(t),!o&&"missingOppositeContent"]};return ce(r,qg,n)},Jg=ee("li",{name:"MuiTimelineItem",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:n}=e;return[t.root,t[at(n.position)]]}})(({ownerState:e})=>D({listStyle:"none",display:"flex",position:"relative",minHeight:70},e.position==="left"&&{flexDirection:"row-reverse"},(e.position==="alternate"||e.position==="alternate-reverse")&&{[`&:nth-of-type(${e.position==="alternate"?"even":"odd"})`]:{flexDirection:"row-reverse",[`& .${Ag.root}`]:{textAlign:"right"},[`& .${Ug.root}`]:{textAlign:"left"}}},!e.hasOppositeContent&&{"&::before":{content:'""',flex:1,padding:"6px 16px"}})),Qg=v.forwardRef(function(t,n){const o=bt({props:t,name:"MuiTimelineItem"}),{position:r,className:s}=o,i=oe(o,Kg),{position:a}=v.useContext(un);let c=!1;v.Children.forEach(o.children,p=>{Sa(p,["TimelineOppositeContent"])&&(c=!0)});const u=D({},o,{position:r||a||"right",hasOppositeContent:c}),d=Zg(u),f=v.useMemo(()=>({position:u.position}),[u.position]);return l.jsx(un.Provider,{value:f,children:l.jsx(Jg,D({className:te(d.root,s),ownerState:u,ref:n},i))})});function em(e){return le("MuiTimelineSeparator",e)}ae("MuiTimelineSeparator",["root"]);const tm=["className"],nm=e=>{const{classes:t}=e;return ce({root:["root"]},em,t)},om=ee("div",{name:"MuiTimelineSeparator",slot:"Root",overridesResolver:(e,t)=>t.root})({display:"flex",flexDirection:"column",flex:0,alignItems:"center"}),rm=v.forwardRef(function(t,n){const o=bt({props:t,name:"MuiTimelineSeparator"}),{className:r}=o,s=oe(o,tm),i=o,a=nm(i);return l.jsx(om,D({className:te(a.root,r),ownerState:i,ref:n},s))}),sm=({open:e,onClose:t,ruleId:n,ruleName:o,onLoadVersions:r,onRestoreVersion:s})=>{const[i,a]=v.useState([]),[c,u]=v.useState(!1),[d,f]=v.useState(null);v.useEffect(()=>{e&&p()},[e]);const p=async()=>{u(!0);try{const g=[{version:3,created_at:new Date().toISOString(),created_by:"admin",is_current:!0,changes_summary:"Updated priority to 100",conditions:{driver_rating:{$gte:4.5}},actions:{assign_driver:!0},priority:100},{version:2,created_at:new Date(Date.now()-864e5).toISOString(),created_by:"admin",is_current:!1,changes_summary:"Added distance constraint",conditions:{driver_rating:{$gte:4.5},distance_km:{$lte:10}},actions:{assign_driver:!0},priority:90},{version:1,created_at:new Date(Date.now()-1728e5).toISOString(),created_by:"admin",is_current:!1,changes_summary:"Initial version",conditions:{driver_rating:{$gte:4}},actions:{assign_driver:!0},priority:80}];a(g)}catch(g){console.error("Failed to load versions:",g)}finally{u(!1)}},h=async g=>{if(confirm(`Are you sure you want to restore to version ${g}?`)){f(g);try{await s(n,g),await p(),alert("Version restored successfully")}catch{alert("Failed to restore version")}finally{f(null)}}},x=g=>new Date(g).toLocaleString("ko-KR",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return l.jsxs(ot,{open:e,onClose:t,maxWidth:"md",fullWidth:!0,children:[l.jsx(it,{children:l.jsxs(K,{display:"flex",alignItems:"center",gap:1,children:[l.jsx(jn,{color:"primary"}),l.jsxs(W,{variant:"h6",children:["Version History: ",o]})]})}),l.jsxs(st,{children:[l.jsx(Lt,{severity:"info",sx:{mb:2},children:"View and restore previous versions of this rule. Restoring a version will create a new version with the old settings."}),i.length===0?l.jsx(K,{textAlign:"center",py:4,children:l.jsx(W,{color:"text.secondary",children:"No version history available"})}):l.jsx(Tg,{position:"right",children:i.map((g,b)=>l.jsxs(Qg,{children:[l.jsxs(wi,{color:"text.secondary",sx:{flex:.3},children:[l.jsx(W,{variant:"body2",children:x(g.created_at)}),g.created_by&&l.jsxs(W,{variant:"caption",color:"text.secondary",children:["by ",g.created_by]})]}),l.jsxs(rm,{children:[l.jsx(Fg,{color:g.is_current?"primary":"grey",children:g.is_current?l.jsx(Hn,{}):l.jsx(Vc,{})}),b<i.length-1&&l.jsx(Rg,{})]}),l.jsx(Lg,{children:l.jsxs(K,{sx:{mb:2},children:[l.jsxs(K,{display:"flex",alignItems:"center",gap:1,mb:1,children:[l.jsxs(W,{variant:"h6",children:["Version ",g.version]}),g.is_current&&l.jsx(_e,{label:"Current",color:"primary",size:"small"})]}),l.jsx(W,{variant:"body2",color:"text.secondary",sx:{mb:1},children:g.changes_summary||"No description"}),l.jsxs(K,{sx:{bgcolor:"grey.50",p:1.5,borderRadius:1,mb:1},children:[l.jsxs(W,{variant:"caption",display:"block",gutterBottom:!0,children:["Priority: ",g.priority]}),l.jsxs(W,{variant:"caption",display:"block",gutterBottom:!0,children:["Conditions: ",JSON.stringify(g.conditions)]}),l.jsxs(W,{variant:"caption",display:"block",children:["Actions: ",JSON.stringify(g.actions)]})]}),!g.is_current&&l.jsx(pe,{size:"small",variant:"outlined",startIcon:l.jsx(Fc,{}),onClick:()=>h(g.version),disabled:d===g.version,children:d===g.version?"Restoring...":"Restore"})]})})]},g.version))})]}),l.jsx(rt,{children:l.jsx(pe,{onClick:t,children:"Close"})})]})},um=()=>{const[e,t]=v.useState([]),[n,o]=v.useState(!1),[r,s]=v.useState(!1),[i,a]=v.useState(null),[c,u]=v.useState({open:!1,message:"",severity:"success"}),[d,f]=v.useState(0),[p,h]=v.useState(!1),[x,g]=v.useState(!1),[b,m]=v.useState(!1),[w,E]=v.useState(!1),[C,N]=v.useState(!1),[I,j]=v.useState(!1),[M,T]=v.useState(null),[A,P]=v.useState({name:"",description:"",rule_type:"assignment",priority:50,conditions:{},actions:{}});v.useEffect(()=>{F()},[]);const F=async()=>{o(!0);try{const V=await Ye.list();t(V)}catch{S("Failed to load rules","error")}finally{o(!1)}},O=async()=>{try{await Ye.create(A),S("Rule created successfully","success"),s(!1),F()}catch{S("Failed to create rule","error")}},y=async(V,J)=>{try{J?await Ye.deactivate(V):await Ye.activate(V),S(`Rule ${J?"deactivated":"activated"}`,"success"),F()}catch{S("Failed to toggle rule","error")}},$=async V=>{if(confirm("Are you sure you want to delete this rule?"))try{await Ye.delete(V),S("Rule deleted","success"),F()}catch{S("Failed to delete rule","error")}},S=(V,J)=>{u({open:!0,message:V,severity:J})},R=V=>{P({...A,conditions:V.conditions,actions:V.actions}),S("Rule configuration updated from visual builder","success")},L=(V,J)=>{T(V.currentTarget),a(J)},_=()=>{T(null)},z=()=>{_(),h(!0)},H=()=>{_(),g(!0)},B=()=>{_(),m(!0)},X=()=>{_(),j(!0)},U=V=>{P({name:V.name,description:V.description,rule_type:V.rule_type,priority:V.priority,conditions:V.conditions,actions:V.actions}),S("Template loaded successfully","success")},Z=V=>{switch(V){case"assignment":return"primary";case"constraint":return"warning";case"optimization":return"success";default:return"default"}};return l.jsxs(K,{sx:{p:3},children:[l.jsxs(K,{sx:{display:"flex",justifyContent:"space-between",mb:3},children:[l.jsx(W,{variant:"h4",children:"Dispatch Rules"}),l.jsxs(K,{display:"flex",gap:2,children:[l.jsx(pe,{variant:"outlined",startIcon:l.jsx(qr,{}),onClick:()=>E(!0),children:"Simulation"}),l.jsx(pe,{variant:"outlined",startIcon:l.jsx(ts,{}),onClick:()=>N(!0),children:"Templates"}),l.jsx(pe,{variant:"contained",startIcon:l.jsx(Eo,{}),onClick:()=>s(!0),children:"Create Rule"})]})]}),l.jsx(ie,{container:!0,spacing:3,children:e.map(V=>l.jsx(ie,{item:!0,xs:12,md:6,children:l.jsx(Mt,{children:l.jsxs(Rt,{children:[l.jsxs(K,{sx:{display:"flex",justifyContent:"space-between",mb:2},children:[l.jsx(W,{variant:"h6",children:V.name}),l.jsxs(K,{children:[l.jsx(Zn,{size:"small",onClick:()=>y(V.id,V.is_active),color:V.is_active?"primary":"default",children:V.is_active?l.jsx(qc,{}):l.jsx(Gc,{})}),l.jsx(Zn,{size:"small",onClick:J=>L(J,V),children:l.jsx(Bc,{})}),l.jsx(Zn,{size:"small",color:"error",onClick:()=>$(V.id),children:l.jsx(ns,{})})]})]}),l.jsx(W,{variant:"body2",color:"text.secondary",sx:{mb:2},children:V.description||"No description"}),l.jsxs(K,{sx:{display:"flex",gap:1,mb:2},children:[l.jsx(_e,{label:V.rule_type,color:Z(V.rule_type),size:"small"}),l.jsx(_e,{label:`Priority: ${V.priority}`,size:"small",variant:"outlined"}),l.jsx(_e,{label:`v${V.version}`,size:"small"})]}),l.jsxs(K,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[l.jsxs(W,{variant:"caption",color:"text.secondary",children:["Executions: ",V.execution_count," | Success: ",((V.success_rate||0)*100).toFixed(1),"%"]}),l.jsx(pe,{size:"small",startIcon:l.jsx(Dt,{}),children:"Test"})]})]})})},V.id))}),l.jsxs(ot,{open:r,onClose:()=>s(!1),maxWidth:"lg",fullWidth:!0,children:[l.jsx(it,{children:"Create New Rule"}),l.jsxs(st,{children:[l.jsxs(Ea,{value:d,onChange:(V,J)=>f(J),sx:{mb:2},children:[l.jsx(Zo,{label:"Basic Info"}),l.jsx(Zo,{label:"Visual Builder",icon:l.jsx(Hc,{}),iconPosition:"start"})]}),d===0&&l.jsxs(ie,{container:!0,spacing:2,sx:{mt:1},children:[l.jsx(ie,{item:!0,xs:12,children:l.jsx(Re,{fullWidth:!0,label:"Rule Name",value:A.name,onChange:V=>P({...A,name:V.target.value})})}),l.jsx(ie,{item:!0,xs:12,children:l.jsx(Re,{fullWidth:!0,multiline:!0,rows:2,label:"Description",value:A.description,onChange:V=>P({...A,description:V.target.value})})}),l.jsx(ie,{item:!0,xs:6,children:l.jsxs(tn,{fullWidth:!0,children:[l.jsx(nn,{children:"Rule Type"}),l.jsxs(on,{value:A.rule_type,label:"Rule Type",onChange:V=>P({...A,rule_type:V.target.value}),children:[l.jsx(se,{value:"assignment",children:"Assignment"}),l.jsx(se,{value:"constraint",children:"Constraint"}),l.jsx(se,{value:"optimization",children:"Optimization"})]})]})}),l.jsx(ie,{item:!0,xs:6,children:l.jsx(Re,{fullWidth:!0,type:"number",label:"Priority",value:A.priority,onChange:V=>P({...A,priority:parseInt(V.target.value)})})}),l.jsx(ie,{item:!0,xs:12,children:l.jsx(Lt,{severity:"info",children:"Switch to the Visual Builder tab to design your rule logic visually"})}),l.jsx(ie,{item:!0,xs:12,children:l.jsx(Re,{fullWidth:!0,multiline:!0,rows:4,label:"Conditions (JSON)",value:JSON.stringify(A.conditions,null,2),onChange:V=>{try{P({...A,conditions:JSON.parse(V.target.value)})}catch{}}})}),l.jsx(ie,{item:!0,xs:12,children:l.jsx(Re,{fullWidth:!0,multiline:!0,rows:4,label:"Actions (JSON)",value:JSON.stringify(A.actions,null,2),onChange:V=>{try{P({...A,actions:JSON.parse(V.target.value)})}catch{}}})})]}),d===1&&l.jsx(K,{sx:{mt:2},children:l.jsx(hg,{onSave:R})})]}),l.jsxs(rt,{children:[l.jsx(pe,{onClick:()=>s(!1),children:"Cancel"}),l.jsx(pe,{onClick:O,variant:"contained",children:"Create"})]})]}),l.jsx(ac,{open:c.open,autoHideDuration:3e3,onClose:()=>u({...c,open:!1}),children:l.jsx(Lt,{severity:c.severity,children:c.message})}),l.jsxs($a,{anchorEl:M,open:!!M,onClose:_,children:[l.jsxs(se,{onClick:z,children:[l.jsx(hn,{children:l.jsx(Dt,{fontSize:"small"})}),l.jsx(gn,{children:"Test Rule"})]}),l.jsxs(se,{onClick:H,children:[l.jsx(hn,{children:l.jsx(jn,{fontSize:"small"})}),l.jsx(gn,{children:"View Logs"})]}),l.jsxs(se,{onClick:B,children:[l.jsx(hn,{children:l.jsx(kn,{fontSize:"small"})}),l.jsx(gn,{children:"Performance"})]}),l.jsxs(se,{onClick:X,children:[l.jsx(hn,{children:l.jsx(jn,{fontSize:"small"})}),l.jsx(gn,{children:"Version History"})]})]}),i&&l.jsx(xg,{open:p,onClose:()=>h(!1),ruleId:i.id,ruleName:i.name,onTest:Ye.test}),i&&l.jsx(vg,{open:x,onClose:()=>g(!1),ruleId:i.id,ruleName:i.name,onLoadLogs:Ye.getLogs}),i&&l.jsx(bg,{open:b,onClose:()=>m(!1),ruleId:i.id,ruleName:i.name,onLoadPerformance:Ye.getPerformance}),i&&l.jsx(sm,{open:I,onClose:()=>j(!1),ruleId:i.id,ruleName:i.name,onLoadVersions:async V=>[],onRestoreVersion:async(V,J)=>{}}),l.jsx(wg,{open:w,onClose:()=>E(!1),onSimulate:Ye.simulate}),l.jsx(Cg,{open:C,onClose:()=>N(!1),onSelectTemplate:U})]})};export{um as default};
