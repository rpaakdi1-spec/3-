import{c as D,r as c,g as o,j as e,T as b}from"./index-DWrA19-Q.js";import{B as k}from"./brain-BT-kJAZk.js";import{R as C}from"./refresh-cw-BhCYe8kh.js";import{C as B}from"./circle-play-WfgGomtv.js";import{C as I}from"./circle-check-big-CgFKxf-k.js";import{C as S}from"./circle-x-CBGg8NKM.js";import{T as $}from"./truck-DYyomFIS.js";import{A as E}from"./activity-B0jPijYH.js";import{D as P}from"./dollar-sign-zNa6eeND.js";import{C as F}from"./chart-column-BBu1zpkI.js";import{S as z}from"./shield-pfDcfGCT.js";/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],U=D("info",G),m="/api/v1",se=()=>{const[h,L]=c.useState([]),[t,R]=c.useState(null),[r,M]=c.useState(null),[d,u]=c.useState(!1),[N,g]=c.useState(!1),[x,A]=c.useState("all"),[a,y]=c.useState(null);c.useEffect(()=>{j(),f()},[x]);const j=async()=>{u(!0);try{const l={Authorization:`Bearer ${localStorage.getItem("access_token")}`},i=x!=="all"?{risk_level:x}:{},T=await o.get(`${m}/ml/predictions`,{headers:l,params:i});L(T.data);const H=await o.get(`${m}/ml/statistics`,{headers:l});R(H.data)}catch(s){console.error("Failed to load ML predictions:",s)}finally{u(!1)}},f=async()=>{try{const s=localStorage.getItem("access_token"),l=await o.get(`${m}/ml/model-status`,{headers:{Authorization:`Bearer ${s}`}});M(l.data)}catch(s){console.error("Failed to load model status:",s)}},v=async()=>{var s,l;if(confirm("모델 학습을 시작하시겠습니까? 이 작업은 수 분이 소요될 수 있습니다.")){g(!0);try{const i=localStorage.getItem("access_token");await o.post(`${m}/ml/train`,{},{headers:{Authorization:`Bearer ${i}`}}),alert("모델 학습이 백그라운드에서 시작되었습니다. 잠시 후 다시 확인해주세요."),setTimeout(()=>{f(),j(),g(!1)},3e4)}catch(i){alert(`모델 학습 실패: ${((l=(s=i.response)==null?void 0:s.data)==null?void 0:l.detail)||i.message}`),g(!1)}}},w=s=>{switch(s){case"CRITICAL":return"bg-red-100 text-red-800 border-red-300";case"HIGH":return"bg-orange-100 text-orange-800 border-orange-300";case"MEDIUM":return"bg-yellow-100 text-yellow-800 border-yellow-300";case"LOW":return"bg-green-100 text-green-800 border-green-300";default:return"bg-gray-100 text-gray-800 border-gray-300"}},_=s=>{switch(s){case"CRITICAL":return e.jsx(b,{className:"w-4 h-4"});case"HIGH":return e.jsx(b,{className:"w-4 h-4"});case"MEDIUM":return e.jsx(U,{className:"w-4 h-4"});case"LOW":return e.jsx(I,{className:"w-4 h-4"});default:return null}},p=s=>new Intl.NumberFormat("ko-KR",{style:"currency",currency:"KRW",minimumFractionDigits:0}).format(s),n=s=>`${(s*100).toFixed(1)}%`;return e.jsx("div",{className:"min-h-screen bg-gray-50 p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center gap-3",children:[e.jsx(k,{className:"w-8 h-8 text-purple-600"}),"AI/ML 예측 정비 시스템"]}),e.jsx("p",{className:"text-gray-600 mt-1",children:"차량 고장 예측 및 최적 정비 시점 추천"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:j,disabled:d,className:"px-4 py-2 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors flex items-center gap-2",children:[e.jsx(C,{className:`w-4 h-4 ${d?"animate-spin":""}`}),"새로고침"]}),e.jsxs("button",{onClick:v,disabled:N||d,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors flex items-center gap-2 disabled:bg-gray-400",children:[e.jsx(B,{className:"w-4 h-4"}),N?"학습 중...":"모델 학습"]})]})]})}),r&&e.jsx("div",{className:`mb-6 p-4 rounded-lg border ${r.is_available?"bg-green-50 border-green-200":"bg-yellow-50 border-yellow-200"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[r.is_available?e.jsx(I,{className:"w-5 h-5 text-green-600"}):e.jsx(S,{className:"w-5 h-5 text-yellow-600"}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-gray-900",children:["모델 상태: ",r.is_available?"준비됨":"학습 필요"]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["특징 수: ",r.feature_count," | 상태: ",r.status]})]})]}),!r.is_available&&e.jsx("button",{onClick:v,className:"px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors",children:"지금 학습하기"})]})}),t&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"총 차량"}),e.jsx($,{className:"w-5 h-5 text-blue-500"})]}),e.jsx("p",{className:"text-2xl font-bold text-gray-900",children:t.total_vehicles}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"분석 완료"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"긴급 조치"}),e.jsx(b,{className:"w-5 h-5 text-red-500"})]}),e.jsx("p",{className:"text-2xl font-bold text-red-600",children:t.urgent_action_needed}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"CRITICAL + HIGH"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"평균 고장 확률"}),e.jsx(E,{className:"w-5 h-5 text-orange-500"})]}),e.jsx("p",{className:"text-2xl font-bold text-orange-600",children:n(t.average_failure_probability)}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"전체 평균"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"예상 총 비용"}),e.jsx(P,{className:"w-5 h-5 text-green-500"})]}),e.jsx("p",{className:"text-2xl font-bold text-green-600",children:p(t.total_estimated_cost)}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"정비 예산"})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-600",children:"위험 분포"}),e.jsx(F,{className:"w-5 h-5 text-purple-500"})]}),e.jsxs("div",{className:"flex gap-1 mt-2",children:[e.jsx("div",{className:"flex-1 bg-red-200 h-2 rounded",style:{width:`${t.risk_distribution.critical/t.total_vehicles*100}%`}}),e.jsx("div",{className:"flex-1 bg-orange-200 h-2 rounded",style:{width:`${t.risk_distribution.high/t.total_vehicles*100}%`}}),e.jsx("div",{className:"flex-1 bg-yellow-200 h-2 rounded",style:{width:`${t.risk_distribution.medium/t.total_vehicles*100}%`}}),e.jsx("div",{className:"flex-1 bg-green-200 h-2 rounded",style:{width:`${t.risk_distribution.low/t.total_vehicles*100}%`}})]}),e.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["C:",t.risk_distribution.critical," H:",t.risk_distribution.high," M:",t.risk_distribution.medium," L:",t.risk_distribution.low]})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow mb-6 p-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"위험도 필터:"}),e.jsx("div",{className:"flex gap-2",children:["all","CRITICAL","HIGH","MEDIUM","LOW"].map(s=>e.jsx("button",{onClick:()=>A(s),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${x===s?"bg-purple-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:s==="all"?"전체":s},s))})]})}),e.jsxs("div",{className:"bg-white rounded-lg shadow",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"차량 예측 목록"}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[h.length,"대 차량 분석 결과"]})]}),e.jsx("div",{className:"p-6",children:d?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(C,{className:"w-8 h-8 text-gray-400 animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-500",children:"예측 데이터 로딩 중..."})]}):h.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(k,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"예측 데이터 없음"}),e.jsx("p",{className:"text-gray-500 mb-4",children:r!=null&&r.is_available?"필터 조건을 변경해보세요":"먼저 모델을 학습해주세요"})]}):e.jsx("div",{className:"space-y-4",children:h.map(s=>e.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>y(s),children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-1",children:e.jsx($,{className:"w-6 h-6 text-gray-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s.vehicle_plate}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["차량 ID: ",s.vehicle_id]}),e.jsx("p",{className:"text-sm text-gray-700 mt-2 font-medium",children:s.recommendation})]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("span",{className:`inline-flex items-center gap-1 px-3 py-1 rounded-full text-sm font-medium border ${w(s.risk_level)}`,children:[_(s.risk_level),s.risk_level]})})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 mb-3",children:[e.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:[e.jsx("span",{className:"text-xs text-gray-600",children:"고장 확률"}),e.jsx("p",{className:"text-lg font-bold text-gray-900 mt-1",children:n(s.failure_probability)})]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:[e.jsx("span",{className:"text-xs text-gray-600",children:"예상 비용"}),e.jsx("p",{className:"text-lg font-bold text-gray-900 mt-1",children:p(s.estimated_cost)})]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:[e.jsx("span",{className:"text-xs text-gray-600",children:"권장 정비"}),e.jsxs("p",{className:"text-lg font-bold text-gray-900 mt-1",children:[s.days_until_recommended_maintenance,"일 후"]})]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:[e.jsx("span",{className:"text-xs text-gray-600",children:"신뢰도"}),e.jsx("p",{className:"text-lg font-bold text-gray-900 mt-1",children:n(s.confidence_score)})]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xs font-medium text-gray-600",children:"주요 영향 요인:"}),e.jsx("div",{className:"flex gap-2 mt-2",children:s.key_factors.slice(0,3).map((l,i)=>e.jsxs("span",{className:"text-xs bg-purple-100 text-purple-800 px-2 py-1 rounded",children:[l.factor.replace(/_/g," ")," (",n(l.importance),")"]},i))})]}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200 flex gap-6 text-sm text-gray-600",children:[e.jsxs("span",{children:["총 주행: ",s.current_stats.total_distance.toLocaleString(),"km"]}),e.jsxs("span",{children:["마지막 정비: ",s.current_stats.days_since_last_maintenance,"일 전"]}),e.jsxs("span",{children:["정비 횟수: ",s.current_stats.total_maintenances,"회"]})]})]},s.vehicle_id))})})]}),a&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-900",children:[a.vehicle_plate," - 상세 예측"]}),e.jsx("button",{onClick:()=>y(null),className:"text-gray-400 hover:text-gray-600",children:e.jsx(S,{className:"w-6 h-6"})})]})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx("div",{className:"text-center",children:e.jsxs("span",{className:`inline-flex items-center gap-2 px-6 py-3 rounded-full text-lg font-bold border-2 ${w(a.risk_level)}`,children:[_(a.risk_level),a.risk_level," 위험도"]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-red-100 p-4 rounded-lg",children:[e.jsx("span",{className:"text-sm text-red-700",children:"고장 확률"}),e.jsx("p",{className:"text-3xl font-bold text-red-900 mt-2",children:n(a.failure_probability)})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 p-4 rounded-lg",children:[e.jsx("span",{className:"text-sm text-green-700",children:"예상 정비 비용"}),e.jsx("p",{className:"text-3xl font-bold text-green-900 mt-2",children:p(a.estimated_cost)})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 p-4 rounded-lg",children:[e.jsx("span",{className:"text-sm text-blue-700",children:"권장 정비 시점"}),e.jsxs("p",{className:"text-3xl font-bold text-blue-900 mt-2",children:[a.days_until_recommended_maintenance,"일 후"]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 p-4 rounded-lg",children:[e.jsx("span",{className:"text-sm text-purple-700",children:"예측 신뢰도"}),e.jsx("p",{className:"text-3xl font-bold text-purple-900 mt-2",children:n(a.confidence_score)})]})]}),e.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(z,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-yellow-900",children:"권장 조치"}),e.jsx("p",{className:"text-yellow-800 mt-1",children:a.recommendation})]})]})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"주요 영향 요인"}),e.jsx("div",{className:"space-y-2",children:a.key_factors.map((s,l)=>e.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-sm text-gray-700",children:s.factor.replace(/_/g," ")}),e.jsx("span",{className:"text-sm font-semibold text-gray-900",children:n(s.importance)})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-purple-600 h-2 rounded-full",style:{width:`${s.importance*100}%`}})})]},l))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"현재 차량 상태"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:[e.jsx("span",{className:"text-xs text-gray-600",children:"총 주행거리"}),e.jsxs("p",{className:"text-lg font-bold text-gray-900 mt-1",children:[a.current_stats.total_distance.toLocaleString(),"km"]})]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:[e.jsx("span",{className:"text-xs text-gray-600",children:"마지막 정비"}),e.jsxs("p",{className:"text-lg font-bold text-gray-900 mt-1",children:[a.current_stats.days_since_last_maintenance,"일 전"]})]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded",children:[e.jsx("span",{className:"text-xs text-gray-600",children:"총 정비 횟수"}),e.jsxs("p",{className:"text-lg font-bold text-gray-900 mt-1",children:[a.current_stats.total_maintenances,"회"]})]})]})]})]})]})})]})})};export{se as default};
