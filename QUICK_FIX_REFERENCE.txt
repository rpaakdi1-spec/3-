â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                               â•‘
â•‘         ğŸš€ GPS & ì°¨ëŸ‰ API ê¸´ê¸‰ ìˆ˜ì • ê°€ì´ë“œ (Quick Start)        â•‘
â•‘                                                               â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“‹ ë¬¸ì œ ìš”ì•½
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”
  âŒ AttributeError: 'Vehicle' object has no attribute 'has_forklift'
  âŒ API 500 Internal Server Error
  âŒ GPS ë°ì´í„° ëˆ„ë½ (gps_dataê°€ null ë˜ëŠ” ì—†ìŒ)

ğŸ¯ ì¦‰ì‹œ ì‹¤í–‰ ëª…ë ¹ì–´ (ì„œë²„ì—ì„œ ì‹¤í–‰)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

# 1. ì„œë²„ ì ‘ì†
ssh root@139.150.11.99

# 2. ì‘ì—… ë””ë ‰í† ë¦¬ë¡œ ì´ë™
cd /root/uvis

# 3. ìµœì‹  ì½”ë“œ ê°€ì ¸ì˜¤ê¸°
git pull origin main

# 4. ìë™ ìˆ˜ì • ë° ë°°í¬ (10ë¶„ ì†Œìš”)
bash fix_and_deploy_gps.sh

# ë! âœ…


ğŸ“Š ì§„ë‹¨ ì‹¤í–‰ (ë¬¸ì œ í™•ì¸ ì‹œ)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

cd /root/uvis
bash diagnose_api_issue.sh


ğŸ”§ ìˆ˜ë™ ìˆ˜ì • (ìë™ ìŠ¤í¬ë¦½íŠ¸ ì‹¤íŒ¨ ì‹œ)
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

# Step 1: ì»¨í…Œì´ë„ˆ ì¬ë¹Œë“œ
docker-compose -f docker-compose.prod.yml stop backend
docker-compose -f docker-compose.prod.yml rm -f backend
docker rmi uvis-backend
docker-compose -f docker-compose.prod.yml build --no-cache backend
docker-compose -f docker-compose.prod.yml up -d backend

# Step 2: 60ì´ˆ ëŒ€ê¸°
sleep 60

# Step 3: ìƒíƒœ í™•ì¸
docker ps
docker logs uvis-backend --tail 30


âœ… ì •ìƒ ì‘ë™ í™•ì¸
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

# Health Check (ì„œë²„)
curl http://localhost:8000/health
# ì˜ˆìƒ: {"status":"healthy",...}

# API í…ŒìŠ¤íŠ¸ (ì„œë²„)
curl -s http://localhost:8000/api/v1/vehicles/?include_gps=true&limit=1 | jq '.items[0].gps_data'
# ì˜ˆìƒ: {"latitude":35.188034,"longitude":126.79899,...}

# ë¸Œë¼ìš°ì € í…ŒìŠ¤íŠ¸
1. ë¸Œë¼ìš°ì € ì™„ì „ ì¢…ë£Œ í›„ ì¬ì‹œì‘
2. ì‹œí¬ë¦¿ ëª¨ë“œ: Ctrl+Shift+N
3. ì ‘ì†: http://139.150.11.99/orders
4. AI ë°°ì°¨ â†’ ìµœì í™” ì‹¤í–‰
5. GPS ì¢Œí‘œ í™•ì¸: "GPS: 35.188034, 126.798990"


ğŸ› ë¬¸ì œ í•´ê²°
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ë¬¸ì œ: ì—¬ì „íˆ 500 ì—ëŸ¬                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ í•´ê²°:                                                        â”‚
â”‚   docker logs uvis-backend --tail 100 | grep "has_forklift" â”‚
â”‚   â†’ has_forklift ì—ëŸ¬ê°€ ë³´ì´ë©´:                              â”‚
â”‚   docker-compose -f docker-compose.prod.yml build           â”‚
â”‚     --no-cache backend                                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ë¬¸ì œ: GPS ë°ì´í„° null                                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ í™•ì¸:                                                        â”‚
â”‚   docker exec uvis-backend python3 -c "                     â”‚
â”‚   from app.core.database import SessionLocal               â”‚
â”‚   from app.models.uvis_gps import VehicleGPSLog            â”‚
â”‚   db = SessionLocal()                                       â”‚
â”‚   print(f'GPS ë¡œê·¸: {db.query(VehicleGPSLog).count()}ê±´')  â”‚
â”‚   db.close()"                                               â”‚
â”‚   â†’ 0ê±´ì´ë©´ GPS ë™ê¸°í™” í•„ìš”                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ë¬¸ì œ: DATABASE ì—°ê²° ì‹¤íŒ¨                                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ í™•ì¸:                                                        â”‚
â”‚   grep "DATABASE_URL" docker-compose.prod.yml               â”‚
â”‚   â†’ í˜¸ìŠ¤íŠ¸ëª…ì´ "db"ì—¬ì•¼ í•¨ (postgres ì•„ë‹˜)                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


ğŸ“š ìƒì„¸ ê°€ì´ë“œ
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

ì „ì²´ ê°€ì´ë“œ: GPS_API_FIX_GUIDE.md
ì§„ë‹¨ ìŠ¤í¬ë¦½íŠ¸: diagnose_api_issue.sh
ë°°í¬ ìŠ¤í¬ë¦½íŠ¸: fix_and_deploy_gps.sh


ğŸ¯ ì„±ê³µ ì²´í¬ë¦¬ìŠ¤íŠ¸
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [ ] diagnose_api_issue.sh ì£¼ìš” ì²´í¬ í†µê³¼                    â”‚
â”‚ [ ] health endpoint â†’ "status":"healthy"                    â”‚
â”‚ [ ] vehicles API â†’ ì •ìƒ ì‘ë‹µ (500 ì•„ë‹˜)                     â”‚
â”‚ [ ] GPS API â†’ gps_data í•„ë“œ ì¡´ì¬                            â”‚
â”‚ [ ] ë¸Œë¼ìš°ì € â†’ http://139.150.11.99/orders ì ‘ì†             â”‚
â”‚ [ ] AI ë°°ì°¨ â†’ GPS ì¢Œí‘œ í‘œì‹œ                                 â”‚
â”‚ [ ] ì£¼ë¬¸ â†’ ìƒì°¨ì§€/í•˜ì°¨ì§€ í‘œì‹œ                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


â±ï¸ ì˜ˆìƒ ì†Œìš” ì‹œê°„
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  ìë™ ìŠ¤í¬ë¦½íŠ¸: 10ë¶„
  ìˆ˜ë™ ìˆ˜ì •: 15-20ë¶„
  ë¸Œë¼ìš°ì € í…ŒìŠ¤íŠ¸: 5ë¶„
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  ì´: 15-35ë¶„


ğŸ’¡ íŒ
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  1. ìë™ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë¨¼ì € ì‹¤í–‰í•˜ì„¸ìš” (ê°€ì¥ ë¹ ë¦„)
  2. ë¬¸ì œ ë°œìƒ ì‹œ ì§„ë‹¨ ìŠ¤í¬ë¦½íŠ¸ë¡œ ì›ì¸ íŒŒì•…
  3. ë¸Œë¼ìš°ì €ëŠ” ì™„ì „ ì¢…ë£Œ í›„ ì‹œí¬ë¦¿ ëª¨ë“œë¡œ í…ŒìŠ¤íŠ¸
  4. GPS ì£¼ì†Œ ë³€í™˜ ì‹¤íŒ¨ëŠ” ì •ìƒ (Naver API ì´ìŠˆ)
     â†’ GPS ì¢Œí‘œëŠ” ì •ìƒ í‘œì‹œë¨


ğŸ“ ì§€ì›
â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”

  ì—ëŸ¬ ë°œìƒ ì‹œ ë‹¤ìŒ íŒŒì¼ ì²¨ë¶€:
    - bash diagnose_api_issue.sh > diagnostic.txt
    - docker logs uvis-backend --tail 200 > backend.txt
    - docker ps -a > containers.txt


â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                               â•‘
â•‘  ğŸ¯ ì§€ê¸ˆ ë°”ë¡œ ì‹¤í–‰:  bash fix_and_deploy_gps.sh               â•‘
â•‘                                                               â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
