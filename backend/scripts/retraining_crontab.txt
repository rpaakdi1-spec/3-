# Crontab configuration for automatic ML model retraining
#
# Installation:
#   crontab -e
#   Then add the appropriate lines below
#
# Logs are written to:
#   backend/logs/retraining_job.log
#

# Set environment variables
SHELL=/bin/bash
PATH=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
PYTHONPATH=/home/user/webapp/backend

# Run daily retraining check at 2:00 AM
# This checks if retraining is needed and trains if conditions are met
0 2 * * * cd /home/user/webapp/backend && python3 scripts/retraining_job.py >> logs/retraining_cron.log 2>&1

# Run weekly forced retraining every Sunday at 3:00 AM
# This ensures models are retrained at least once per week
0 3 * * 0 cd /home/user/webapp/backend && python3 scripts/retraining_job.py --force >> logs/retraining_cron.log 2>&1

# Alternative schedules (uncomment as needed):

# Run every 6 hours
# 0 */6 * * * cd /home/user/webapp/backend && python3 scripts/retraining_job.py >> logs/retraining_cron.log 2>&1

# Run every Monday at 4:00 AM
# 0 4 * * 1 cd /home/user/webapp/backend && python3 scripts/retraining_job.py >> logs/retraining_cron.log 2>&1

# Run on the 1st of every month at 5:00 AM
# 0 5 1 * * cd /home/user/webapp/backend && python3 scripts/retraining_job.py --force >> logs/retraining_cron.log 2>&1
