# ğŸš¨ ê¸´ê¸‰ ìˆ˜ì • ê°€ì´ë“œ (Phase 8 - 405 ì˜¤ë¥˜ í•´ê²°)

## ë¬¸ì œ ì›ì¸
í”„ë¡œë•ì…˜ ì„œë²„ì˜ íŒŒì¼ëª…ì— ì˜¤íƒ€ê°€ ìˆì–´ì„œ 405 ì—ëŸ¬ê°€ ë°œìƒí•©ë‹ˆë‹¤.
- ì˜ëª»ëœ ì´ë¦„: `billing_enchanced.py` âŒ
- ì˜¬ë°”ë¥¸ ì´ë¦„: `billing_enhanced.py` âœ…

## í•´ê²° ë°©ë²• (í”„ë¡œë•ì…˜ ì„œë²„ì—ì„œ ì‹¤í–‰)

### ë°©ë²• 1: ìë™ ìˆ˜ì • ìŠ¤í¬ë¦½íŠ¸ (ê¶Œì¥ â­)

```bash
cd /root/uvis
git pull origin genspark_ai_developer
chmod +x fix_filename_typo.sh
./fix_filename_typo.sh
```

**ì´ ìŠ¤í¬ë¦½íŠ¸ê°€ ìë™ìœ¼ë¡œ:**
1. âœ… íŒŒì¼ëª… ì˜¤íƒ€ í™•ì¸ ë° ìˆ˜ì •
2. âœ… Import ë¬¸ ì˜¤íƒ€ ìˆ˜ì •
3. âœ… Python ìºì‹œ ì‚­ì œ
4. âœ… Git ì»¤ë°‹
5. âœ… ë°±ì—”ë“œ ì¬ì‹œì‘
6. âœ… í—¬ìŠ¤ ì²´í¬
7. âœ… API ì—”ë“œí¬ì¸íŠ¸ í™•ì¸

ì˜ˆìƒ ì†Œìš” ì‹œê°„: **ì•½ 1ë¶„**

---

### ë°©ë²• 2: ìˆ˜ë™ ìˆ˜ì •

```bash
cd /root/uvis

# 1. íŒŒì¼ëª… í™•ì¸
ls -la backend/app/api/v1/billing_en*.py

# 2. ì˜¤íƒ€ íŒŒì¼ì´ ìˆë‹¤ë©´ ìˆ˜ì •
mv backend/app/api/v1/billing_enchanced.py backend/app/api/v1/billing_enhanced.py

# 3. Import ë¬¸ ìˆ˜ì •
sed -i 's/billing_enchanced/billing_enhanced/g' backend/main.py

# 4. ëª¨ë“  íŒŒì¼ì—ì„œ ì˜¤íƒ€ ìˆ˜ì •
find backend -type f -name "*.py" -exec sed -i 's/billing_enchanced/billing_enhanced/g' {} +

# 5. Python ìºì‹œ ì‚­ì œ
find backend -type d -name "__pycache__" -exec rm -rf {} + 2>/dev/null
find backend -name "*.pyc" -delete

# 6. ë°±ì—”ë“œ ì¬ì‹œì‘
docker-compose restart backend
sleep 30

# 7. í—¬ìŠ¤ ì²´í¬
curl http://localhost:8000/health
```

---

## ìˆ˜ì • í›„ í…ŒìŠ¤íŠ¸

```bash
# í† í° ë°›ê¸°
TOKEN=$(curl -s -X POST http://localhost:8000/api/v1/auth/login \
  -H "Content-Type: application/x-www-form-urlencoded" \
  -d "username=admin&password=admin123" | \
  grep -o '"access_token":"[^"]*' | cut -d'"' -f4)

echo "Token: $TOKEN"

# Phase 8 API í…ŒìŠ¤íŠ¸
echo "=== Settlement Approval ==="
curl -X GET "http://localhost:8000/api/v1/billing/enhanced/settlement-approval" \
  -H "Authorization: Bearer $TOKEN"

echo ""
echo "=== Payment Reminder ==="
curl -X GET "http://localhost:8000/api/v1/billing/enhanced/payment-reminder" \
  -H "Authorization: Bearer $TOKEN"

echo ""
echo "=== Export ==="
curl -X GET "http://localhost:8000/api/v1/billing/enhanced/export" \
  -H "Authorization: Bearer $TOKEN"
```

---

## ê¸°ëŒ€ ê²°ê³¼

### âœ… ì„±ê³µ:
```json
[]
```
ë˜ëŠ”
```json
[{"id": 1, "status": "pending", ...}]
```

### âŒ 405 ì˜¤ë¥˜ê°€ ê³„ì†ë˜ë©´:
```bash
# ë°±ì—”ë“œ ë¡œê·¸ í™•ì¸
docker logs uvis-backend --tail 100

# ì™„ì „ ì¬ë¹Œë“œ
docker-compose down
docker-compose build --no-cache backend
docker-compose up -d
```

---

## ë¸Œë¼ìš°ì € í™•ì¸

ìˆ˜ì • í›„:
1. ë¸Œë¼ìš°ì € ìºì‹œ ì‚­ì œ: `Ctrl + Shift + R` (ì—¬ëŸ¬ ë²ˆ)
2. ë¡œê·¸ì•„ì›ƒ â†’ ë‹¤ì‹œ ë¡œê·¸ì¸ (`admin` / `admin123`)
3. Phase 8 í˜ì´ì§€ ë°©ë¬¸:
   - ì¬ë¬´ ëŒ€ì‹œë³´ë“œ
   - ìš”ê¸ˆ ë¯¸ë¦¬ë³´ê¸°
   - ìë™ ì²­êµ¬ ìŠ¤ì¼€ì¤„
   - ì •ì‚° ìŠ¹ì¸ âœ…
   - ê²°ì œ ì•Œë¦¼ âœ…
   - ë°ì´í„° ë‚´ë³´ë‚´ê¸° âœ…
4. F12 ì½˜ì†”ì—ì„œ 405 ì˜¤ë¥˜ ì—†ìŒ í™•ì¸

---

## ë¬¸ì œ í•´ê²°

### 1. ìŠ¤í¬ë¦½íŠ¸ ì‹¤í–‰ ì‹œ "Permission denied" ì˜¤ë¥˜
```bash
chmod +x fix_filename_typo.sh
```

### 2. ë°±ì—”ë“œê°€ ì‹œì‘ë˜ì§€ ì•ŠìŒ
```bash
docker-compose logs backend --tail 50
```

### 3. ì—¬ì „íˆ 405 ì˜¤ë¥˜
```bash
# API ì—”ë“œí¬ì¸íŠ¸ í™•ì¸
curl -s http://localhost:8000/openapi.json | grep "billing/enhanced" | head -20
```

---

## ë„ì›€ì´ í•„ìš”í•˜ë©´

ë‹¤ìŒ ì •ë³´ë¥¼ ê³µìœ í•´ì£¼ì„¸ìš”:
1. `ls -la backend/app/api/v1/billing_en*.py` ê²°ê³¼
2. `docker logs uvis-backend --tail 50` ê²°ê³¼
3. ë¸Œë¼ìš°ì € F12 ì½˜ì†” ìŠ¤í¬ë¦°ìƒ·

---

**âœ¨ ìˆ˜ì • ì™„ë£Œ í›„ ë°˜ë“œì‹œ ì•Œë ¤ì£¼ì„¸ìš”!**
